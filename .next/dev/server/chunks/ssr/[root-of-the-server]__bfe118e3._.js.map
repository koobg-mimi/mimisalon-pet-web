{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/lib/client-logger.ts"],"sourcesContent":["/**\n * Client-Side Logger\n *\n * Browser-side logger that collects network errors and sends them to the server.\n * Implements batching, debouncing, and error retry logic.\n *\n * @module lib/client-logger\n * @clientOnly\n */\n\n'use client';\n\n// ============================================================================\n// Type Definitions\n// ============================================================================\n\n/**\n * Network error details collected by client\n */\nexport interface ClientNetworkError {\n  url: string;\n  method: string;\n  statusCode?: number;\n  message: string;\n  timestamp: string;\n  requestHeaders?: Record<string, string>;\n  responseHeaders?: Record<string, string>;\n  requestBody?: any;\n  responseBody?: any;\n  duration?: number;\n}\n\n/**\n * Enriched error log with browser context\n */\ninterface EnrichedError extends ClientNetworkError {\n  browser: string;\n  userAgent: string;\n  sessionId: string;\n  userId?: string;\n  pathname: string;\n  pageUrl: string;\n  referrer: string;\n}\n\n// ============================================================================\n// Configuration\n// ============================================================================\n\nconst BATCH_SIZE = 10; // Send logs when batch reaches this size\nconst BATCH_INTERVAL = 5000; // Send logs every 5 seconds\nconst MAX_RETRIES = 3; // Maximum retry attempts\nconst LOG_API_ENDPOINT = '/api/logs'; // Server endpoint for log collection\n\n// Check if logging is enabled\nconst isLoggingEnabled = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  return process.env.NEXT_PUBLIC_LOGGING_ENABLED !== 'false';\n};\n\n// ============================================================================\n// Browser Context\n// ============================================================================\n\n/**\n * Generate or retrieve session ID\n */\nconst getSessionId = (): string => {\n  if (typeof window === 'undefined') return 'ssr-session';\n\n  const STORAGE_KEY = 'mimisalon_session_id';\n  let sessionId = sessionStorage.getItem(STORAGE_KEY);\n\n  if (!sessionId) {\n    sessionId = `session-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n    sessionStorage.setItem(STORAGE_KEY, sessionId);\n  }\n\n  return sessionId;\n};\n\n/**\n * Extract browser info from user agent\n */\nconst getBrowserInfo = (): string => {\n  if (typeof window === 'undefined') return 'Unknown';\n\n  const ua = window.navigator.userAgent;\n\n  if (ua.includes('Chrome')) {\n    const match = ua.match(/Chrome\\/(\\d+)/);\n    return match ? `Chrome ${match[1]}` : 'Chrome';\n  }\n\n  if (ua.includes('Firefox')) {\n    const match = ua.match(/Firefox\\/(\\d+)/);\n    return match ? `Firefox ${match[1]}` : 'Firefox';\n  }\n\n  if (ua.includes('Safari') && !ua.includes('Chrome')) {\n    const match = ua.match(/Version\\/(\\d+)/);\n    return match ? `Safari ${match[1]}` : 'Safari';\n  }\n\n  if (ua.includes('Edg')) {\n    const match = ua.match(/Edg\\/(\\d+)/);\n    return match ? `Edge ${match[1]}` : 'Edge';\n  }\n\n  return 'Unknown Browser';\n};\n\n/**\n * Get current user ID (if available from session/cookie)\n */\nconst getUserId = (): string | undefined => {\n  if (typeof window === 'undefined') return undefined;\n\n  // Try to get user ID from localStorage (set by auth system)\n  try {\n    const authData = localStorage.getItem('auth_user');\n    if (authData) {\n      const parsed = JSON.parse(authData);\n      return parsed.id;\n    }\n  } catch {\n    // Ignore parsing errors\n  }\n\n  return undefined;\n};\n\n/**\n * Enrich error with browser context\n */\nconst enrichError = (error: ClientNetworkError): EnrichedError => {\n  return {\n    ...error,\n    browser: getBrowserInfo(),\n    userAgent: typeof window !== 'undefined' ? window.navigator.userAgent : 'Unknown',\n    sessionId: getSessionId(),\n    userId: getUserId(),\n    pathname: typeof window !== 'undefined' ? window.location.pathname : '',\n    pageUrl: typeof window !== 'undefined' ? window.location.href : '',\n    referrer: typeof document !== 'undefined' ? document.referrer : '',\n  };\n};\n\n// ============================================================================\n// Batch Management\n// ============================================================================\n\n/**\n * Log batch queue\n */\nclass LogBatchQueue {\n  private queue: EnrichedError[] = [];\n  private timer: NodeJS.Timeout | null = null;\n  private isSending = false;\n\n  /**\n   * Add error to queue\n   */\n  add(error: ClientNetworkError): void {\n    if (!isLoggingEnabled()) return;\n\n    const enriched = enrichError(error);\n    this.queue.push(enriched);\n\n    // Send immediately if batch is full\n    if (this.queue.length >= BATCH_SIZE) {\n      this.flush();\n    } else {\n      // Schedule batch send\n      this.scheduleBatchSend();\n    }\n  }\n\n  /**\n   * Schedule batch send after interval\n   */\n  private scheduleBatchSend(): void {\n    if (this.timer) return; // Already scheduled\n\n    this.timer = setTimeout(() => {\n      this.flush();\n    }, BATCH_INTERVAL);\n  }\n\n  /**\n   * Send batch to server\n   */\n  async flush(): Promise<void> {\n    if (this.isSending || this.queue.length === 0) return;\n\n    // Clear timer\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n\n    // Get batch to send\n    const batch = [...this.queue];\n    this.queue = [];\n    this.isSending = true;\n\n    try {\n      await this.sendBatch(batch);\n    } catch (error) {\n      console.error('[ClientLogger] Failed to send log batch:', error);\n      // Re-queue failed logs (up to max retries)\n      // For simplicity, we're not implementing retry logic here\n    } finally {\n      this.isSending = false;\n    }\n  }\n\n  /**\n   * Send batch to server API\n   */\n  private async sendBatch(batch: EnrichedError[], retryCount = 0): Promise<void> {\n    try {\n      const response = await fetch(LOG_API_ENDPOINT, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ logs: batch }),\n      });\n\n      if (!response.ok) {\n        // Retry on 5xx errors\n        if (response.status >= 500 && retryCount < MAX_RETRIES) {\n          await new Promise((resolve) => setTimeout(resolve, 1000 * (retryCount + 1)));\n          return this.sendBatch(batch, retryCount + 1);\n        }\n\n        throw new Error(`Log API returned ${response.status}`);\n      }\n    } catch (error) {\n      // Retry on network errors\n      if (retryCount < MAX_RETRIES) {\n        await new Promise((resolve) => setTimeout(resolve, 1000 * (retryCount + 1)));\n        return this.sendBatch(batch, retryCount + 1);\n      }\n\n      throw error;\n    }\n  }\n\n  /**\n   * Clear queue and timer\n   */\n  clear(): void {\n    this.queue = [];\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n  }\n}\n\n// ============================================================================\n// Singleton Instance\n// ============================================================================\n\n/**\n * Global log batch queue\n */\nconst logQueue = new LogBatchQueue();\n\n// Send logs before page unload\nif (typeof window !== 'undefined') {\n  window.addEventListener('beforeunload', () => {\n    logQueue.flush();\n  });\n}\n\n// ============================================================================\n// Public API\n// ============================================================================\n\n/**\n * Log network error from client\n */\nexport const logNetworkError = (error: ClientNetworkError): void => {\n  if (!isLoggingEnabled()) return;\n\n  // Filter out noisy endpoints\n  const noisyEndpoints = ['/api/health', '/api/logs', '/_next/'];\n  if (noisyEndpoints.some((endpoint) => error.url.includes(endpoint))) {\n    return;\n  }\n\n  // Filter out successful requests\n  if (error.statusCode && error.statusCode >= 200 && error.statusCode < 400) {\n    return;\n  }\n\n  logQueue.add(error);\n};\n\n/**\n * Manually flush log queue\n */\nexport const flushLogs = async (): Promise<void> => {\n  await logQueue.flush();\n};\n\n/**\n * Clear log queue (for testing)\n */\nexport const clearLogs = (): void => {\n  logQueue.clear();\n};\n\n// ============================================================================\n// Export\n// ============================================================================\n\nexport default {\n  logNetworkError,\n  flushLogs,\n  clearLogs,\n};\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC;;;;;;;;;;AAED;AAmCA,+EAA+E;AAC/E,gBAAgB;AAChB,+EAA+E;AAE/E,MAAM,aAAa,IAAI,yCAAyC;AAChE,MAAM,iBAAiB,MAAM,4BAA4B;AACzD,MAAM,cAAc,GAAG,yBAAyB;AAChD,MAAM,mBAAmB,aAAa,qCAAqC;AAE3E,8BAA8B;AAC9B,MAAM,mBAAmB;IACvB,wCAAmC,OAAO;;;AAE5C;AAEA,+EAA+E;AAC/E,kBAAkB;AAClB,+EAA+E;AAE/E;;CAEC,GACD,MAAM,eAAe;IACnB,wCAAmC,OAAO;;;IAE1C,MAAM;IACN,IAAI;AAQN;AAEA;;CAEC,GACD,MAAM,iBAAiB;IACrB,wCAAmC,OAAO;;;IAE1C,MAAM;AAuBR;AAEA;;CAEC,GACD,MAAM,YAAY;IAChB,wCAAmC,OAAO;;;AAc5C;AAEA;;CAEC,GACD,MAAM,cAAc,CAAC;IACnB,OAAO;QACL,GAAG,KAAK;QACR,SAAS;QACT,WAAW,sCAAgC,0BAA6B;QACxE,WAAW;QACX,QAAQ;QACR,UAAU,sCAAgC,0BAA2B;QACrE,SAAS,sCAAgC,0BAAuB;QAChE,UAAU,OAAO,aAAa,cAAc,SAAS,QAAQ,GAAG;IAClE;AACF;AAEA,+EAA+E;AAC/E,mBAAmB;AACnB,+EAA+E;AAE/E;;CAEC,GACD,MAAM;IACI,QAAyB,EAAE,CAAC;IAC5B,QAA+B,KAAK;IACpC,YAAY,MAAM;IAE1B;;GAEC,GACD,IAAI,KAAyB,EAAQ;QACnC,IAAI,CAAC,oBAAoB;QAEzB,MAAM,WAAW,YAAY;QAC7B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;QAEhB,oCAAoC;QACpC,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,YAAY;YACnC,IAAI,CAAC,KAAK;QACZ,OAAO;YACL,sBAAsB;YACtB,IAAI,CAAC,iBAAiB;QACxB;IACF;IAEA;;GAEC,GACD,AAAQ,oBAA0B;QAChC,IAAI,IAAI,CAAC,KAAK,EAAE,QAAQ,oBAAoB;QAE5C,IAAI,CAAC,KAAK,GAAG,WAAW;YACtB,IAAI,CAAC,KAAK;QACZ,GAAG;IACL;IAEA;;GAEC,GACD,MAAM,QAAuB;QAC3B,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,GAAG;QAE/C,cAAc;QACd,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,aAAa,IAAI,CAAC,KAAK;YACvB,IAAI,CAAC,KAAK,GAAG;QACf;QAEA,oBAAoB;QACpB,MAAM,QAAQ;eAAI,IAAI,CAAC,KAAK;SAAC;QAC7B,IAAI,CAAC,KAAK,GAAG,EAAE;QACf,IAAI,CAAC,SAAS,GAAG;QAEjB,IAAI;YACF,MAAM,IAAI,CAAC,SAAS,CAAC;QACvB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4CAA4C;QAC1D,2CAA2C;QAC3C,0DAA0D;QAC5D,SAAU;YACR,IAAI,CAAC,SAAS,GAAG;QACnB;IACF;IAEA;;GAEC,GACD,MAAc,UAAU,KAAsB,EAAE,aAAa,CAAC,EAAiB;QAC7E,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,kBAAkB;gBAC7C,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBAAE,MAAM;gBAAM;YACrC;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,sBAAsB;gBACtB,IAAI,SAAS,MAAM,IAAI,OAAO,aAAa,aAAa;oBACtD,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS,OAAO,CAAC,aAAa,CAAC;oBACzE,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,aAAa;gBAC5C;gBAEA,MAAM,IAAI,MAAM,CAAC,iBAAiB,EAAE,SAAS,MAAM,EAAE;YACvD;QACF,EAAE,OAAO,OAAO;YACd,0BAA0B;YAC1B,IAAI,aAAa,aAAa;gBAC5B,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS,OAAO,CAAC,aAAa,CAAC;gBACzE,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,aAAa;YAC5C;YAEA,MAAM;QACR;IACF;IAEA;;GAEC,GACD,QAAc;QACZ,IAAI,CAAC,KAAK,GAAG,EAAE;QACf,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,aAAa,IAAI,CAAC,KAAK;YACvB,IAAI,CAAC,KAAK,GAAG;QACf;IACF;AACF;AAEA,+EAA+E;AAC/E,qBAAqB;AACrB,+EAA+E;AAE/E;;CAEC,GACD,MAAM,WAAW,IAAI;AAErB,+BAA+B;AAC/B;;AAaO,MAAM,kBAAkB,CAAC;IAC9B,IAAI,CAAC,oBAAoB;IAEzB,6BAA6B;IAC7B,MAAM,iBAAiB;QAAC;QAAe;QAAa;KAAU;IAC9D,IAAI,eAAe,IAAI,CAAC,CAAC,WAAa,MAAM,GAAG,CAAC,QAAQ,CAAC,YAAY;QACnE;IACF;IAEA,iCAAiC;IACjC,IAAI,MAAM,UAAU,IAAI,MAAM,UAAU,IAAI,OAAO,MAAM,UAAU,GAAG,KAAK;QACzE;IACF;IAEA,SAAS,GAAG,CAAC;AACf;AAKO,MAAM,YAAY;IACvB,MAAM,SAAS,KAAK;AACtB;AAKO,MAAM,YAAY;IACvB,SAAS,KAAK;AAChB;uCAMe;IACb;IACA;IACA;AACF","debugId":null}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/lib/global-fetch-interceptor.ts"],"sourcesContent":["/**\n * Global Fetch Interceptor\n *\n * Monkey patches the native fetch API to automatically log all network errors.\n * This must be initialized once at app startup.\n *\n * @module lib/global-fetch-interceptor\n * @clientOnly\n */\n\n'use client';\n\nimport { logNetworkError } from './client-logger';\n\n// Store original fetch\nlet originalFetch: typeof fetch | null = null;\nlet isInterceptorInstalled = false;\n\n/**\n * Convert Headers object to plain object\n */\nconst headersToObject = (headers: Headers): Record<string, string> => {\n  const obj: Record<string, string> = {};\n  headers.forEach((value, key) => {\n    obj[key] = value;\n  });\n  return obj;\n};\n\n/**\n * Determine if response should be logged\n */\nconst shouldLogResponse = (response: Response): boolean => {\n  // Log 4xx and 5xx errors\n  return response.status >= 400;\n};\n\n/**\n * Format error message based on response\n */\nconst formatErrorMessage = (response: Response): string => {\n  const { status } = response;\n\n  if (status >= 500) {\n    return `Server Error: ${response.statusText}`;\n  }\n\n  if (status === 401) {\n    return 'Unauthorized: Authentication required';\n  }\n\n  if (status === 403) {\n    return 'Forbidden: Access denied';\n  }\n\n  if (status === 404) {\n    return 'Not Found: Resource does not exist';\n  }\n\n  if (status === 429) {\n    return 'Too Many Requests: Rate limit exceeded';\n  }\n\n  if (status >= 400) {\n    return `Client Error: ${response.statusText}`;\n  }\n\n  return response.statusText || 'Unknown error';\n};\n\n/**\n * Check if URL should be logged (filter out noisy endpoints)\n */\nconst shouldLogUrl = (url: string): boolean => {\n  const noisyEndpoints = [\n    '/api/health',\n    '/api/logs', // Don't log the logging endpoint itself\n    '/_next/',\n    '/api/ping',\n  ];\n\n  return !noisyEndpoints.some((endpoint) => url.includes(endpoint));\n};\n\n/**\n * Parse request body to readable format\n */\nasync function parseRequestBody(body: BodyInit | null | undefined): Promise<any> {\n  if (!body) return undefined;\n\n  try {\n    if (typeof body === 'string') {\n      // Try to parse as JSON if it looks like JSON\n      if (body.trim().startsWith('{') || body.trim().startsWith('[')) {\n        return JSON.parse(body);\n      }\n      return body;\n    }\n\n    if (body instanceof FormData) {\n      const formObject: Record<string, any> = {};\n      body.forEach((value, key) => {\n        formObject[key] = value instanceof File ? `[File: ${value.name}]` : value;\n      });\n      return formObject;\n    }\n\n    if (body instanceof URLSearchParams) {\n      const params: Record<string, string> = {};\n      body.forEach((value, key) => {\n        params[key] = value;\n      });\n      return params;\n    }\n\n    if (body instanceof Blob) {\n      return `[Blob: ${body.size} bytes, ${body.type || 'unknown type'}]`;\n    }\n\n    if (body instanceof ArrayBuffer || ArrayBuffer.isView(body)) {\n      return `[Binary data: ${body.byteLength || (body as any).buffer.byteLength} bytes]`;\n    }\n\n    return '[Unknown body type]';\n  } catch {\n    return '[Unable to parse request body]';\n  }\n}\n\n/**\n * Convert relative URL to absolute URL\n */\nfunction getAbsoluteUrl(url: string): string {\n  try {\n    // If already absolute, return as is\n    if (url.startsWith('http://') || url.startsWith('https://')) {\n      return url;\n    }\n\n    // Convert relative to absolute using window.location\n    if (typeof window !== 'undefined') {\n      const absoluteUrl = new URL(url, window.location.origin);\n      return absoluteUrl.toString();\n    }\n\n    return url;\n  } catch {\n    return url;\n  }\n}\n\n/**\n * Enhanced fetch with automatic error logging\n */\nasync function interceptedFetch(input: RequestInfo | URL, init?: RequestInit): Promise<Response> {\n  if (!originalFetch) {\n    throw new Error('Global fetch interceptor not initialized');\n  }\n\n  const startTime = performance.now();\n  const relativeUrl =\n    typeof input === 'string' ? input : input instanceof URL ? input.toString() : input.url;\n  const absoluteUrl = getAbsoluteUrl(relativeUrl);\n  const method = init?.method?.toUpperCase() || 'GET';\n\n  // Check if we should log this URL\n  if (!shouldLogUrl(relativeUrl)) {\n    return originalFetch(input, init);\n  }\n\n  try {\n    // Call original fetch\n    const response = await originalFetch(input, init);\n    const duration = performance.now() - startTime;\n\n    // Log error responses\n    if (shouldLogResponse(response)) {\n      // Clone response to read body without consuming original\n      const clonedResponse = response.clone();\n      let responseBody: any;\n\n      try {\n        const contentType = clonedResponse.headers.get('content-type');\n        if (contentType?.includes('application/json')) {\n          responseBody = await clonedResponse.json();\n        } else {\n          responseBody = await clonedResponse.text();\n        }\n      } catch {\n        responseBody = '[Unable to read response body]';\n      }\n\n      // Parse request body\n      const parsedRequestBody = await parseRequestBody(init?.body);\n\n      logNetworkError({\n        url: absoluteUrl,\n        method,\n        statusCode: response.status,\n        message: `[${response.status}] ${formatErrorMessage(response)}`,\n        timestamp: new Date().toISOString(),\n        requestHeaders: init?.headers ? headersToObject(new Headers(init.headers)) : undefined,\n        responseHeaders: headersToObject(response.headers),\n        requestBody: parsedRequestBody,\n        responseBody,\n        duration,\n      });\n    }\n\n    return response;\n  } catch (error) {\n    const duration = performance.now() - startTime;\n\n    // Log network errors (timeout, connection failed, etc.)\n    const isTimeout = error instanceof Error && error.message.includes('timeout');\n    const statusCode = isTimeout ? 408 : 0;\n\n    // Parse request body\n    const parsedRequestBody = await parseRequestBody(init?.body);\n\n    logNetworkError({\n      url: absoluteUrl,\n      method,\n      statusCode,\n      message: `[${statusCode}] ${error instanceof Error ? error.message : 'Network request failed'}`,\n      timestamp: new Date().toISOString(),\n      requestHeaders: init?.headers ? headersToObject(new Headers(init.headers)) : undefined,\n      requestBody: parsedRequestBody,\n      duration,\n    });\n\n    // Re-throw error to maintain fetch API behavior\n    throw error;\n  }\n}\n\n/**\n * Install global fetch interceptor\n *\n * This replaces the native fetch with our intercepted version.\n * Should be called once at app startup.\n *\n * @example\n * ```typescript\n * // In app/layout.tsx or _app.tsx\n * import { installFetchInterceptor } from '@/lib/global-fetch-interceptor';\n *\n * useEffect(() => {\n *   installFetchInterceptor();\n * }, []);\n * ```\n */\nexport function installFetchInterceptor(): void {\n  // Only install in browser environment\n  if (typeof window === 'undefined') {\n    console.warn('[FetchInterceptor] Cannot install in SSR environment');\n    return;\n  }\n\n  // Check if logging is enabled\n  if (process.env.NEXT_PUBLIC_LOGGING_ENABLED === 'false') {\n    console.log('[FetchInterceptor] Logging disabled, skipping installation');\n    return;\n  }\n\n  // Don't install twice\n  if (isInterceptorInstalled) {\n    console.warn('[FetchInterceptor] Already installed, skipping');\n    return;\n  }\n\n  // Store original fetch\n  originalFetch = window.fetch;\n\n  // Replace with intercepted version\n  window.fetch = interceptedFetch as typeof fetch;\n\n  isInterceptorInstalled = true;\n  console.log('[FetchInterceptor] ✅ Global fetch interceptor installed');\n}\n\n/**\n * Uninstall global fetch interceptor\n *\n * Restores the original native fetch function.\n * Useful for testing or cleanup.\n */\nexport function uninstallFetchInterceptor(): void {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  if (!isInterceptorInstalled || !originalFetch) {\n    console.warn('[FetchInterceptor] Not installed, nothing to uninstall');\n    return;\n  }\n\n  // Restore original fetch\n  window.fetch = originalFetch;\n  originalFetch = null;\n  isInterceptorInstalled = false;\n\n  console.log('[FetchInterceptor] ⚠️ Global fetch interceptor uninstalled');\n}\n\n/**\n * Check if interceptor is installed\n */\nexport function isFetchInterceptorInstalled(): boolean {\n  return isInterceptorInstalled;\n}\n\n/**\n * Get original fetch function (for testing)\n */\nexport function getOriginalFetch(): typeof fetch | null {\n  return originalFetch;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/components/providers/fetch-interceptor-provider.tsx"],"sourcesContent":["/**\n * Fetch Interceptor Provider\n *\n * Client component that installs the global fetch interceptor on mount.\n * Should be included in the root layout.\n *\n * @module components/providers/fetch-interceptor-provider\n */\n\n'use client';\n\nimport { useEffect } from 'react';\nimport { installFetchInterceptor } from '@/lib/global-fetch-interceptor';\n\n/**\n * Provider component that installs fetch interceptor\n *\n * @example\n * ```tsx\n * // In app/layout.tsx\n * <FetchInterceptorProvider>\n *   {children}\n * </FetchInterceptorProvider>\n * ```\n */\nexport function FetchInterceptorProvider({ children }: { children: React.ReactNode }) {\n  useEffect(() => {\n    // Install fetch interceptor on mount\n    installFetchInterceptor();\n\n    // Cleanup is optional - usually we want to keep it installed\n    // return () => {\n    //   uninstallFetchInterceptor();\n    // };\n  }, []);\n\n  return <>{children}</>;\n}\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC;;;;;AAID;AACA;AAHA;;;;AAgBO,SAAS,yBAAyB,EAAE,QAAQ,EAAiC;IAClF,IAAA,kNAAS,EAAC;QACR,qCAAqC;QACrC,IAAA,uKAAuB;IAEvB,6DAA6D;IAC7D,iBAAiB;IACjB,iCAAiC;IACjC,KAAK;IACP,GAAG,EAAE;IAEL,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/features/booking/api/booking-api.ts"],"sourcesContent":["/**\n * 예약 API 레이어 (BFF: Backend-For-Frontend)\n *\n * 서버 응답을 프론트엔드 친화적 형식으로 변환하고\n * 여러 API 호출을 병합하여 UI가 단순히 표시만 하도록 함\n */\n\nimport { format } from 'date-fns'\nimport { ko } from 'date-fns/locale'\n\n/**\n * 예약 초기화 요청 데이터\n */\nexport interface InitializeBookingRequest {\n  /** 멱등성 키 (중복 방지) */\n  idempotencyKey: string\n  /** 반려동물별 서비스 정보 */\n  petServices: {\n    petId: string\n    services: {\n      id: string\n      name: string\n      price: number\n      duration: number\n    }[]\n    options: {\n      id: string\n      name: string\n      price: number\n    }[]\n  }[]\n  /** 서비스 주소 ID */\n  addressId: string\n  /** 미용사 ID */\n  groomerId: string\n  /** 예약 날짜 (YYYY-MM-DD) */\n  date: string\n  /** 시간대 */\n  timeSlot: string\n  /** 특별 요청사항 */\n  specialRequests?: string\n}\n\n/**\n * 예약 초기화 응답 데이터\n */\nexport interface InitializeBookingResponse {\n  /** 예약 ID */\n  bookingId: string\n  /** 기존 예약 여부 */\n  isExisting: boolean\n  /** 예약 상태 */\n  status: string\n}\n\n/**\n * 결제 초기화 요청 데이터\n */\nexport interface InitializePaymentRequest {\n  /** 예약 ID */\n  bookingId: string\n  /** 결제 금액 */\n  amount: number\n  /** 주문명 */\n  orderName: string\n}\n\n/**\n * 결제 초기화 응답 데이터\n */\nexport interface InitializePaymentResponse {\n  /** 결제 ID */\n  paymentId: string\n  /** PortOne 결제 키 */\n  portonePaymentId: string\n}\n\n/**\n * 예약 상세 정보 (프론트엔드 친화적 형식)\n */\nexport interface BookingDetails {\n  /** 예약 ID */\n  id: string\n  /** 고객 정보 */\n  customer: {\n    id: string\n    name: string\n    phone: string\n    email: string\n  }\n  /** 매장 정보 */\n  shop: {\n    id: string\n    name: string\n    address: string\n    phone: string\n  }\n  /** 미용사 정보 */\n  groomer: {\n    id: string\n    name: string\n    profileImage?: string\n  }\n  /** 반려동물 정보 */\n  pets: {\n    id: string\n    name: string\n    breed: string\n    type: string\n  }[]\n  /** 서비스 정보 */\n  services: {\n    petName: string\n    serviceName: string\n    price: number\n    formattedPrice: string\n  }[]\n  /** 예약 날짜 및 시간 */\n  scheduledAt: Date\n  /** 포맷된 날짜 */\n  formattedDate: string\n  /** 포맷된 시간 */\n  formattedTime: string\n  /** 총 금액 */\n  totalAmount: number\n  /** 포맷된 총 금액 */\n  formattedTotalAmount: string\n  /** 예약 상태 */\n  status: string\n  /** 특별 요청사항 */\n  specialRequests?: string\n  /** 결제 정보 */\n  payment?: {\n    id: string\n    status: string\n    paidAt?: Date\n  }\n  /** 생성일시 */\n  createdAt: Date\n  /** 수정일시 */\n  updatedAt: Date\n}\n\n/**\n * 예약 목록 필터\n */\nexport interface BookingListFilters {\n  /** 고객 ID */\n  userId?: string\n  /** 예약 상태 */\n  status?: string\n  /** 날짜 범위 시작 */\n  startDate?: string\n  /** 날짜 범위 종료 */\n  endDate?: string\n  /** 페이지 번호 */\n  page?: number\n  /** 페이지 크기 */\n  pageSize?: number\n}\n\n/**\n * 통화 포맷 헬퍼\n */\nfunction formatCurrency(amount: number): string {\n  return new Intl.NumberFormat('ko-KR', {\n    style: 'currency',\n    currency: 'KRW',\n  }).format(amount)\n}\n\n/**\n * 예약 API\n */\nexport const bookingApi = {\n  /**\n   * 예약 초기화 (멱등성 보장)\n   *\n   * @param request 예약 초기화 요청 데이터\n   * @returns 예약 ID 및 상태\n   */\n  async initializeBooking(request: InitializeBookingRequest): Promise<InitializeBookingResponse> {\n    const response = await fetch('/api/bookings/initialize', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(request),\n    })\n\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.message || '예약 초기화에 실패했습니다')\n    }\n\n    return response.json()\n  },\n\n  /**\n   * 결제 초기화\n   *\n   * @param request 결제 초기화 요청 데이터\n   * @returns 결제 ID 및 PortOne 결제 키\n   */\n  async initializePayment(request: InitializePaymentRequest): Promise<InitializePaymentResponse> {\n    const response = await fetch('/api/payments/initialize', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(request),\n    })\n\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.message || '결제 초기화에 실패했습니다')\n    }\n\n    return response.json()\n  },\n\n  /**\n   * 예약 상세 조회 (프론트엔드 친화적 형식)\n   *\n   * @param bookingId 예약 ID\n   * @returns 예약 상세 정보 (이미 포맷됨)\n   */\n  async getBooking(bookingId: string): Promise<BookingDetails> {\n    const response = await fetch(`/api/bookings/${bookingId}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.message || '예약 조회에 실패했습니다')\n    }\n\n    const data = await response.json()\n\n    // 서버 응답을 프론트엔드 친화적 형식으로 변환\n    return {\n      ...data,\n      scheduledAt: new Date(data.scheduledAt),\n      formattedDate: format(new Date(data.scheduledAt), 'yyyy년 M월 d일 (EEEE)', {\n        locale: ko,\n      }),\n      formattedTime: format(new Date(data.scheduledAt), 'HH:mm', { locale: ko }),\n      formattedTotalAmount: formatCurrency(data.totalAmount),\n      services: data.services.map((service: any) => ({\n        ...service,\n        formattedPrice: formatCurrency(service.price),\n      })),\n      createdAt: new Date(data.createdAt),\n      updatedAt: new Date(data.updatedAt),\n      payment: data.payment\n        ? {\n            ...data.payment,\n            paidAt: data.payment.paidAt ? new Date(data.payment.paidAt) : undefined,\n          }\n        : undefined,\n    }\n  },\n\n  /**\n   * 예약 목록 조회 (프론트엔드 친화적 형식)\n   *\n   * @param filters 필터 조건\n   * @returns 예약 목록 (이미 포맷됨)\n   */\n  async getBookings(filters?: BookingListFilters): Promise<{\n    bookings: BookingDetails[]\n    pagination: {\n      currentPage: number\n      totalPages: number\n      totalItems: number\n      pageSize: number\n    }\n  }> {\n    const queryParams = new URLSearchParams()\n    if (filters?.userId) queryParams.append('userId', filters.userId)\n    if (filters?.status) queryParams.append('status', filters.status)\n    if (filters?.startDate) queryParams.append('startDate', filters.startDate)\n    if (filters?.endDate) queryParams.append('endDate', filters.endDate)\n    if (filters?.page) queryParams.append('page', filters.page.toString())\n    if (filters?.pageSize) queryParams.append('pageSize', filters.pageSize.toString())\n\n    const response = await fetch(`/api/bookings?${queryParams.toString()}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.message || '예약 목록 조회에 실패했습니다')\n    }\n\n    const data = await response.json()\n\n    // 각 예약을 프론트엔드 친화적 형식으로 변환\n    return {\n      bookings: data.bookings.map((booking: any) => ({\n        ...booking,\n        scheduledAt: new Date(booking.scheduledAt),\n        formattedDate: format(new Date(booking.scheduledAt), 'yyyy년 M월 d일 (EEEE)', {\n          locale: ko,\n        }),\n        formattedTime: format(new Date(booking.scheduledAt), 'HH:mm', { locale: ko }),\n        formattedTotalAmount: formatCurrency(booking.totalAmount),\n        services: booking.services.map((service: any) => ({\n          ...service,\n          formattedPrice: formatCurrency(service.price),\n        })),\n        createdAt: new Date(booking.createdAt),\n        updatedAt: new Date(booking.updatedAt),\n      })),\n      pagination: data.pagination,\n    }\n  },\n\n  /**\n   * 예약 취소\n   *\n   * @param bookingId 예약 ID\n   * @param reason 취소 사유\n   */\n  async cancelBooking(bookingId: string, reason?: string): Promise<void> {\n    const response = await fetch(`/api/bookings/${bookingId}/cancel`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ reason }),\n    })\n\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.message || '예약 취소에 실패했습니다')\n    }\n  },\n\n  /**\n   * 예약 상태 업데이트\n   *\n   * @param bookingId 예약 ID\n   * @param status 새로운 상태\n   */\n  async updateBookingStatus(bookingId: string, status: string): Promise<void> {\n    const response = await fetch(`/api/bookings/${bookingId}/status`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ status }),\n    })\n\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(error.message || '예약 상태 업데이트에 실패했습니다')\n    }\n  },\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 669, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/features/booking/types/booking-form.types.ts"],"sourcesContent":["/**\n * 예약 폼 타입 정의\n */\n\nimport { ServiceData } from '@/data/services'\nimport { ServiceOption } from '@/features/booking/components/ui/service-option-selector'\n\n/**\n * 반려동물별 서비스 선택 정보\n */\nexport interface PetServiceSelection {\n  /** 반려동물 ID */\n  petId: string\n  /** 선택된 서비스 목록 */\n  services: ServiceData[]\n  /** 선택된 추가 옵션 목록 */\n  options: ServiceOption[]\n}\n\n/**\n * 예약 폼 데이터 구조\n */\nexport interface BookingForm {\n  /** 반려동물별 서비스 선택 목록 */\n  petServices: PetServiceSelection[]\n  /** 선택된 주소 ID */\n  addressId: string\n  /** 선택된 미용사 ID */\n  groomerId: string\n  /** 예약 날짜 (yyyy-MM-dd) */\n  date: string\n  /** 예약 시간대 */\n  timeSlot: string\n  /** 특별 요청사항 */\n  specialRequests: string\n}\n\n/**\n * 예약 폼 단계 타입\n */\nexport type BookingStep = 1 | 2 | 3 | 4\n\n/**\n * 초기 폼 상태\n */\nexport const initialBookingForm: BookingForm = {\n  petServices: [],\n  addressId: '',\n  groomerId: '',\n  date: '',\n  timeSlot: '',\n  specialRequests: '',\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AA2CM,MAAM,qBAAkC;IAC7C,aAAa,EAAE;IACf,WAAW;IACX,WAAW;IACX,MAAM;IACN,UAAU;IACV,iBAAiB;AACnB","debugId":null}},
    {"offset": {"line": 687, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/features/booking/state/booking-slice.ts"],"sourcesContent":["/**\n * 예약 Redux Slice\n *\n * 예약 도메인의 클라이언트 상태 관리\n * Redux Toolkit의 createSlice와 createAsyncThunk 사용\n */\n\nimport { createAsyncThunk, createSlice, type PayloadAction } from '@reduxjs/toolkit'\nimport { Pet } from '@prisma/client'\nimport { bookingApi, type InitializeBookingRequest } from '../api/booking-api'\nimport { BookingForm, BookingStep, initialBookingForm } from '../types/booking-form.types'\nimport { ServiceData } from '@/data/services'\nimport { ServiceOption } from '@/features/booking/components/ui/service-option-selector'\n\n/**\n * 예약 필터 인터페이스\n */\nexport interface BookingFilters {\n  /** 예약 상태 */\n  status: string\n  /** 시작 날짜 */\n  startDate?: string\n  /** 종료 날짜 */\n  endDate?: string\n}\n\n/**\n * 예약 상태 인터페이스\n */\nexport interface BookingState {\n  /** 선택된 예약 ID */\n  selectedBookingId: string | null\n  /** 예약 필터 */\n  filters: BookingFilters\n  /** 로딩 상태 */\n  isLoading: boolean\n  /** 에러 메시지 */\n  error: string | null\n  /** 현재 예약 생성 중 여부 */\n  isCreating: boolean\n  /** 현재 결제 초기화 중 여부 */\n  isInitializingPayment: boolean\n  /** 예약 폼 데이터 */\n  formData: BookingForm\n  /** 현재 예약 단계 */\n  currentStep: BookingStep\n  /** 결제 ID */\n  paymentId: string | null\n  /** 현재 미용사 페이지 */\n  currentGroomerPage: number\n}\n\n/**\n * 초기 상태\n */\nconst initialState: BookingState = {\n  selectedBookingId: null,\n  filters: {\n    status: 'all',\n  },\n  isLoading: false,\n  error: null,\n  isCreating: false,\n  isInitializingPayment: false,\n  formData: initialBookingForm,\n  currentStep: 1,\n  paymentId: null,\n  currentGroomerPage: 1,\n}\n\n/**\n * 예약 초기화 비동기 액션\n *\n * 멱등성이 보장된 예약 생성\n */\nexport const initializeBooking = createAsyncThunk(\n  'booking/initialize',\n  async (request: InitializeBookingRequest, { rejectWithValue }) => {\n    try {\n      return await bookingApi.initializeBooking(request)\n    } catch (error: any) {\n      return rejectWithValue(error.message || '예약 초기화에 실패했습니다')\n    }\n  }\n)\n\n/**\n * 결제 초기화 비동기 액션\n */\nexport const initializePayment = createAsyncThunk(\n  'booking/initializePayment',\n  async (\n    { bookingId, amount, orderName }: { bookingId: string; amount: number; orderName: string },\n    { rejectWithValue }\n  ) => {\n    try {\n      return await bookingApi.initializePayment({\n        bookingId,\n        amount,\n        orderName,\n      })\n    } catch (error: any) {\n      return rejectWithValue(error.message || '결제 초기화에 실패했습니다')\n    }\n  }\n)\n\n/**\n * 예약 취소 비동기 액션\n */\nexport const cancelBooking = createAsyncThunk(\n  'booking/cancel',\n  async ({ bookingId, reason }: { bookingId: string; reason?: string }, { rejectWithValue }) => {\n    try {\n      await bookingApi.cancelBooking(bookingId, reason)\n      return bookingId\n    } catch (error: any) {\n      return rejectWithValue(error.message || '예약 취소에 실패했습니다')\n    }\n  }\n)\n\n/**\n * 예약 슬라이스\n */\nconst bookingSlice = createSlice({\n  name: 'booking',\n  initialState,\n  reducers: {\n    /**\n     * 예약 선택\n     */\n    selectBooking: (state, action: PayloadAction<string>) => {\n      state.selectedBookingId = action.payload\n    },\n\n    /**\n     * 예약 선택 해제\n     */\n    clearSelectedBooking: (state) => {\n      state.selectedBookingId = null\n    },\n\n    /**\n     * 필터 업데이트\n     */\n    updateFilters: (state, action: PayloadAction<Partial<BookingFilters>>) => {\n      state.filters = { ...state.filters, ...action.payload }\n    },\n\n    /**\n     * 필터 초기화\n     */\n    resetFilters: (state) => {\n      state.filters = { status: 'all' }\n    },\n\n    /**\n     * 에러 초기화\n     */\n    clearError: (state) => {\n      state.error = null\n    },\n\n    // ===== 폼 관련 액션 =====\n\n    /**\n     * 반려동물 선택/해제 토글\n     */\n    togglePet: (state, action: PayloadAction<Pet>) => {\n      const pet = action.payload\n      const existingIndex = state.formData.petServices.findIndex((ps) => ps.petId === pet.id)\n\n      if (existingIndex >= 0) {\n        // 선택 해제\n        state.formData.petServices.splice(existingIndex, 1)\n      } else {\n        // 선택 (빈 서비스와 옵션 배열로 초기화)\n        state.formData.petServices.push({\n          petId: pet.id,\n          services: [],\n          options: [],\n        })\n      }\n    },\n\n    /**\n     * 반려동물의 서비스 변경\n     */\n    updateServices: (state, action: PayloadAction<{ petId: string; services: ServiceData[] }>) => {\n      const { petId, services } = action.payload\n      const petService = state.formData.petServices.find((ps) => ps.petId === petId)\n      if (petService) {\n        petService.services = services\n      }\n    },\n\n    /**\n     * 반려동물의 옵션 변경\n     */\n    updateOptions: (state, action: PayloadAction<{ petId: string; options: ServiceOption[] }>) => {\n      const { petId, options } = action.payload\n      const petService = state.formData.petServices.find((ps) => ps.petId === petId)\n      if (petService) {\n        petService.options = options\n      }\n    },\n\n    /**\n     * 주소 선택\n     */\n    updateAddress: (state, action: PayloadAction<string>) => {\n      state.formData.addressId = action.payload\n    },\n\n    /**\n     * 날짜 선택 (시간과 미용사 초기화)\n     */\n    updateDate: (state, action: PayloadAction<string>) => {\n      state.formData.date = action.payload\n      state.formData.timeSlot = ''\n      state.formData.groomerId = ''\n    },\n\n    /**\n     * 미용사 선택 (시간 초기화)\n     */\n    updateGroomer: (state, action: PayloadAction<string>) => {\n      state.formData.groomerId = action.payload\n      state.formData.timeSlot = ''\n    },\n\n    /**\n     * 시간대 선택\n     */\n    updateTimeSlot: (state, action: PayloadAction<string>) => {\n      state.formData.timeSlot = action.payload\n    },\n\n    /**\n     * 특별 요청사항 변경\n     */\n    updateSpecialRequests: (state, action: PayloadAction<string>) => {\n      state.formData.specialRequests = action.payload\n    },\n\n    /**\n     * 폼 초기화\n     */\n    resetForm: (state) => {\n      state.formData = initialBookingForm\n      state.currentStep = 1\n      state.paymentId = null\n      state.currentGroomerPage = 1\n    },\n\n    // ===== 단계 관련 액션 =====\n\n    /**\n     * 다음 단계로 이동\n     */\n    nextStep: (state) => {\n      if (state.currentStep < 4) {\n        state.currentStep = (state.currentStep + 1) as BookingStep\n      }\n    },\n\n    /**\n     * 이전 단계로 이동\n     */\n    prevStep: (state) => {\n      if (state.currentStep > 1) {\n        state.currentStep = (state.currentStep - 1) as BookingStep\n      }\n    },\n\n    /**\n     * 특정 단계로 이동\n     */\n    goToStep: (state, action: PayloadAction<BookingStep>) => {\n      state.currentStep = action.payload\n    },\n\n    // ===== 기타 액션 =====\n\n    /**\n     * 미용사 페이지 업데이트\n     */\n    updateGroomerPage: (state, action: PayloadAction<number>) => {\n      state.currentGroomerPage = action.payload\n    },\n\n    /**\n     * 결제 ID 설정\n     */\n    setPaymentId: (state, action: PayloadAction<string>) => {\n      state.paymentId = action.payload\n    },\n  },\n  extraReducers: (builder) => {\n    // 예약 초기화 처리\n    builder\n      .addCase(initializeBooking.pending, (state) => {\n        state.isCreating = true\n        state.error = null\n      })\n      .addCase(initializeBooking.fulfilled, (state, action) => {\n        state.isCreating = false\n        state.selectedBookingId = action.payload.bookingId\n      })\n      .addCase(initializeBooking.rejected, (state, action) => {\n        state.isCreating = false\n        state.error = action.payload as string\n      })\n\n    // 결제 초기화 처리\n    builder\n      .addCase(initializePayment.pending, (state) => {\n        state.isInitializingPayment = true\n        state.error = null\n      })\n      .addCase(initializePayment.fulfilled, (state, action) => {\n        state.isInitializingPayment = false\n        state.paymentId = action.payload.paymentId\n      })\n      .addCase(initializePayment.rejected, (state, action) => {\n        state.isInitializingPayment = false\n        state.error = action.payload as string\n      })\n\n    // 예약 취소 처리\n    builder\n      .addCase(cancelBooking.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(cancelBooking.fulfilled, (state) => {\n        state.isLoading = false\n        // 취소된 예약이 현재 선택된 예약이면 선택 해제\n        state.selectedBookingId = null\n      })\n      .addCase(cancelBooking.rejected, (state, action) => {\n        state.isLoading = false\n        state.error = action.payload as string\n      })\n  },\n})\n\n// 액션 내보내기\nexport const {\n  selectBooking,\n  togglePet,\n  updateServices,\n  updateOptions,\n  updateAddress,\n  updateDate,\n  updateGroomer,\n  updateTimeSlot,\n  updateSpecialRequests,\n  resetForm,\n  nextStep,\n  prevStep,\n  goToStep,\n  updateGroomerPage,\n  setPaymentId,\n} = bookingSlice.actions\n\n// 리듀서 내보내기 (기본 export)\nexport default bookingSlice.reducer\n\n/**\n * 셀렉터\n * Note: Selectors have been removed as they were unused. If needed in the future,\n * consider using createSelector from @reduxjs/toolkit for memoization.\n */\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAED;AAEA;AACA;;;;AA0CA;;CAEC,GACD,MAAM,eAA6B;IACjC,mBAAmB;IACnB,SAAS;QACP,QAAQ;IACV;IACA,WAAW;IACX,OAAO;IACP,YAAY;IACZ,uBAAuB;IACvB,UAAU,qLAAkB;IAC5B,aAAa;IACb,WAAW;IACX,oBAAoB;AACtB;AAOO,MAAM,oBAAoB,IAAA,+MAAgB,EAC/C,sBACA,OAAO,SAAmC,EAAE,eAAe,EAAE;IAC3D,IAAI;QACF,OAAO,MAAM,iKAAU,CAAC,iBAAiB,CAAC;IAC5C,EAAE,OAAO,OAAY;QACnB,OAAO,gBAAgB,MAAM,OAAO,IAAI;IAC1C;AACF;AAMK,MAAM,oBAAoB,IAAA,+MAAgB,EAC/C,6BACA,OACE,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,EAA4D,EAC1F,EAAE,eAAe,EAAE;IAEnB,IAAI;QACF,OAAO,MAAM,iKAAU,CAAC,iBAAiB,CAAC;YACxC;YACA;YACA;QACF;IACF,EAAE,OAAO,OAAY;QACnB,OAAO,gBAAgB,MAAM,OAAO,IAAI;IAC1C;AACF;AAMK,MAAM,gBAAgB,IAAA,+MAAgB,EAC3C,kBACA,OAAO,EAAE,SAAS,EAAE,MAAM,EAA0C,EAAE,EAAE,eAAe,EAAE;IACvF,IAAI;QACF,MAAM,iKAAU,CAAC,aAAa,CAAC,WAAW;QAC1C,OAAO;IACT,EAAE,OAAO,OAAY;QACnB,OAAO,gBAAgB,MAAM,OAAO,IAAI;IAC1C;AACF;AAGF;;CAEC,GACD,MAAM,eAAe,IAAA,0MAAW,EAAC;IAC/B,MAAM;IACN;IACA,UAAU;QACR;;KAEC,GACD,eAAe,CAAC,OAAO;YACrB,MAAM,iBAAiB,GAAG,OAAO,OAAO;QAC1C;QAEA;;KAEC,GACD,sBAAsB,CAAC;YACrB,MAAM,iBAAiB,GAAG;QAC5B;QAEA;;KAEC,GACD,eAAe,CAAC,OAAO;YACrB,MAAM,OAAO,GAAG;gBAAE,GAAG,MAAM,OAAO;gBAAE,GAAG,OAAO,OAAO;YAAC;QACxD;QAEA;;KAEC,GACD,cAAc,CAAC;YACb,MAAM,OAAO,GAAG;gBAAE,QAAQ;YAAM;QAClC;QAEA;;KAEC,GACD,YAAY,CAAC;YACX,MAAM,KAAK,GAAG;QAChB;QAEA,sBAAsB;QAEtB;;KAEC,GACD,WAAW,CAAC,OAAO;YACjB,MAAM,MAAM,OAAO,OAAO;YAC1B,MAAM,gBAAgB,MAAM,QAAQ,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,KAAO,GAAG,KAAK,KAAK,IAAI,EAAE;YAEtF,IAAI,iBAAiB,GAAG;gBACtB,QAAQ;gBACR,MAAM,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe;YACnD,OAAO;gBACL,yBAAyB;gBACzB,MAAM,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC;oBAC9B,OAAO,IAAI,EAAE;oBACb,UAAU,EAAE;oBACZ,SAAS,EAAE;gBACb;YACF;QACF;QAEA;;KAEC,GACD,gBAAgB,CAAC,OAAO;YACtB,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,OAAO;YAC1C,MAAM,aAAa,MAAM,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,KAAO,GAAG,KAAK,KAAK;YACxE,IAAI,YAAY;gBACd,WAAW,QAAQ,GAAG;YACxB;QACF;QAEA;;KAEC,GACD,eAAe,CAAC,OAAO;YACrB,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,OAAO,OAAO;YACzC,MAAM,aAAa,MAAM,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,KAAO,GAAG,KAAK,KAAK;YACxE,IAAI,YAAY;gBACd,WAAW,OAAO,GAAG;YACvB;QACF;QAEA;;KAEC,GACD,eAAe,CAAC,OAAO;YACrB,MAAM,QAAQ,CAAC,SAAS,GAAG,OAAO,OAAO;QAC3C;QAEA;;KAEC,GACD,YAAY,CAAC,OAAO;YAClB,MAAM,QAAQ,CAAC,IAAI,GAAG,OAAO,OAAO;YACpC,MAAM,QAAQ,CAAC,QAAQ,GAAG;YAC1B,MAAM,QAAQ,CAAC,SAAS,GAAG;QAC7B;QAEA;;KAEC,GACD,eAAe,CAAC,OAAO;YACrB,MAAM,QAAQ,CAAC,SAAS,GAAG,OAAO,OAAO;YACzC,MAAM,QAAQ,CAAC,QAAQ,GAAG;QAC5B;QAEA;;KAEC,GACD,gBAAgB,CAAC,OAAO;YACtB,MAAM,QAAQ,CAAC,QAAQ,GAAG,OAAO,OAAO;QAC1C;QAEA;;KAEC,GACD,uBAAuB,CAAC,OAAO;YAC7B,MAAM,QAAQ,CAAC,eAAe,GAAG,OAAO,OAAO;QACjD;QAEA;;KAEC,GACD,WAAW,CAAC;YACV,MAAM,QAAQ,GAAG,qLAAkB;YACnC,MAAM,WAAW,GAAG;YACpB,MAAM,SAAS,GAAG;YAClB,MAAM,kBAAkB,GAAG;QAC7B;QAEA,uBAAuB;QAEvB;;KAEC,GACD,UAAU,CAAC;YACT,IAAI,MAAM,WAAW,GAAG,GAAG;gBACzB,MAAM,WAAW,GAAI,MAAM,WAAW,GAAG;YAC3C;QACF;QAEA;;KAEC,GACD,UAAU,CAAC;YACT,IAAI,MAAM,WAAW,GAAG,GAAG;gBACzB,MAAM,WAAW,GAAI,MAAM,WAAW,GAAG;YAC3C;QACF;QAEA;;KAEC,GACD,UAAU,CAAC,OAAO;YAChB,MAAM,WAAW,GAAG,OAAO,OAAO;QACpC;QAEA,oBAAoB;QAEpB;;KAEC,GACD,mBAAmB,CAAC,OAAO;YACzB,MAAM,kBAAkB,GAAG,OAAO,OAAO;QAC3C;QAEA;;KAEC,GACD,cAAc,CAAC,OAAO;YACpB,MAAM,SAAS,GAAG,OAAO,OAAO;QAClC;IACF;IACA,eAAe,CAAC;QACd,YAAY;QACZ,QACG,OAAO,CAAC,kBAAkB,OAAO,EAAE,CAAC;YACnC,MAAM,UAAU,GAAG;YACnB,MAAM,KAAK,GAAG;QAChB,GACC,OAAO,CAAC,kBAAkB,SAAS,EAAE,CAAC,OAAO;YAC5C,MAAM,UAAU,GAAG;YACnB,MAAM,iBAAiB,GAAG,OAAO,OAAO,CAAC,SAAS;QACpD,GACC,OAAO,CAAC,kBAAkB,QAAQ,EAAE,CAAC,OAAO;YAC3C,MAAM,UAAU,GAAG;YACnB,MAAM,KAAK,GAAG,OAAO,OAAO;QAC9B;QAEF,YAAY;QACZ,QACG,OAAO,CAAC,kBAAkB,OAAO,EAAE,CAAC;YACnC,MAAM,qBAAqB,GAAG;YAC9B,MAAM,KAAK,GAAG;QAChB,GACC,OAAO,CAAC,kBAAkB,SAAS,EAAE,CAAC,OAAO;YAC5C,MAAM,qBAAqB,GAAG;YAC9B,MAAM,SAAS,GAAG,OAAO,OAAO,CAAC,SAAS;QAC5C,GACC,OAAO,CAAC,kBAAkB,QAAQ,EAAE,CAAC,OAAO;YAC3C,MAAM,qBAAqB,GAAG;YAC9B,MAAM,KAAK,GAAG,OAAO,OAAO;QAC9B;QAEF,WAAW;QACX,QACG,OAAO,CAAC,cAAc,OAAO,EAAE,CAAC;YAC/B,MAAM,SAAS,GAAG;YAClB,MAAM,KAAK,GAAG;QAChB,GACC,OAAO,CAAC,cAAc,SAAS,EAAE,CAAC;YACjC,MAAM,SAAS,GAAG;YAClB,4BAA4B;YAC5B,MAAM,iBAAiB,GAAG;QAC5B,GACC,OAAO,CAAC,cAAc,QAAQ,EAAE,CAAC,OAAO;YACvC,MAAM,SAAS,GAAG;YAClB,MAAM,KAAK,GAAG,OAAO,OAAO;QAC9B;IACJ;AACF;AAGO,MAAM,EACX,aAAa,EACb,SAAS,EACT,cAAc,EACd,aAAa,EACb,aAAa,EACb,UAAU,EACV,aAAa,EACb,cAAc,EACd,qBAAqB,EACrB,SAAS,EACT,QAAQ,EACR,QAAQ,EACR,QAAQ,EACR,iBAAiB,EACjB,YAAY,EACb,GAAG,aAAa,OAAO;uCAGT,aAAa,OAAO,CAEnC;;;;CAIC","debugId":null}},
    {"offset": {"line": 967, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/features/booking/api/booking-query-api.ts"],"sourcesContent":["/**\n * RTK Query API for Booking Data\n *\n * Replaces TanStack Query with RTK Query for booking-related data fetching\n * Imports types from API route files (single source of truth)\n */\n\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\nimport type { Pet } from '@/hooks/usePets'\nimport type { Address } from '@/app/api/customer/addresses/route'\nimport type { AvailabilityResponse } from '@/app/api/bookings/availability/route'\n\n/**\n * Re-export types for convenience\n */\nexport type { Address, AvailabilityResponse }\n\n/**\n * Availability query parameters\n */\nexport interface AvailabilityQueryParams {\n  date?: string\n  addressId?: string\n  page?: number\n  limit?: number\n}\n\n/**\n * Booking Query API\n */\nexport const bookingQueryApi = createApi({\n  reducerPath: 'bookingQueryApi',\n  baseQuery: fetchBaseQuery({ baseUrl: '/api' }),\n  tagTypes: ['Pets', 'Addresses', 'Availability'],\n  endpoints: (builder) => ({\n    /**\n     * Get customer pets\n     *\n     * Note: Dates are kept as ISO strings for Redux serializability.\n     * Components should parse them to Date objects when needed.\n     */\n    getPets: builder.query<Pet[], void>({\n      query: () => '/customer/pets',\n      providesTags: ['Pets'],\n    }),\n\n    /**\n     * Get customer addresses\n     */\n    getAddresses: builder.query<Address[], void>({\n      query: () => '/customer/addresses',\n      providesTags: ['Addresses'],\n    }),\n\n    /**\n     * Get availability (groomers and time slots)\n     */\n    getAvailability: builder.query<AvailabilityResponse, AvailabilityQueryParams>({\n      query: ({ date, addressId, page = 1, limit = 6 }) => {\n        const params = new URLSearchParams()\n        if (date) params.append('date', date)\n        if (addressId) params.append('addressId', addressId)\n        params.append('page', page.toString())\n        params.append('limit', limit.toString())\n\n        return `/bookings/availability?${params.toString()}`\n      },\n      providesTags: ['Availability'],\n      keepUnusedDataFor: 300, // 5 minutes cache\n    }),\n  }),\n})\n\n/**\n * Export hooks for usage in components\n */\nexport const { useGetPetsQuery, useGetAddressesQuery, useGetAvailabilityQuery } = bookingQueryApi\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;;;;;AAED;AAAA;;AAuBO,MAAM,kBAAkB,IAAA,+NAAS,EAAC;IACvC,aAAa;IACb,WAAW,IAAA,kMAAc,EAAC;QAAE,SAAS;IAAO;IAC5C,UAAU;QAAC;QAAQ;QAAa;KAAe;IAC/C,WAAW,CAAC,UAAY,CAAC;YACvB;;;;;KAKC,GACD,SAAS,QAAQ,KAAK,CAAc;gBAClC,OAAO,IAAM;gBACb,cAAc;oBAAC;iBAAO;YACxB;YAEA;;KAEC,GACD,cAAc,QAAQ,KAAK,CAAkB;gBAC3C,OAAO,IAAM;gBACb,cAAc;oBAAC;iBAAY;YAC7B;YAEA;;KAEC,GACD,iBAAiB,QAAQ,KAAK,CAAgD;gBAC5E,OAAO,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,CAAC,EAAE,QAAQ,CAAC,EAAE;oBAC9C,MAAM,SAAS,IAAI;oBACnB,IAAI,MAAM,OAAO,MAAM,CAAC,QAAQ;oBAChC,IAAI,WAAW,OAAO,MAAM,CAAC,aAAa;oBAC1C,OAAO,MAAM,CAAC,QAAQ,KAAK,QAAQ;oBACnC,OAAO,MAAM,CAAC,SAAS,MAAM,QAAQ;oBAErC,OAAO,CAAC,uBAAuB,EAAE,OAAO,QAAQ,IAAI;gBACtD;gBACA,cAAc;oBAAC;iBAAe;gBAC9B,mBAAmB;YACrB;QACF,CAAC;AACH;AAKO,MAAM,EAAE,eAAe,EAAE,oBAAoB,EAAE,uBAAuB,EAAE,GAAG","debugId":null}},
    {"offset": {"line": 1038, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/features/admin/api/dashboard-api.ts"],"sourcesContent":["/**\n * Admin Dashboard API Adapter Layer\n *\n * This module implements the BFF (Backend for Frontend) pattern, transforming\n * raw API responses into client-optimized data structures for the admin dashboard.\n *\n * Key responsibilities:\n * - Fetch data from API routes\n * - Transform API responses to UI-friendly formats\n * - Perform calculations and aggregations\n * - Apply formatting for display\n * - Handle errors gracefully\n *\n * Architecture: API Route → API Adapter (this layer) → React Hook → UI Components\n *\n * @module features/admin/api/dashboard-api\n */\n\nimport type {\n  ActivityItem,\n  MonthlyRevenue,\n  OverviewStats,\n  ServiceStats,\n  UserGrowthData,\n} from '../types/dashboard.types'\n\n// ============================================================================\n// API Response Types (from existing route)\n// ============================================================================\n\n/**\n * API response from /api/admin/dashboard/overview\n * This matches the existing API route structure.\n */\ninterface ApiDashboardOverviewResponse {\n  metrics: {\n    totalBookings: number\n    completedBookings: number\n    pendingBookings: number\n    cancelledBookings: number\n    totalRevenue: number\n    totalCustomers: number\n    totalGroomers: number\n    completionRate: number\n    avgBookingValue: number\n    averageRating: number\n    totalReviews: number\n  }\n  previousMetrics: {\n    totalBookings: number\n    completedBookings: number\n    pendingBookings: number\n    cancelledBookings: number\n    totalRevenue: number\n    totalCustomers: number\n    totalGroomers: number\n    completionRate: number\n    avgBookingValue: number\n    averageRating: number\n    totalReviews: number\n  }\n  recentBookings: Array<{\n    id: string\n    bookingNumber: string\n    customerName: string | null\n    groomerName: string\n    serviceDate: string // ISO date string after JSON serialization\n    totalPrice: number\n    status: string\n    createdAt: string // ISO date string after JSON serialization\n  }>\n  topServices: Array<{\n    serviceId: string\n    name: string\n    description: string | null\n    bookingCount: number\n    totalRevenue: number\n  }>\n  userGrowth: Array<{\n    period: string\n    newUsers: number\n    cumulativeUsers: number\n  }>\n  monthlyRevenue: Array<{\n    month: string // YYYY-MM format\n    revenue: number // Total revenue in cents\n    bookingCount: number // Number of bookings\n  }>\n  range: 'week' | 'month' | 'year'\n  startDate: string // ISO date string\n  endDate: string // ISO date string\n  previousStartDate: string\n  previousEndDate: string\n}\n\n// ============================================================================\n// Public API Functions\n// ============================================================================\n\n/**\n * Fetch and transform dashboard overview data from API.\n *\n * This is the primary entry point for dashboard data fetching.\n * It performs the following transformations:\n * 1. Fetches raw data from API route\n * 2. Calculates derived metrics (growth, active groomers, etc.)\n * 3. Transforms booking data to activity items\n * 4. Aggregates service statistics\n * 5. Generates time-series data for charts\n *\n * @param timeRange - Time range filter ('week', 'month', 'year')\n * @returns Transformed OverviewStats optimized for UI rendering\n * @throws Error if API request fails or data is invalid\n *\n * @example\n * ```typescript\n * const stats = await getDashboardOverview('month');\n * console.log(stats.totalRevenue); // UI-ready data\n * ```\n */\nexport async function getDashboardOverview(\n  timeRange: 'week' | 'month' | 'year' = 'month'\n): Promise<OverviewStats> {\n  try {\n    // 1. Fetch from API route\n    const response = await fetch(`/api/admin/dashboard/overview?range=${timeRange}`)\n\n    if (!response.ok) {\n      throw new Error(`API error: ${response.status} ${response.statusText}`)\n    }\n\n    const apiData: ApiDashboardOverviewResponse = await response.json()\n\n    // 2. Calculate derived metrics\n    const bookingGrowth = calculateMonthlyGrowth(apiData.metrics, apiData.previousMetrics)\n    const revenueGrowth = calculateRevenueGrowth(apiData.metrics, apiData.previousMetrics)\n    const activeGroomers = calculateActiveGroomers(apiData)\n    const completedBookingsToday = filterTodayBookings(apiData)\n\n    // 3. Transform data structures\n    const recentActivity = transformToActivityItems(apiData.recentBookings)\n    const topServices = transformTopServices(apiData.topServices)\n    const monthlyRevenue = transformMonthlyRevenue(apiData.monthlyRevenue)\n    const userGrowth = transformUserGrowth(apiData.userGrowth)\n\n    // 4. Construct UI-optimized response\n    const overviewStats: any = {\n      // Core metrics from API\n      totalBookings: apiData.metrics.totalBookings,\n      totalRevenue: apiData.metrics.totalRevenue,\n      totalCustomers: apiData.metrics.totalCustomers,\n      activeServices: topServices.length, // Number of services with bookings\n      totalUsers: apiData.metrics.totalCustomers, // Alias for compatibility\n      activeGroomers: activeGroomers,\n      completedBookingsToday: completedBookingsToday,\n      pendingBookings: apiData.metrics.pendingBookings,\n      averageRating: apiData.metrics.averageRating,\n\n      // Calculated metrics (now using real historical data)\n      bookingGrowth: bookingGrowth,\n      revenueGrowth: revenueGrowth,\n      monthlyGrowth: bookingGrowth, // Alias for compatibility\n      averageBookingValue: apiData.metrics.avgBookingValue,\n\n      // Period information (keep as ISO strings for Redux serialization)\n      periodLabel: getPeriodLabel(timeRange),\n      period: {\n        startDate: apiData.startDate, // Keep as ISO string\n        endDate: apiData.endDate, // Keep as ISO string\n        label: getPeriodLabel(timeRange),\n      },\n\n      // Transformed data for UI components\n      recentActivity: recentActivity,\n      topServices: topServices,\n      monthlyRevenue: monthlyRevenue,\n      userGrowth: userGrowth,\n\n      // State flags\n      isLoading: false,\n      error: null,\n    }\n\n    return overviewStats\n  } catch (error) {\n    console.error('Failed to fetch dashboard overview:', error)\n    throw error\n  }\n}\n\n// ============================================================================\n// Calculation Helpers\n// ============================================================================\n// These helper functions are exported for reuse in dashboard-api-slice.ts\n\n/**\n * Calculate month-over-month booking growth percentage.\n *\n * Compares current period bookings to previous period.\n * Returns percentage change (-100 to +Infinity).\n *\n * @param currentMetrics - Current period metrics\n * @param previousMetrics - Previous period metrics\n * @returns Growth percentage (1 decimal place)\n */\nexport function calculateMonthlyGrowth(\n  currentMetrics: ApiDashboardOverviewResponse['metrics'],\n  previousMetrics: ApiDashboardOverviewResponse['previousMetrics']\n): number {\n  if (previousMetrics.totalBookings === 0) return 0\n\n  const growth =\n    ((currentMetrics.totalBookings - previousMetrics.totalBookings) /\n      previousMetrics.totalBookings) *\n    100\n  return Math.round(growth * 10) / 10 // Round to 1 decimal place\n}\n\n/**\n * Calculate month-over-month revenue growth percentage.\n *\n * Compares current period revenue to previous period.\n * Returns percentage change (-100 to +Infinity).\n *\n * @param currentMetrics - Current period metrics\n * @param previousMetrics - Previous period metrics\n * @returns Growth percentage (1 decimal place)\n */\nexport function calculateRevenueGrowth(\n  currentMetrics: ApiDashboardOverviewResponse['metrics'],\n  previousMetrics: ApiDashboardOverviewResponse['previousMetrics']\n): number {\n  if (previousMetrics.totalRevenue === 0) return 0\n\n  const growth =\n    ((currentMetrics.totalRevenue - previousMetrics.totalRevenue) / previousMetrics.totalRevenue) *\n    100\n  return Math.round(growth * 10) / 10 // Round to 1 decimal place\n}\n\n/**\n * Calculate number of active groomers.\n *\n * Active groomers are those with bookings in the current period.\n * This is derived from the recentBookings data.\n *\n * @param data - API response data\n * @returns Count of active groomers\n */\nexport function calculateActiveGroomers(data: ApiDashboardOverviewResponse): number {\n  // Count unique groomers from recent bookings\n  const uniqueGroomers = new Set(\n    data.recentBookings.map((booking) => booking.groomerName).filter((name) => name !== '미배정')\n  )\n\n  return uniqueGroomers.size\n}\n\n/**\n * Filter bookings completed today.\n *\n * Counts bookings with status 'SERVICE_COMPLETED' and serviceDate within today.\n *\n * @param data - API response data\n * @returns Count of completed bookings today\n */\nexport function filterTodayBookings(data: ApiDashboardOverviewResponse): number {\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n\n  const tomorrow = new Date(today)\n  tomorrow.setDate(tomorrow.getDate() + 1)\n\n  const completedToday = data.recentBookings.filter((booking) => {\n    if (booking.status !== 'SERVICE_COMPLETED') return false\n\n    const serviceDate = new Date(booking.serviceDate)\n    return serviceDate >= today && serviceDate < tomorrow\n  })\n\n  return completedToday.length\n}\n\n/**\n * Get human-readable label for time period.\n *\n * @param timeRange - Time range filter\n * @returns Korean label for the period\n */\nexport function getPeriodLabel(timeRange: 'week' | 'month' | 'year'): string {\n  switch (timeRange) {\n    case 'week':\n      return '최근 1주'\n    case 'month':\n      return '이번 달'\n    case 'year':\n      return '올해'\n    default:\n      return '이번 달'\n  }\n}\n\n// ============================================================================\n// Data Transformation Helpers\n// ============================================================================\n\n/**\n * Transform bookings to activity feed items.\n *\n * Converts raw booking data to ActivityItem discriminated union.\n * Maps booking status to activity status (success/pending/error).\n * Sorts by timestamp (newest first).\n * Limits to 20 most recent items.\n *\n * @param bookings - Raw booking data from API\n * @returns Array of activity items for UI rendering\n */\nexport function transformToActivityItems(\n  bookings: ApiDashboardOverviewResponse['recentBookings']\n): ActivityItem[] {\n  const activities: ActivityItem[] = bookings.map((booking) => {\n    // Map booking status to activity status\n    const activityStatus = mapBookingStatusToActivityStatus(booking.status)\n\n    return {\n      type: 'booking' as const,\n      id: booking.id,\n      customerName: booking.customerName || '알 수 없음',\n      serviceName: `예약 #${booking.bookingNumber}`,\n      status: booking.status as any, // BookingStatus type\n      timestamp: booking.createdAt, // Keep as ISO string for Redux serialization\n      amount: booking.totalPrice,\n    }\n  })\n\n  // Sort by timestamp (newest first) and limit to 20 items\n  // ISO strings can be compared directly for chronological sorting\n  return activities.sort((a, b) => b.timestamp.localeCompare(a.timestamp)).slice(0, 20)\n}\n\n/**\n * Map booking status to activity status.\n *\n * @param bookingStatus - Booking status from API\n * @returns Activity status (completed/pending/failed)\n */\nfunction mapBookingStatusToActivityStatus(\n  bookingStatus: string\n): 'completed' | 'pending' | 'failed' {\n  if (bookingStatus === 'SERVICE_COMPLETED') return 'completed'\n  if (bookingStatus === 'SERVICE_CANCELLED') return 'failed'\n  return 'pending'\n}\n\n/**\n * Transform API top services data to UI-friendly ServiceStats format.\n *\n * Converts raw service statistics from API to enriched format for display.\n * Adds ranking and placeholder values for fields not yet implemented.\n *\n * @param apiTopServices - Top services data from API\n * @returns Array of service statistics for UI rendering\n */\nexport function transformTopServices(\n  apiTopServices: ApiDashboardOverviewResponse['topServices']\n): ServiceStats[] {\n  return apiTopServices.map((service, index) => ({\n    serviceId: service.serviceId,\n    name: service.name,\n    bookings: service.bookingCount,\n    revenue: service.totalRevenue,\n    rating: 4.5, // TODO: Add service-level rating calculation in API\n    satisfactionRate: 95, // TODO: Calculate from review data\n    rank: index + 1,\n    growth: 0, // TODO: Requires previous period service comparison\n  }))\n}\n\n/**\n * Transform API monthly revenue data to UI-friendly format.\n *\n * Converts aggregated monthly revenue from the API to the chart-ready format\n * with percentage change calculations.\n *\n * @param apiMonthlyRevenue - Monthly revenue data from API\n * @returns Array of monthly revenue data points for charting\n */\nexport function transformMonthlyRevenue(\n  apiMonthlyRevenue: Array<{ month: string; revenue: number; bookingCount: number }>\n): MonthlyRevenue[] {\n  return apiMonthlyRevenue.map((data, index) => {\n    // Get previous month data for comparison\n    const prevData = index > 0 ? apiMonthlyRevenue[index - 1] : { revenue: 0 }\n\n    // Calculate percentage change\n    const percentageChange =\n      prevData.revenue > 0 ? ((data.revenue - prevData.revenue) / prevData.revenue) * 100 : 0\n\n    return {\n      month: data.month,\n      value: data.revenue,\n      previousValue: prevData.revenue,\n      percentageChange: Math.round(percentageChange * 10) / 10,\n    }\n  })\n}\n\n/**\n * Transform API user growth data to UI-friendly format.\n *\n * Converts period-based user registration data from API to chart-ready format.\n *\n * @param apiUserGrowth - User growth data from API\n * @returns Array of user growth data points for charting\n */\nexport function transformUserGrowth(\n  apiUserGrowth: ApiDashboardOverviewResponse['userGrowth']\n): UserGrowthData[] {\n  return apiUserGrowth.map((data) => ({\n    month: data.period,\n    newUsers: data.newUsers,\n    total: data.cumulativeUsers,\n  }))\n}\n\n// ============================================================================\n// Exports\n// ============================================================================\n\nexport type { ApiDashboardOverviewResponse }\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1241, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/features/admin/state/dashboard-api-slice.ts"],"sourcesContent":["/**\n * RTK Query API for Admin Dashboard Data\n *\n * Replaces TanStack Query with RTK Query for admin dashboard data fetching.\n * Imports types from API route files (single source of truth).\n *\n * @module features/admin/api/dashboard-api-slice\n */\n\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\nimport type { DashboardOverviewResponse } from '@/app/api/admin/dashboard/overview/route'\nimport type { OverviewStats } from '../types/dashboard.types'\nimport {\n  type ApiDashboardOverviewResponse,\n  calculateActiveGroomers,\n  calculateMonthlyGrowth,\n  calculateRevenueGrowth,\n  filterTodayBookings,\n  transformMonthlyRevenue,\n  getPeriodLabel,\n  transformToActivityItems,\n  transformTopServices,\n  transformUserGrowth,\n} from '../api/dashboard-api'\n\n/**\n * Time range type for dashboard queries\n */\nexport type TimeRange = 'week' | 'month' | 'year'\n\n/**\n * Admin Dashboard API\n *\n * RTK Query API definition for admin dashboard endpoints.\n * Uses the existing API routes and transformation logic.\n *\n * Key features:\n * - Type-safe API calls with DashboardOverviewResponse from route\n * - Automatic caching with 5-minute staleness\n * - Transformation to client-optimized OverviewStats\n * - Redux DevTools integration for debugging\n *\n * @example\n * ```tsx\n * import { useGetDashboardOverviewQuery } from '@/features/admin/api/dashboard-api-slice'\n *\n * function DashboardPage() {\n *   const { data, isLoading } = useGetDashboardOverviewQuery('month')\n *   // data is typed as OverviewStats\n * }\n * ```\n */\nexport const dashboardApi = createApi({\n  reducerPath: 'dashboardApi',\n  baseQuery: fetchBaseQuery({ baseUrl: '/api' }),\n  tagTypes: ['DashboardOverview'],\n  endpoints: (builder) => ({\n    /**\n     * Get dashboard overview statistics\n     *\n     * Fetches comprehensive dashboard metrics and transforms them\n     * from the API response format to the client-optimized format.\n     *\n     * Type flow:\n     * - Request: TimeRange ('week' | 'month' | 'year')\n     * - API Response: DashboardOverviewResponse (from route.ts)\n     * - Transformed Result: OverviewStats (client format)\n     *\n     * Caching strategy:\n     * - keepUnusedDataFor: 600 seconds (10 minutes) - same as TanStack Query gcTime\n     * - Cached data persists for 10 minutes after last use\n     * - Provides fast navigation within admin section\n     *\n     * @param timeRange - Time range filter ('week' | 'month' | 'year')\n     * @returns OverviewStats with all dashboard metrics\n     */\n    getDashboardOverview: builder.query<OverviewStats, TimeRange>({\n      query: (timeRange) => `/admin/dashboard/overview?range=${timeRange}`,\n\n      /**\n       * Transform API response to client format\n       *\n       * Converts DashboardOverviewResponse from the API route\n       * to OverviewStats that the UI components expect.\n       *\n       * Reuses all transformation logic from dashboard-api.ts:\n       * - calculateMonthlyGrowth, calculateActiveGroomers\n       * - transformToActivityItems, aggregateTopServices\n       * - generateMonthlyRevenue, generateUserGrowth\n       */\n      transformResponse: (response: DashboardOverviewResponse): OverviewStats => {\n        const {\n          metrics,\n          previousMetrics,\n          recentBookings,\n          topServices: apiTopServices,\n          userGrowth: apiUserGrowth,\n          monthlyRevenue: apiMonthlyRevenue,\n          range,\n          startDate,\n          endDate,\n        } = response\n\n        // Convert DashboardOverviewResponse to ApiDashboardOverviewResponse\n        // (Date → string conversion happens automatically via JSON serialization)\n        const apiData: ApiDashboardOverviewResponse = {\n          metrics,\n          previousMetrics,\n          recentBookings: recentBookings.map((booking) => ({\n            ...booking,\n            // Dates are already strings after JSON deserialization\n            serviceDate: booking.serviceDate as unknown as string,\n            createdAt: booking.createdAt as unknown as string,\n          })),\n          topServices: apiTopServices,\n          userGrowth: apiUserGrowth,\n          monthlyRevenue: apiMonthlyRevenue,\n          range,\n          startDate: startDate as unknown as string,\n          endDate: endDate as unknown as string,\n          previousStartDate: response.previousStartDate as unknown as string,\n          previousEndDate: response.previousEndDate as unknown as string,\n        }\n\n        // Calculate derived metrics using helper functions (now with real historical data)\n        const bookingGrowth = calculateMonthlyGrowth(apiData.metrics, apiData.previousMetrics)\n        const revenueGrowth = calculateRevenueGrowth(apiData.metrics, apiData.previousMetrics)\n        const activeGroomers = calculateActiveGroomers(apiData)\n        const completedBookingsToday = filterTodayBookings(apiData)\n\n        // Transform data structures using helper functions\n        const recentActivity = transformToActivityItems(apiData.recentBookings)\n        const topServices = transformTopServices(apiData.topServices)\n        const monthlyRevenue = transformMonthlyRevenue(apiData.monthlyRevenue)\n        const userGrowth = transformUserGrowth(apiData.userGrowth)\n\n        // Construct client-optimized response\n        const overviewStats: OverviewStats = {\n          // Core metrics from API\n          totalBookings: metrics.totalBookings,\n          totalRevenue: metrics.totalRevenue,\n          totalCustomers: metrics.totalCustomers,\n          activeServices: topServices.length,\n          totalUsers: metrics.totalCustomers,\n          activeGroomers,\n          completedBookingsToday,\n          pendingBookings: metrics.pendingBookings,\n          averageRating: metrics.averageRating,\n\n          // Calculated metrics (now using real historical data)\n          bookingGrowth,\n          revenueGrowth,\n          monthlyGrowth: bookingGrowth,\n          averageBookingValue: metrics.avgBookingValue,\n\n          // Period information (keep as ISO strings for Redux serialization)\n          periodLabel: getPeriodLabel(range),\n          period: {\n            startDate: startDate, // Keep as ISO string\n            endDate: endDate, // Keep as ISO string\n            label: getPeriodLabel(range),\n          },\n\n          // Transformed data for UI components\n          recentActivity,\n          topServices,\n          monthlyRevenue,\n          userGrowth,\n\n          // State flags\n          isLoading: false,\n          error: null,\n        }\n\n        return overviewStats\n      },\n\n      providesTags: ['DashboardOverview'],\n\n      /**\n       * Cache configuration\n       *\n       * Maps TanStack Query settings to RTK Query equivalents:\n       * - keepUnusedDataFor: 600 seconds (10 minutes) - equivalent to TanStack Query gcTime\n       *   Cached data persists for 10 minutes after last use\n       *\n       * Note: In RTK Query, refetch on focus and reconnect are handled by setupListeners\n       * configuration in the store setup, not at the endpoint level.\n       * See: configureStore setup with setupListeners for full TanStack Query compatibility.\n       *\n       * This ensures consistent cache behavior with the original TanStack Query implementation.\n       */\n      keepUnusedDataFor: 600, // 10 minutes - matches TanStack Query gcTime\n    }),\n  }),\n})\n\n/**\n * Export hooks for usage in components\n *\n * These are automatically generated by RTK Query based on the endpoints.\n */\nexport const { useGetDashboardOverviewQuery } = dashboardApi\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC;;;;;;AAED;AAAA;AAGA;;;AAwCO,MAAM,eAAe,IAAA,+NAAS,EAAC;IACpC,aAAa;IACb,WAAW,IAAA,kMAAc,EAAC;QAAE,SAAS;IAAO;IAC5C,UAAU;QAAC;KAAoB;IAC/B,WAAW,CAAC,UAAY,CAAC;YACvB;;;;;;;;;;;;;;;;;;KAkBC,GACD,sBAAsB,QAAQ,KAAK,CAA2B;gBAC5D,OAAO,CAAC,YAAc,CAAC,gCAAgC,EAAE,WAAW;gBAEpE;;;;;;;;;;OAUC,GACD,mBAAmB,CAAC;oBAClB,MAAM,EACJ,OAAO,EACP,eAAe,EACf,cAAc,EACd,aAAa,cAAc,EAC3B,YAAY,aAAa,EACzB,gBAAgB,iBAAiB,EACjC,KAAK,EACL,SAAS,EACT,OAAO,EACR,GAAG;oBAEJ,oEAAoE;oBACpE,0EAA0E;oBAC1E,MAAM,UAAwC;wBAC5C;wBACA;wBACA,gBAAgB,eAAe,GAAG,CAAC,CAAC,UAAY,CAAC;gCAC/C,GAAG,OAAO;gCACV,uDAAuD;gCACvD,aAAa,QAAQ,WAAW;gCAChC,WAAW,QAAQ,SAAS;4BAC9B,CAAC;wBACD,aAAa;wBACb,YAAY;wBACZ,gBAAgB;wBAChB;wBACA,WAAW;wBACX,SAAS;wBACT,mBAAmB,SAAS,iBAAiB;wBAC7C,iBAAiB,SAAS,eAAe;oBAC3C;oBAEA,mFAAmF;oBACnF,MAAM,gBAAgB,IAAA,6KAAsB,EAAC,QAAQ,OAAO,EAAE,QAAQ,eAAe;oBACrF,MAAM,gBAAgB,IAAA,6KAAsB,EAAC,QAAQ,OAAO,EAAE,QAAQ,eAAe;oBACrF,MAAM,iBAAiB,IAAA,8KAAuB,EAAC;oBAC/C,MAAM,yBAAyB,IAAA,0KAAmB,EAAC;oBAEnD,mDAAmD;oBACnD,MAAM,iBAAiB,IAAA,+KAAwB,EAAC,QAAQ,cAAc;oBACtE,MAAM,cAAc,IAAA,2KAAoB,EAAC,QAAQ,WAAW;oBAC5D,MAAM,iBAAiB,IAAA,8KAAuB,EAAC,QAAQ,cAAc;oBACrE,MAAM,aAAa,IAAA,0KAAmB,EAAC,QAAQ,UAAU;oBAEzD,sCAAsC;oBACtC,MAAM,gBAA+B;wBACnC,wBAAwB;wBACxB,eAAe,QAAQ,aAAa;wBACpC,cAAc,QAAQ,YAAY;wBAClC,gBAAgB,QAAQ,cAAc;wBACtC,gBAAgB,YAAY,MAAM;wBAClC,YAAY,QAAQ,cAAc;wBAClC;wBACA;wBACA,iBAAiB,QAAQ,eAAe;wBACxC,eAAe,QAAQ,aAAa;wBAEpC,sDAAsD;wBACtD;wBACA;wBACA,eAAe;wBACf,qBAAqB,QAAQ,eAAe;wBAE5C,mEAAmE;wBACnE,aAAa,IAAA,qKAAc,EAAC;wBAC5B,QAAQ;4BACN,WAAW;4BACX,SAAS;4BACT,OAAO,IAAA,qKAAc,EAAC;wBACxB;wBAEA,qCAAqC;wBACrC;wBACA;wBACA;wBACA;wBAEA,cAAc;wBACd,WAAW;wBACX,OAAO;oBACT;oBAEA,OAAO;gBACT;gBAEA,cAAc;oBAAC;iBAAoB;gBAEnC;;;;;;;;;;;;OAYC,GACD,mBAAmB;YACrB;QACF,CAAC;AACH;AAOO,MAAM,EAAE,4BAA4B,EAAE,GAAG","debugId":null}},
    {"offset": {"line": 1389, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/features/admin/state/breeds-api-slice.ts"],"sourcesContent":["/**\n * RTK Query API for Admin Breeds Management\n *\n * Replaces TanStack Query with RTK Query for admin breeds data fetching.\n * Provides type-safe CRUD operations for breed management with automatic\n * cache invalidation and Redux DevTools integration.\n *\n * @module features/admin/state/breeds-api-slice\n */\n\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\nimport type {\n  BreedsResponse,\n  CreateBreedsInput,\n  CreateBreedsResponse,\n  BreedWithCount,\n} from '../types/breeds.types'\n\n/**\n * Admin Breeds API\n *\n * RTK Query API definition for admin breeds management endpoints.\n * Uses the existing API routes at /api/admin/breeds.\n *\n * Key features:\n * - Type-safe API calls using breeds.types.ts\n * - Automatic caching and invalidation via ['Breeds'] tag\n * - Optimistic updates support through invalidatesTags\n * - Redux DevTools integration for debugging\n *\n * Cache invalidation strategy:\n * - All queries provide ['Breeds'] tag\n * - All mutations invalidate ['Breeds'] tag\n * - This ensures UI stays synchronized after any mutation\n *\n * @example\n * ```tsx\n * import {\n *   useGetBreedsQuery,\n *   useCreateBreedsMutation,\n *   useDeleteBreedMutation,\n *   useUpdateBreedMutation,\n * } from '@/features/admin/state/breeds-api-slice'\n *\n * function AdminBreedsPage() {\n *   const { data: breeds = [], isLoading } = useGetBreedsQuery()\n *   const [createBreeds] = useCreateBreedsMutation()\n *   const [deleteBreed] = useDeleteBreedMutation()\n *   const [updateBreed] = useUpdateBreedMutation()\n *\n *   // Use the hooks in your component...\n * }\n * ```\n */\nexport const breedsApiSlice = createApi({\n  reducerPath: 'breedsApi',\n  baseQuery: fetchBaseQuery({ baseUrl: '/api/admin' }),\n  tagTypes: ['Breeds'],\n  endpoints: (builder) => ({\n    /**\n     * Get all breeds with pet counts\n     *\n     * Fetches the complete list of breeds ordered by:\n     * petType → category → displayOrder → name\n     *\n     * Each breed includes a count of associated pets for validation\n     * (e.g., preventing deletion of breeds with pets).\n     *\n     * Type flow:\n     * - Request: void (no parameters)\n     * - API Response: BreedsResponse (array of BreedWithCount)\n     *\n     * Caching strategy:\n     * - Provides ['Breeds'] tag for automatic invalidation\n     * - Cache persists until invalidated by mutations\n     *\n     * @returns Array of breeds with pet counts\n     *\n     * @example\n     * ```tsx\n     * function BreedsList() {\n     *   const { data: breeds = [], isLoading, error } = useGetBreedsQuery()\n     *\n     *   if (isLoading) return <LoadingSpinner />\n     *   if (error) return <ErrorMessage error={error} />\n     *\n     *   return (\n     *     <div>\n     *       {breeds.map(breed => (\n     *         <BreedCard key={breed.id} breed={breed} />\n     *       ))}\n     *     </div>\n     *   )\n     * }\n     * ```\n     *\n     * @see GET /api/admin/breeds - Server endpoint\n     * @see BreedsResponse - Return type documentation\n     */\n    getBreeds: builder.query<BreedsResponse, void>({\n      query: () => '/breeds',\n      providesTags: ['Breeds'],\n    }),\n\n    /**\n     * Create or update multiple breeds in bulk\n     *\n     * Accepts comma-separated breed names and performs bulk operation:\n     * - Creates new breeds that don't exist\n     * - Updates existing breeds (e.g., reorder via displayOrder)\n     * - Returns summary of created vs updated counts\n     *\n     * Type flow:\n     * - Request: CreateBreedsInput (petType, category, breedNames)\n     * - API Response: CreateBreedsResponse (created, updated, total counts)\n     *\n     * Cache invalidation:\n     * - Invalidates ['Breeds'] tag to trigger refetch of breeds list\n     * - UI automatically updates with new/updated breeds\n     *\n     * @param input - Breed creation input with petType, category, and comma-separated names\n     * @returns Creation summary with counts of created/updated breeds\n     *\n     * @example\n     * ```tsx\n     * function BreedForm() {\n     *   const [createBreeds, { isLoading }] = useCreateBreedsMutation()\n     *\n     *   const handleSubmit = async () => {\n     *     try {\n     *       const result = await createBreeds({\n     *         petType: 'DOG',\n     *         category: 'SMALL',\n     *         breedNames: '푸들, 말티즈, 비숑'\n     *       }).unwrap()\n     *\n     *       toast.success(`Created: ${result.created}, Updated: ${result.updated}`)\n     *     } catch (error) {\n     *       toast.error('Failed to save breeds')\n     *     }\n     *   }\n     *\n     *   return <Button onClick={handleSubmit} disabled={isLoading}>Save</Button>\n     * }\n     * ```\n     *\n     * @see POST /api/admin/breeds - Server endpoint\n     * @see CreateBreedsInput - Input type documentation\n     * @see CreateBreedsResponse - Response type documentation\n     */\n    createBreeds: builder.mutation<CreateBreedsResponse, CreateBreedsInput>({\n      query: (input) => ({\n        url: '/breeds',\n        method: 'POST',\n        body: input,\n      }),\n      invalidatesTags: ['Breeds'],\n    }),\n\n    /**\n     * Delete a single breed by ID\n     *\n     * Removes the specified breed from the database.\n     * Server will prevent deletion if the breed is currently in use by any pets.\n     *\n     * Type flow:\n     * - Request: string (breed ID)\n     * - API Response: { message: string }\n     *\n     * Cache invalidation:\n     * - Invalidates ['Breeds'] tag to remove deleted breed from UI\n     * - Automatically updates breeds list after successful deletion\n     *\n     * @param id - Unique identifier of the breed to delete\n     * @returns Success message from server\n     *\n     * @example\n     * ```tsx\n     * function BreedDeleteButton({ breed }) {\n     *   const [deleteBreed, { isLoading }] = useDeleteBreedMutation()\n     *\n     *   const handleDelete = async () => {\n     *     if (!confirm(`Delete \"${breed.name}\"?`)) return\n     *\n     *     try {\n     *       await deleteBreed(breed.id).unwrap()\n     *       toast.success('Breed deleted')\n     *     } catch (error) {\n     *       toast.error('Cannot delete breed - it has associated pets')\n     *     }\n     *   }\n     *\n     *   return (\n     *     <Button\n     *       onClick={handleDelete}\n     *       disabled={breed._count.pets > 0 || isLoading}\n     *     >\n     *       Delete\n     *     </Button>\n     *   )\n     * }\n     * ```\n     *\n     * @see DELETE /api/admin/breeds/[breedId] - Server endpoint\n     */\n    deleteBreed: builder.mutation<{ message: string }, string>({\n      query: (id) => ({\n        url: `/breeds/${id}`,\n        method: 'DELETE',\n      }),\n      invalidatesTags: ['Breeds'],\n    }),\n\n    /**\n     * Update breed active status\n     *\n     * Toggles or sets the isActive flag for a breed.\n     * Used for quick enable/disable of breeds in the admin list.\n     *\n     * Type flow:\n     * - Request: { id: string, isActive: boolean }\n     * - API Response: BreedWithCount (updated breed)\n     *\n     * Cache invalidation:\n     * - Invalidates ['Breeds'] tag to reflect status change in UI\n     * - UI updates automatically with new status\n     *\n     * Note: This is a silent operation (no toast notifications)\n     * as it's a frequent, low-risk action. UI updates provide\n     * sufficient visual feedback.\n     *\n     * @param params - Object containing breed ID and new isActive status\n     * @returns Updated breed with new status and pet count\n     *\n     * @example\n     * ```tsx\n     * function BreedToggle({ breed }) {\n     *   const [updateBreed, { isLoading }] = useUpdateBreedMutation()\n     *\n     *   const handleToggle = async () => {\n     *     try {\n     *       await updateBreed({\n     *         id: breed.id,\n     *         isActive: !breed.isActive\n     *       }).unwrap()\n     *     } catch (error) {\n     *       toast.error('Failed to update breed')\n     *     }\n     *   }\n     *\n     *   return (\n     *     <Button onClick={handleToggle} disabled={isLoading}>\n     *       {breed.isActive ? 'Active' : 'Inactive'}\n     *     </Button>\n     *   )\n     * }\n     * ```\n     *\n     * @see PATCH /api/admin/breeds/[breedId] - Server endpoint\n     * @see BreedWithCount - Return type documentation\n     */\n    updateBreed: builder.mutation<BreedWithCount, { id: string; isActive: boolean }>({\n      query: ({ id, isActive }) => ({\n        url: `/breeds/${id}`,\n        method: 'PATCH',\n        body: { isActive },\n      }),\n      invalidatesTags: ['Breeds'],\n    }),\n  }),\n})\n\n/**\n * Export auto-generated hooks for usage in components\n *\n * These hooks are automatically created by RTK Query based on the endpoints:\n * - useGetBreedsQuery: Fetch all breeds (query)\n * - useCreateBreedsMutation: Create/update breeds in bulk (mutation)\n * - useDeleteBreedMutation: Delete a breed (mutation)\n * - useUpdateBreedMutation: Update breed status (mutation)\n *\n * @example\n * ```tsx\n * // Import the hooks you need\n * import {\n *   useGetBreedsQuery,\n *   useCreateBreedsMutation,\n * } from '@/features/admin/state/breeds-api-slice'\n *\n * // Use in your component\n * const { data: breeds, isLoading } = useGetBreedsQuery()\n * const [createBreeds] = useCreateBreedsMutation()\n * ```\n */\nexport const {\n  useGetBreedsQuery,\n  useCreateBreedsMutation,\n  useDeleteBreedMutation,\n  useUpdateBreedMutation,\n} = breedsApiSlice\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC;;;;;;;;;;;;AAED;AAAA;;AA4CO,MAAM,iBAAiB,IAAA,+NAAS,EAAC;IACtC,aAAa;IACb,WAAW,IAAA,kMAAc,EAAC;QAAE,SAAS;IAAa;IAClD,UAAU;QAAC;KAAS;IACpB,WAAW,CAAC,UAAY,CAAC;YACvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAuCC,GACD,WAAW,QAAQ,KAAK,CAAuB;gBAC7C,OAAO,IAAM;gBACb,cAAc;oBAAC;iBAAS;YAC1B;YAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KA6CC,GACD,cAAc,QAAQ,QAAQ,CAA0C;gBACtE,OAAO,CAAC,QAAU,CAAC;wBACjB,KAAK;wBACL,QAAQ;wBACR,MAAM;oBACR,CAAC;gBACD,iBAAiB;oBAAC;iBAAS;YAC7B;YAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KA6CC,GACD,aAAa,QAAQ,QAAQ,CAA8B;gBACzD,OAAO,CAAC,KAAO,CAAC;wBACd,KAAK,CAAC,QAAQ,EAAE,IAAI;wBACpB,QAAQ;oBACV,CAAC;gBACD,iBAAiB;oBAAC;iBAAS;YAC7B;YAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KA+CC,GACD,aAAa,QAAQ,QAAQ,CAAoD;gBAC/E,OAAO,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,GAAK,CAAC;wBAC5B,KAAK,CAAC,QAAQ,EAAE,IAAI;wBACpB,QAAQ;wBACR,MAAM;4BAAE;wBAAS;oBACnB,CAAC;gBACD,iBAAiB;oBAAC;iBAAS;YAC7B;QACF,CAAC;AACH;AAwBO,MAAM,EACX,iBAAiB,EACjB,uBAAuB,EACvB,sBAAsB,EACtB,sBAAsB,EACvB,GAAG","debugId":null}},
    {"offset": {"line": 1641, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/features/admin-bookings/state/admin-bookings-api-slice.ts"],"sourcesContent":["/**\n * RTK Query API for Admin Bookings\n *\n * Replaces TanStack Query with RTK Query for admin bookings data fetching.\n * Imports types from API route files (single source of truth).\n *\n * @module features/admin-bookings/state/admin-bookings-api-slice\n */\n\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\nimport { format } from 'date-fns'\nimport { ko } from 'date-fns/locale'\nimport type { AdminBookingsGetResponse, TransformedBooking } from '@/app/api/admin/bookings/route'\nimport type { BookingFilters } from '../types/booking.types'\n\n/**\n * Request parameters for getBookings endpoint\n */\nexport interface GetBookingsParams extends BookingFilters {\n  /** Page number (1-indexed) */\n  page: number\n  /** Number of items per page */\n  limit: number\n}\n\n/**\n * Response from booking mutations\n */\ninterface BookingMutationResponse {\n  success: boolean\n  booking?: TransformedBooking\n  message?: string\n  error?: string\n}\n\n/**\n * Admin Bookings API\n *\n * RTK Query API definition for admin bookings endpoints.\n * Uses the existing API routes and provides type-safe data fetching.\n *\n * Key features:\n * - Type-safe API calls with AdminBookingsGetResponse from route\n * - Automatic caching with tag-based invalidation\n * - Mutations for booking state changes (confirm, cancel, complete, delete)\n * - Redux DevTools integration for debugging\n *\n * @example\n * ```tsx\n * import { useGetBookingsQuery, useConfirmBookingMutation } from '@/features/admin-bookings/state/admin-bookings-api-slice'\n *\n * function BookingsPage() {\n *   const { data, isLoading } = useGetBookingsQuery({ page: 1, limit: 50, ...filters })\n *   const [confirmBooking] = useConfirmBookingMutation()\n *   // data is typed as AdminBookingsGetResponse\n * }\n * ```\n */\nexport const adminBookingsApi = createApi({\n  reducerPath: 'adminBookingsApi',\n  baseQuery: fetchBaseQuery({ baseUrl: '/api' }),\n  tagTypes: ['Bookings'],\n  endpoints: (builder) => ({\n    /**\n     * Get paginated bookings list with filters\n     *\n     * Fetches bookings with support for:\n     * - Pagination (page, limit)\n     * - Search (by booking number, customer name, phone)\n     * - Filtering (by status, date)\n     * - Sorting (by date, status, amount)\n     *\n     * Type flow:\n     * - Request: GetBookingsParams (filters + pagination)\n     * - API Response: AdminBookingsGetResponse (from route.ts)\n     * - Result: AdminBookingsGetResponse (no transformation needed)\n     *\n     * Caching strategy:\n     * - keepUnusedDataFor: 600 seconds (10 minutes) - matches TanStack Query gcTime\n     * - Cached data persists for 10 minutes after last use\n     * - Tags: ['Bookings', 'BookingStats'] for invalidation\n     *\n     * @param params - Filter and pagination parameters\n     * @returns AdminBookingsGetResponse with bookings and pagination info\n     */\n    getBookings: builder.query<AdminBookingsGetResponse, GetBookingsParams>({\n      query: (params) => {\n        // Ensure timezone-safe date formatting (avoid toISOString() in UTC+9)\n        const dateParam = params.dateFilter\n          ? format(new Date(params.dateFilter + 'T00:00:00'), 'yyyy-MM-dd', { locale: ko })\n          : ''\n\n        const queryParams = new URLSearchParams({\n          page: params.page.toString(),\n          limit: params.limit.toString(),\n          search: params.searchQuery,\n          status: params.statusFilter,\n          date: dateParam,\n          sortBy: params.sortBy,\n          sortOrder: params.sortOrder,\n        })\n\n        return `/admin/bookings?${queryParams}`\n      },\n      providesTags: (result) =>\n        result\n          ? [\n              ...result.bookings.map(({ id }) => ({ type: 'Bookings' as const, id })),\n              { type: 'Bookings', id: 'LIST' },\n            ]\n          : [{ type: 'Bookings', id: 'LIST' }],\n      keepUnusedDataFor: 600, // 10 minutes - matches TanStack Query gcTime\n    }),\n\n    /**\n     * Confirm a booking\n     *\n     * Changes booking status to CONFIRMED.\n     * Invalidates Bookings cache to trigger refetch.\n     *\n     * @param bookingId - ID of booking to confirm\n     * @returns Mutation response with updated booking\n     */\n    confirmBooking: builder.mutation<BookingMutationResponse, string>({\n      query: (bookingId) => ({\n        url: `/admin/bookings/${bookingId}/confirm`,\n        method: 'PATCH',\n      }),\n      invalidatesTags: [{ type: 'Bookings', id: 'LIST' }],\n    }),\n\n    /**\n     * Cancel a booking\n     *\n     * Changes booking status to CANCELLED.\n     * Invalidates Bookings cache to trigger refetch.\n     *\n     * @param bookingId - ID of booking to cancel\n     * @returns Mutation response with updated booking\n     */\n    cancelBooking: builder.mutation<BookingMutationResponse, string>({\n      query: (bookingId) => ({\n        url: `/admin/bookings/${bookingId}/cancel`,\n        method: 'PATCH',\n      }),\n      invalidatesTags: [{ type: 'Bookings', id: 'LIST' }],\n    }),\n\n    /**\n     * Complete a booking\n     *\n     * Changes booking status to COMPLETED.\n     * Invalidates Bookings cache to trigger refetch.\n     *\n     * @param bookingId - ID of booking to complete\n     * @returns Mutation response with updated booking\n     */\n    completeBooking: builder.mutation<BookingMutationResponse, string>({\n      query: (bookingId) => ({\n        url: `/admin/bookings/${bookingId}/complete`,\n        method: 'PATCH',\n      }),\n      invalidatesTags: [{ type: 'Bookings', id: 'LIST' }],\n    }),\n\n    /**\n     * Delete a booking\n     *\n     * Permanently deletes a booking.\n     * Invalidates Bookings cache to trigger refetch.\n     *\n     * @param bookingId - ID of booking to delete\n     * @returns Mutation response\n     */\n    deleteBooking: builder.mutation<BookingMutationResponse, string>({\n      query: (bookingId) => ({\n        url: `/admin/bookings/${bookingId}`,\n        method: 'DELETE',\n      }),\n      invalidatesTags: [{ type: 'Bookings', id: 'LIST' }],\n    }),\n  }),\n})\n\n/**\n * Export hooks for usage in components\n *\n * These are automatically generated by RTK Query based on the endpoints.\n */\nexport const {\n  useGetBookingsQuery,\n  useConfirmBookingMutation,\n  useCancelBookingMutation,\n  useCompleteBookingMutation,\n  useDeleteBookingMutation,\n} = adminBookingsApi\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC;;;;;;;;;;;;;;AAED;AAAA;AACA;AACA;;;;AA+CO,MAAM,mBAAmB,IAAA,+NAAS,EAAC;IACxC,aAAa;IACb,WAAW,IAAA,kMAAc,EAAC;QAAE,SAAS;IAAO;IAC5C,UAAU;QAAC;KAAW;IACtB,WAAW,CAAC,UAAY,CAAC;YACvB;;;;;;;;;;;;;;;;;;;;;KAqBC,GACD,aAAa,QAAQ,KAAK,CAA8C;gBACtE,OAAO,CAAC;oBACN,sEAAsE;oBACtE,MAAM,YAAY,OAAO,UAAU,GAC/B,IAAA,+JAAM,EAAC,IAAI,KAAK,OAAO,UAAU,GAAG,cAAc,cAAc;wBAAE,QAAQ,iJAAE;oBAAC,KAC7E;oBAEJ,MAAM,cAAc,IAAI,gBAAgB;wBACtC,MAAM,OAAO,IAAI,CAAC,QAAQ;wBAC1B,OAAO,OAAO,KAAK,CAAC,QAAQ;wBAC5B,QAAQ,OAAO,WAAW;wBAC1B,QAAQ,OAAO,YAAY;wBAC3B,MAAM;wBACN,QAAQ,OAAO,MAAM;wBACrB,WAAW,OAAO,SAAS;oBAC7B;oBAEA,OAAO,CAAC,gBAAgB,EAAE,aAAa;gBACzC;gBACA,cAAc,CAAC,SACb,SACI;2BACK,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,GAAK,CAAC;gCAAE,MAAM;gCAAqB;4BAAG,CAAC;wBACrE;4BAAE,MAAM;4BAAY,IAAI;wBAAO;qBAChC,GACD;wBAAC;4BAAE,MAAM;4BAAY,IAAI;wBAAO;qBAAE;gBACxC,mBAAmB;YACrB;YAEA;;;;;;;;KAQC,GACD,gBAAgB,QAAQ,QAAQ,CAAkC;gBAChE,OAAO,CAAC,YAAc,CAAC;wBACrB,KAAK,CAAC,gBAAgB,EAAE,UAAU,QAAQ,CAAC;wBAC3C,QAAQ;oBACV,CAAC;gBACD,iBAAiB;oBAAC;wBAAE,MAAM;wBAAY,IAAI;oBAAO;iBAAE;YACrD;YAEA;;;;;;;;KAQC,GACD,eAAe,QAAQ,QAAQ,CAAkC;gBAC/D,OAAO,CAAC,YAAc,CAAC;wBACrB,KAAK,CAAC,gBAAgB,EAAE,UAAU,OAAO,CAAC;wBAC1C,QAAQ;oBACV,CAAC;gBACD,iBAAiB;oBAAC;wBAAE,MAAM;wBAAY,IAAI;oBAAO;iBAAE;YACrD;YAEA;;;;;;;;KAQC,GACD,iBAAiB,QAAQ,QAAQ,CAAkC;gBACjE,OAAO,CAAC,YAAc,CAAC;wBACrB,KAAK,CAAC,gBAAgB,EAAE,UAAU,SAAS,CAAC;wBAC5C,QAAQ;oBACV,CAAC;gBACD,iBAAiB;oBAAC;wBAAE,MAAM;wBAAY,IAAI;oBAAO;iBAAE;YACrD;YAEA;;;;;;;;KAQC,GACD,eAAe,QAAQ,QAAQ,CAAkC;gBAC/D,OAAO,CAAC,YAAc,CAAC;wBACrB,KAAK,CAAC,gBAAgB,EAAE,WAAW;wBACnC,QAAQ;oBACV,CAAC;gBACD,iBAAiB;oBAAC;wBAAE,MAAM;wBAAY,IAAI;oBAAO;iBAAE;YACrD;QACF,CAAC;AACH;AAOO,MAAM,EACX,mBAAmB,EACnB,yBAAyB,EACzB,wBAAwB,EACxB,0BAA0B,EAC1B,wBAAwB,EACzB,GAAG","debugId":null}},
    {"offset": {"line": 1820, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/features/admin-groomers/state/admin-groomers-api-slice.ts"],"sourcesContent":["/**\n * RTK Query API for Admin Groomers\n *\n * Provides type-safe data fetching for groomer management.\n * Imports types from API route files (single source of truth).\n *\n * @module features/admin-groomers/state/admin-groomers-api-slice\n */\n\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\nimport type { AdminGroomersGetResponse, AdminGroomerInfo } from '@/app/api/admin/groomers/route'\nimport type { GetCommissionGradesResponse } from '@/app/api/admin/commission-grades/route'\nimport type { GroomerFilters, UpdateCommissionGradeRequest } from '../types/groomer.types'\n\n/**\n * Request parameters for getGroomers endpoint\n */\nexport interface GetGroomersParams extends Partial<GroomerFilters> {\n  /** Page number (1-indexed) */\n  page: number\n  /** Number of items per page */\n  limit: number\n}\n\n/**\n * Response from groomer mutations\n */\ninterface GroomerMutationResponse {\n  success: boolean\n  groomer?: AdminGroomerInfo\n  message?: string\n  error?: string\n}\n\n/**\n * Admin Groomers API\n *\n * RTK Query API definition for admin groomers endpoints.\n * Uses the existing API routes and provides type-safe data fetching.\n *\n * Key features:\n * - Type-safe API calls with AdminGroomersGetResponse from route\n * - Automatic caching with tag-based invalidation\n * - Mutations for groomer status changes (activate, deactivate, suspend)\n * - Commission grade updates\n * - Redux DevTools integration for debugging\n *\n * @example\n * ```tsx\n * import { useGetGroomersQuery, useActivateGroomerMutation } from '@/features/admin-groomers/state/admin-groomers-api-slice'\n *\n * function GroomersPage() {\n *   const { data, isLoading } = useGetGroomersQuery({ page: 1, limit: 20, ...filters })\n *   const [activateGroomer] = useActivateGroomerMutation()\n *   // data is typed as AdminGroomersGetResponse\n * }\n * ```\n */\nexport const adminGroomersApi = createApi({\n  reducerPath: 'adminGroomersApi',\n  baseQuery: fetchBaseQuery({ baseUrl: '/api' }),\n  tagTypes: ['Groomers', 'GroomerStats'],\n  endpoints: (builder) => ({\n    /**\n     * Get paginated groomers list with filters\n     *\n     * Fetches groomers with support for:\n     * - Pagination (page, limit)\n     * - Search (by name, email, phone)\n     * - Filtering (by status, location)\n     * - Sorting (by various fields)\n     *\n     * Type flow:\n     * - Request: GetGroomersParams (filters + pagination)\n     * - API Response: AdminGroomersGetResponse (from route.ts)\n     * - Result: AdminGroomersGetResponse (no transformation needed)\n     *\n     * Caching strategy:\n     * - keepUnusedDataFor: 600 seconds (10 minutes) - matches TanStack Query gcTime\n     * - Cached data persists for 10 minutes after last use\n     * - Tags: ['Groomers', 'GroomerStats'] for invalidation\n     *\n     * @param params - Filter and pagination parameters\n     * @returns AdminGroomersGetResponse with groomers and pagination info\n     */\n    getGroomers: builder.query<AdminGroomersGetResponse, GetGroomersParams>({\n      query: (params) => {\n        const queryParams = new URLSearchParams({\n          page: params.page.toString(),\n          limit: params.limit.toString(),\n        })\n\n        if (params.searchQuery) {\n          queryParams.append('search', params.searchQuery)\n        }\n        if (params.statusFilter && params.statusFilter !== 'ALL') {\n          queryParams.append('status', params.statusFilter)\n        }\n        if (params.locationFilter && params.locationFilter !== 'ALL') {\n          queryParams.append('location', params.locationFilter)\n        }\n        if (params.sortBy) {\n          queryParams.append('sortBy', params.sortBy)\n        }\n        if (params.sortOrder) {\n          queryParams.append('sortOrder', params.sortOrder)\n        }\n\n        return `/admin/groomers?${queryParams}`\n      },\n      providesTags: (result) =>\n        result\n          ? [\n              ...result.groomers.map(({ id }) => ({ type: 'Groomers' as const, id })),\n              { type: 'Groomers', id: 'LIST' },\n              { type: 'GroomerStats', id: 'STATS' },\n            ]\n          : [{ type: 'Groomers', id: 'LIST' }],\n      keepUnusedDataFor: 600, // 10 minutes - matches TanStack Query gcTime\n    }),\n\n    /**\n     * Activate a groomer\n     *\n     * Changes groomer status to active.\n     * Invalidates Groomers cache to trigger refetch.\n     *\n     * @param groomerId - ID of groomer to activate\n     * @returns Mutation response\n     */\n    activateGroomer: builder.mutation<GroomerMutationResponse, string>({\n      query: (groomerId) => ({\n        url: `/admin/groomers/${groomerId}/activate`,\n        method: 'POST',\n      }),\n      invalidatesTags: [\n        { type: 'Groomers', id: 'LIST' },\n        { type: 'GroomerStats', id: 'STATS' },\n      ],\n    }),\n\n    /**\n     * Deactivate a groomer\n     *\n     * Changes groomer status to inactive.\n     * Invalidates Groomers cache to trigger refetch.\n     *\n     * @param groomerId - ID of groomer to deactivate\n     * @returns Mutation response\n     */\n    deactivateGroomer: builder.mutation<GroomerMutationResponse, string>({\n      query: (groomerId) => ({\n        url: `/admin/groomers/${groomerId}/deactivate`,\n        method: 'POST',\n      }),\n      invalidatesTags: [\n        { type: 'Groomers', id: 'LIST' },\n        { type: 'GroomerStats', id: 'STATS' },\n      ],\n    }),\n\n    /**\n     * Suspend a groomer\n     *\n     * Suspends a groomer (sets isActive to false).\n     * Invalidates Groomers cache to trigger refetch.\n     *\n     * @param groomerId - ID of groomer to suspend\n     * @returns Mutation response\n     */\n    suspendGroomer: builder.mutation<GroomerMutationResponse, string>({\n      query: (groomerId) => ({\n        url: `/admin/groomers/${groomerId}/suspend`,\n        method: 'POST',\n      }),\n      invalidatesTags: [\n        { type: 'Groomers', id: 'LIST' },\n        { type: 'GroomerStats', id: 'STATS' },\n      ],\n    }),\n\n    /**\n     * Update groomer commission grade\n     *\n     * Updates the commission grade for a groomer.\n     * Invalidates Groomers cache to trigger refetch.\n     *\n     * @param request - Groomer ID and new commission grade ID\n     * @returns Mutation response\n     */\n    updateCommissionGrade: builder.mutation<GroomerMutationResponse, UpdateCommissionGradeRequest>({\n      query: ({ groomerId, commissionGradeId }) => ({\n        url: `/admin/groomers/${groomerId}/update-commission`,\n        method: 'POST',\n        body: { commissionGradeId },\n      }),\n      invalidatesTags: [{ type: 'Groomers', id: 'LIST' }],\n    }),\n\n    /**\n     * Get commission grades list\n     *\n     * Fetches all commission grades with optional filtering.\n     * Used for displaying commission grade options in forms.\n     *\n     * @returns GetCommissionGradesResponse with grades list\n     */\n    getCommissionGrades: builder.query<\n      GetCommissionGradesResponse,\n      { status?: 'ALL' | 'ACTIVE' | 'INACTIVE' }\n    >({\n      query: ({ status = 'ACTIVE' } = {}) => `/admin/commission-grades?status=${status}`,\n      keepUnusedDataFor: 600, // 10 minutes\n    }),\n  }),\n})\n\n/**\n * Export hooks for usage in components\n *\n * These are automatically generated by RTK Query based on the endpoints.\n */\nexport const {\n  useGetGroomersQuery,\n  useActivateGroomerMutation,\n  useDeactivateGroomerMutation,\n  useSuspendGroomerMutation,\n  useUpdateCommissionGradeMutation,\n  useGetCommissionGradesQuery,\n} = adminGroomersApi\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2034, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/features/admin-reviews/state/admin-reviews-api-slice.ts"],"sourcesContent":["/**\n * Admin Reviews RTK Query API Slice\n *\n * Provides RTK Query hooks for managing admin review operations:\n * - Fetching reviews with filters, pagination, and sorting\n * - Approving, flagging, hiding, and deleting reviews\n * - Responding to reviews\n *\n * Uses tag-based cache invalidation for automatic updates.\n */\n\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\nimport type {\n  AdminReviewsGetResponse,\n  ReviewMutationResponse,\n} from '@/features/admin-reviews/types/review.types'\n\n// Query parameters interface\nexport interface GetReviewsParams {\n  page?: number\n  limit?: number\n  search?: string\n  rating?: number | null\n  status?: string\n  service?: string\n  sortBy?: string\n  sortOrder?: string\n}\n\n// Create RTK Query API\nexport const adminReviewsApi = createApi({\n  reducerPath: 'adminReviewsApi',\n  baseQuery: fetchBaseQuery({ baseUrl: '/api' }),\n\n  // Tag types for cache invalidation\n  tagTypes: ['Reviews', 'ReviewStats'],\n\n  endpoints: (builder) => ({\n    // GET /api/admin/reviews\n    getReviews: builder.query<AdminReviewsGetResponse, GetReviewsParams>({\n      query: (params) => {\n        const queryParams = new URLSearchParams()\n        if (params.page) queryParams.append('page', params.page.toString())\n        if (params.limit) queryParams.append('limit', params.limit.toString())\n        if (params.search) queryParams.append('search', params.search)\n        if (params.rating) queryParams.append('rating', params.rating.toString())\n        if (params.status) queryParams.append('status', params.status)\n        if (params.service) queryParams.append('service', params.service)\n        if (params.sortBy) queryParams.append('sortBy', params.sortBy)\n        if (params.sortOrder) queryParams.append('sortOrder', params.sortOrder)\n\n        return `/admin/reviews?${queryParams}`\n      },\n      providesTags: (result) =>\n        result\n          ? [\n              { type: 'Reviews', id: 'LIST' },\n              { type: 'ReviewStats', id: 'STATS' },\n              ...result.reviews.map(({ id }) => ({ type: 'Reviews' as const, id })),\n            ]\n          : [{ type: 'Reviews', id: 'LIST' }],\n      keepUnusedDataFor: 600, // 10 minutes cache\n    }),\n\n    // POST /api/admin/reviews/[id]/approve\n    approveReview: builder.mutation<ReviewMutationResponse, string>({\n      query: (reviewId) => ({\n        url: `/admin/reviews/${reviewId}/approve`,\n        method: 'POST',\n      }),\n      invalidatesTags: (_result, _error, reviewId) => [\n        { type: 'Reviews', id: reviewId },\n        { type: 'Reviews', id: 'LIST' },\n        { type: 'ReviewStats', id: 'STATS' },\n      ],\n    }),\n\n    // POST /api/admin/reviews/[id]/flag\n    flagReview: builder.mutation<ReviewMutationResponse, { reviewId: string; reason: string }>({\n      query: ({ reviewId, reason }) => ({\n        url: `/admin/reviews/${reviewId}/flag`,\n        method: 'POST',\n        body: { reason },\n      }),\n      invalidatesTags: (_result, _error, { reviewId }) => [\n        { type: 'Reviews', id: reviewId },\n        { type: 'Reviews', id: 'LIST' },\n        { type: 'ReviewStats', id: 'STATS' },\n      ],\n    }),\n\n    // DELETE /api/admin/reviews/[id]\n    deleteReview: builder.mutation<ReviewMutationResponse, string>({\n      query: (reviewId) => ({\n        url: `/admin/reviews/${reviewId}`,\n        method: 'DELETE',\n      }),\n      invalidatesTags: (_result, _error, reviewId) => [\n        { type: 'Reviews', id: reviewId },\n        { type: 'Reviews', id: 'LIST' },\n        { type: 'ReviewStats', id: 'STATS' },\n      ],\n    }),\n\n    // POST /api/admin/reviews/[id]/respond\n    respondToReview: builder.mutation<\n      ReviewMutationResponse,\n      { reviewId: string; response: string }\n    >({\n      query: ({ reviewId, response }) => ({\n        url: `/admin/reviews/${reviewId}/respond`,\n        method: 'POST',\n        body: { response },\n      }),\n      invalidatesTags: (_result, _error, { reviewId }) => [\n        { type: 'Reviews', id: reviewId },\n        { type: 'Reviews', id: 'LIST' },\n        { type: 'ReviewStats', id: 'STATS' },\n      ],\n    }),\n\n    // POST /api/admin/reviews/[id]/hide\n    hideReview: builder.mutation<ReviewMutationResponse, string>({\n      query: (reviewId) => ({\n        url: `/admin/reviews/${reviewId}/hide`,\n        method: 'POST',\n      }),\n      invalidatesTags: (_result, _error, reviewId) => [\n        { type: 'Reviews', id: reviewId },\n        { type: 'Reviews', id: 'LIST' },\n        { type: 'ReviewStats', id: 'STATS' },\n      ],\n    }),\n  }),\n})\n\n// Export hooks for usage in components\nexport const {\n  useGetReviewsQuery,\n  useApproveReviewMutation,\n  useFlagReviewMutation,\n  useDeleteReviewMutation,\n  useRespondToReviewMutation,\n  useHideReviewMutation,\n} = adminReviewsApi\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2226, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/features/admin-payments/state/admin-payments-api-slice.ts"],"sourcesContent":["import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\nimport type { AdminPaymentsGetResponse } from '../types/payment.types'\n\n/**\n * Query parameters for fetching payments\n */\nexport interface GetPaymentsParams {\n  page: number\n  limit: number\n  searchQuery?: string\n  statusFilter?: string\n}\n\n/**\n * RTK Query API slice for admin payments feature\n *\n * Provides cached queries for payment data with automatic\n * cache invalidation and refetching capabilities.\n *\n * @example\n * ```tsx\n * const { data, isLoading } = useGetPaymentsQuery({\n *   page: 1,\n *   limit: 20,\n *   statusFilter: 'PAID'\n * })\n * ```\n */\nexport const adminPaymentsApi = createApi({\n  reducerPath: 'adminPaymentsApi',\n  baseQuery: fetchBaseQuery({ baseUrl: '/api' }),\n  tagTypes: ['Payments', 'PaymentStats'],\n  endpoints: (builder) => ({\n    /**\n     * Get paginated list of payments with optional filters\n     *\n     * Cache tags (for surgical invalidation):\n     * - `Payments:LIST` - Invalidates all paginated lists (use after create/delete)\n     * - `Payments:{id}` - Invalidates specific payment detail (use after update)\n     * - `PaymentStats:STATS` - Invalidates statistics (use after create/delete/status change)\n     *\n     * Invalidation strategy:\n     * - After creating payment: invalidate `Payments:LIST` + `PaymentStats:STATS`\n     * - After updating payment: invalidate `Payments:{id}` (+ `LIST` if status changed)\n     * - After deleting payment: invalidate `Payments:LIST` + `PaymentStats:STATS`\n     * - After refund: invalidate both `Payments:{id}` and `PaymentStats:STATS`\n     *\n     * Cache retention: Data remains cached while any component is subscribed.\n     * After all components unsubscribe, data is kept for 10 minutes (600 seconds)\n     * before being garbage collected. Cache can be manually invalidated via tags\n     * regardless of subscription state.\n     */\n    getPayments: builder.query<AdminPaymentsGetResponse, GetPaymentsParams>({\n      query: (params) => {\n        const queryParams = new URLSearchParams({\n          page: params.page.toString(),\n          limit: params.limit.toString(),\n        })\n\n        if (params.searchQuery) {\n          queryParams.append('search', params.searchQuery)\n        }\n\n        if (params.statusFilter && params.statusFilter !== 'ALL') {\n          queryParams.append('status', params.statusFilter)\n        }\n\n        return `/admin/payments?${queryParams.toString()}`\n      },\n      providesTags: (result) =>\n        result\n          ? [\n              { type: 'Payments', id: 'LIST' },\n              { type: 'PaymentStats', id: 'STATS' },\n              ...result.payments.map(({ id }) => ({ type: 'Payments' as const, id })),\n            ]\n          : [{ type: 'Payments', id: 'LIST' }],\n      keepUnusedDataFor: 600, // 10 minutes cache\n    }),\n  }),\n})\n\n/**\n * Auto-generated hooks for payment queries\n */\nexport const { useGetPaymentsQuery } = adminPaymentsApi\n\n/**\n * Export endpoints for use in server-side code or manual queries\n */\nexport const { getPayments } = adminPaymentsApi.endpoints\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;;AA4BO,MAAM,mBAAmB,IAAA,+NAAS,EAAC;IACxC,aAAa;IACb,WAAW,IAAA,kMAAc,EAAC;QAAE,SAAS;IAAO;IAC5C,UAAU;QAAC;QAAY;KAAe;IACtC,WAAW,CAAC,UAAY,CAAC;YACvB;;;;;;;;;;;;;;;;;;KAkBC,GACD,aAAa,QAAQ,KAAK,CAA8C;gBACtE,OAAO,CAAC;oBACN,MAAM,cAAc,IAAI,gBAAgB;wBACtC,MAAM,OAAO,IAAI,CAAC,QAAQ;wBAC1B,OAAO,OAAO,KAAK,CAAC,QAAQ;oBAC9B;oBAEA,IAAI,OAAO,WAAW,EAAE;wBACtB,YAAY,MAAM,CAAC,UAAU,OAAO,WAAW;oBACjD;oBAEA,IAAI,OAAO,YAAY,IAAI,OAAO,YAAY,KAAK,OAAO;wBACxD,YAAY,MAAM,CAAC,UAAU,OAAO,YAAY;oBAClD;oBAEA,OAAO,CAAC,gBAAgB,EAAE,YAAY,QAAQ,IAAI;gBACpD;gBACA,cAAc,CAAC,SACb,SACI;wBACE;4BAAE,MAAM;4BAAY,IAAI;wBAAO;wBAC/B;4BAAE,MAAM;4BAAgB,IAAI;wBAAQ;2BACjC,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,GAAK,CAAC;gCAAE,MAAM;gCAAqB;4BAAG,CAAC;qBACtE,GACD;wBAAC;4BAAE,MAAM;4BAAY,IAAI;wBAAO;qBAAE;gBACxC,mBAAmB;YACrB;QACF,CAAC;AACH;AAKO,MAAM,EAAE,mBAAmB,EAAE,GAAG;AAKhC,MAAM,EAAE,WAAW,EAAE,GAAG,iBAAiB,SAAS","debugId":null}},
    {"offset": {"line": 2308, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/lib/redux/store.ts"],"sourcesContent":["/**\n * Redux Store 설정\n *\n * Redux Toolkit을 사용한 전역 상태 관리 스토어\n * RTK Query API 통합\n */\n\nimport { configureStore } from '@reduxjs/toolkit'\nimport { createLogger } from 'redux-logger'\nimport bookingReducer from '@/features/booking/state/booking-slice'\nimport { bookingQueryApi } from '@/features/booking/api/booking-query-api'\nimport { dashboardApi } from '@/features/admin/state/dashboard-api-slice'\nimport { breedsApiSlice } from '@/features/admin/state/breeds-api-slice'\nimport { adminBookingsApi } from '@/features/admin-bookings/state/admin-bookings-api-slice'\nimport { adminGroomersApi } from '@/features/admin-groomers/state/admin-groomers-api-slice'\nimport { adminReviewsApi } from '@/features/admin-reviews/state/admin-reviews-api-slice'\nimport { adminPaymentsApi } from '@/features/admin-payments/state/admin-payments-api-slice'\n\n/**\n * Redux 스토어 생성\n */\nexport const makeStore = () => {\n  return configureStore({\n    reducer: {\n      booking: bookingReducer,\n      // RTK Query API reducers\n      [bookingQueryApi.reducerPath]: bookingQueryApi.reducer,\n      [dashboardApi.reducerPath]: dashboardApi.reducer,\n      [breedsApiSlice.reducerPath]: breedsApiSlice.reducer,\n      [adminBookingsApi.reducerPath]: adminBookingsApi.reducer,\n      [adminGroomersApi.reducerPath]: adminGroomersApi.reducer,\n      [adminReviewsApi.reducerPath]: adminReviewsApi.reducer,\n      [adminPaymentsApi.reducerPath]: adminPaymentsApi.reducer,\n      // 다른 슬라이스를 여기에 추가\n      // payment: paymentReducer,\n      // user: userReducer,\n    },\n    middleware: (getDefaultMiddleware) => {\n      // Add RTK Query middleware\n      const middleware = getDefaultMiddleware()\n        .concat(bookingQueryApi.middleware)\n        .concat(dashboardApi.middleware)\n        .concat(breedsApiSlice.middleware)\n        .concat(adminBookingsApi.middleware)\n        .concat(adminGroomersApi.middleware)\n        .concat(adminReviewsApi.middleware)\n        .concat(adminPaymentsApi.middleware)\n\n      if (process.env.NODE_ENV === 'development') {\n        const logger = createLogger({\n          collapsed: false, // 로그를 펼친 상태로 표시 (모든 로그 보기)\n          duration: true, // 액션 처리 시간 표시\n          timestamp: true, // 타임스탬프 표시\n          diff: true, // 상태 변경 diff 표시\n          logErrors: true, // 에러 로깅\n          predicate: () => true, // 모든 액션 로깅\n        })\n        middleware.push(logger)\n      }\n\n      return middleware\n    },\n    devTools: process.env.NODE_ENV !== 'production',\n  })\n}\n\n/**\n * 스토어 타입 추론\n */\nexport type AppStore = ReturnType<typeof makeStore>\nexport type RootState = ReturnType<AppStore['getState']>\nexport type AppDispatch = AppStore['dispatch']\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAKO,MAAM,YAAY;IACvB,OAAO,IAAA,6MAAc,EAAC;QACpB,SAAS;YACP,SAAS,kKAAc;YACvB,yBAAyB;YACzB,CAAC,+KAAe,CAAC,WAAW,CAAC,EAAE,+KAAe,CAAC,OAAO;YACtD,CAAC,8KAAY,CAAC,WAAW,CAAC,EAAE,8KAAY,CAAC,OAAO;YAChD,CAAC,6KAAc,CAAC,WAAW,CAAC,EAAE,6KAAc,CAAC,OAAO;YACpD,CAAC,sMAAgB,CAAC,WAAW,CAAC,EAAE,sMAAgB,CAAC,OAAO;YACxD,CAAC,sMAAgB,CAAC,WAAW,CAAC,EAAE,sMAAgB,CAAC,OAAO;YACxD,CAAC,mMAAe,CAAC,WAAW,CAAC,EAAE,mMAAe,CAAC,OAAO;YACtD,CAAC,sMAAgB,CAAC,WAAW,CAAC,EAAE,sMAAgB,CAAC,OAAO;QAI1D;QACA,YAAY,CAAC;YACX,2BAA2B;YAC3B,MAAM,aAAa,uBAChB,MAAM,CAAC,+KAAe,CAAC,UAAU,EACjC,MAAM,CAAC,8KAAY,CAAC,UAAU,EAC9B,MAAM,CAAC,6KAAc,CAAC,UAAU,EAChC,MAAM,CAAC,sMAAgB,CAAC,UAAU,EAClC,MAAM,CAAC,sMAAgB,CAAC,UAAU,EAClC,MAAM,CAAC,mMAAe,CAAC,UAAU,EACjC,MAAM,CAAC,sMAAgB,CAAC,UAAU;YAErC,wCAA4C;gBAC1C,MAAM,SAAS,IAAA,0KAAY,EAAC;oBAC1B,WAAW;oBACX,UAAU;oBACV,WAAW;oBACX,MAAM;oBACN,WAAW;oBACX,WAAW,IAAM;gBACnB;gBACA,WAAW,IAAI,CAAC;YAClB;YAEA,OAAO;QACT;QACA,UAAU,oDAAyB;IACrC;AACF","debugId":null}},
    {"offset": {"line": 2373, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/lib/redux/provider.tsx"],"sourcesContent":["/**\n * Redux Store Provider\n * Next.js App Router와 함께 사용하기 위한 Redux Provider\n * 클라이언트 컴포넌트로 구현\n */\n\n'use client'\n\nimport { Provider } from 'react-redux'\nimport { makeStore } from './store'\n\ninterface ReduxProviderProps {\n  children: React.ReactNode\n}\n\nconst store = makeStore()\n\n/**\n * Redux Provider 컴포넌트\n *\n * Next.js App Router에서 Redux를 사용하기 위해\n * 클라이언트 컴포넌트로 구현된 Provider\n *\n * @example\n * ```tsx\n * // app/layout.tsx\n * import { ReduxProvider } from '@/lib/redux/provider';\n *\n * export default function RootLayout({ children }) {\n *   return (\n *     <html>\n *       <body>\n *         <ReduxProvider>{children}</ReduxProvider>\n *       </body>\n *     </html>\n *   );\n * }\n * ```\n */\nexport function ReduxProvider({ children }: ReduxProviderProps) {\n  return <Provider store={store}>{children}</Provider>\n}\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;AAID;AACA;AAHA;;;;AASA,MAAM,QAAQ,IAAA,yIAAS;AAwBhB,SAAS,cAAc,EAAE,QAAQ,EAAsB;IAC5D,qBAAO,8OAAC,qKAAQ;QAAC,OAAO;kBAAQ;;;;;;AAClC","debugId":null}},
    {"offset": {"line": 2403, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/components/providers.tsx"],"sourcesContent":["'use client'\n\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools'\nimport { useState } from 'react'\nimport { FetchInterceptorProvider } from '@/components/providers/fetch-interceptor-provider'\nimport { ReduxProvider } from '@/lib/redux/provider'\n\n/**\n * Providers Component\n *\n * better-auth doesn't require a SessionProvider wrapper.\n * Session state is managed internally through better-auth hooks.\n */\nexport function Providers({ children }: { children: React.ReactNode }) {\n  const [queryClient] = useState(\n    () =>\n      new QueryClient({\n        defaultOptions: {\n          queries: {\n            staleTime: 60 * 1000,\n            refetchOnWindowFocus: false,\n          },\n        },\n      })\n  )\n\n  return (\n    <ReduxProvider>\n      <QueryClientProvider client={queryClient}>\n        <FetchInterceptorProvider>\n          {children}\n          <ReactQueryDevtools initialIsOpen={false} />\n        </FetchInterceptorProvider>\n      </QueryClientProvider>\n    </ReduxProvider>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAcO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,MAAM,CAAC,YAAY,GAAG,IAAA,iNAAQ,EAC5B,IACE,IAAI,4LAAW,CAAC;YACd,gBAAgB;gBACd,SAAS;oBACP,WAAW,KAAK;oBAChB,sBAAsB;gBACxB;YACF;QACF;IAGJ,qBACE,8OAAC,iJAAa;kBACZ,cAAA,8OAAC,6MAAmB;YAAC,QAAQ;sBAC3B,cAAA,8OAAC,+LAAwB;;oBACtB;kCACD,8OAAC,0MAAkB;wBAAC,eAAe;;;;;;;;;;;;;;;;;;;;;;AAK7C","debugId":null}}]
}