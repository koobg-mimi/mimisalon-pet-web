{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/shared/dist/prisma/client.js","sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/packages/shared/src/prisma/client.ts"],"sourcesContent":["/**\n * Prisma Client Singleton\n *\n * Ensures single Prisma Client instance across the application\n * Prevents \"too many clients\" errors in development with HMR\n */\n\nimport { PrismaClient } from '@prisma/client';\n\n// PrismaClient is attached to the `global` object in development\n// to prevent exhausting database connection limit\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\n  });\n\nif (process.env.NODE_ENV !== 'production') {\n  globalForPrisma.prisma = prisma;\n}\n\n// Export Prisma types for convenience\nexport type * from '@prisma/client';\n"],"names":[],"mappings":"AAAA;;;;;GAKG;;;;AAEH,MAAA,qCAA8C;AAE9C,iEAAiE;AACjE,kDAAkD;AAClD,MAAM,eAAe,GAAG,UAEvB,CAAC;AAEW,QAAA,MAAM,GACjB,eAAe,CAAC,MAAM,IACtB,IAAI,SAAA,YAAY,CAAC;IACf,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,aAAa,CAAC,AAAE,CAAD;QAAE,OAAO;QAAE,OAAO;QAAE,MAAM;KAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;CACrF,CAAC,CAAC;AAEL,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,WAAc,CAAF,AAAG;IAC1C,eAAe,CAAC,MAAM,GAAG,QAAA,MAAM,CAAC;AAClC,CAAC","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/shared/dist/types/worker-api.js","sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/packages/shared/src/types/worker-api.ts"],"sourcesContent":["/**\n * Worker API Types\n *\n * TypeScript types for REST API communication with @mimisalon/worker service.\n * Defines request/response shapes for all queue job endpoints.\n *\n * @module types/worker-api\n */\n\n// ============================================================================\n// Common Types\n// ============================================================================\n\n/**\n * Standard API response wrapper\n */\nexport interface WorkerApiResponse<T = unknown> {\n  success: boolean;\n  data?: T;\n  error?: {\n    code: string;\n    message: string;\n    details?: string | Record<string, unknown>;\n  };\n  timestamp: string;\n}\n\n/**\n * Queue job status (distinct from Prisma's JobStatus enum)\n * Represents the current state of a job in the BullMQ queue\n */\nexport type QueueJobStatus = 'queued' | 'scheduled' | 'cancelled' | 'completed' | 'failed';\n\n// ============================================================================\n// Email Queue Types\n// ============================================================================\n\n/**\n * Email job types\n */\nexport type EmailJobType = 'VERIFICATION' | 'PASSWORD_RESET' | 'NOTIFICATION' | 'BOOKING_REMINDER';\n\n/**\n * Generic email job request\n */\nexport interface EmailJobRequest {\n  to: string;\n  subject: string;\n  html: string;\n  text?: string;\n  userId?: string;\n  type: EmailJobType;\n  priority?: number;\n  metadata?: Record<string, unknown>;\n  delay?: number;\n  jobId?: string;\n}\n\n/**\n * Verification email request\n */\nexport interface VerificationEmailRequest {\n  userId: string;\n  email: string;\n  name: string;\n  verificationUrl: string;\n}\n\n/**\n * Email job response data\n */\nexport interface EmailJobResponse {\n  jobId: string | number;\n  type: EmailJobType;\n  email: string;\n  status: QueueJobStatus;\n  bookingId?: string;\n  delayMinutes?: number;\n}\n\n/**\n * Email queue status response\n */\nexport interface EmailQueueStatusResponse {\n  queue: 'email';\n  counts: {\n    waiting: number;\n    active: number;\n    completed: number;\n    failed: number;\n    delayed: number;\n  };\n  samples?: {\n    waiting: Array<{ id: string; type: string; to: string }>;\n    failed: Array<{ id: string; type: string; to: string; error?: string }>;\n  };\n}\n\n// ============================================================================\n// Notification Queue Types\n// ============================================================================\n\n/**\n * Notification job types\n */\nexport type NotificationJobType =\n  | 'booking_reminder'\n  | 'today_booking'\n  | 'status_update'\n  | 'quote_request';\n\n/**\n * Notification target audience\n */\nexport type NotificationAudience = 'CUSTOMER' | 'GROOMER' | 'BOTH';\n\n/**\n * Booking reminder notification request\n */\nexport interface BookingReminderNotificationRequest {\n  bookingId: string;\n  serviceDateTime: string; // ISO 8601 datetime\n}\n\n/**\n * Today notification request\n */\nexport interface TodayNotificationRequest {\n  bookingId: string;\n  serviceDate: string; // ISO 8601 date\n}\n\n/**\n * Immediate notification request\n */\nexport interface ImmediateNotificationRequest {\n  type: NotificationJobType;\n  bookingId: string;\n  userId?: string;\n  targetAudience: NotificationAudience;\n  title: string;\n  body: string;\n  data?: Record<string, unknown>;\n}\n\n/**\n * Notification job response data\n */\nexport interface NotificationJobResponse {\n  bookingId: string;\n  type: NotificationJobType;\n  status: QueueJobStatus;\n  serviceDateTime?: string;\n  reminderTime?: string;\n  notificationTime?: string;\n  targetAudience?: NotificationAudience;\n  title?: string;\n  priority?: string;\n}\n\n/**\n * Cancel notifications response\n */\nexport interface CancelNotificationsResponse {\n  bookingId: string;\n  status: 'cancelled';\n  message: string;\n}\n\n/**\n * Notification queue status response\n */\nexport interface NotificationQueueStatusResponse {\n  queue: 'notification';\n  counts: {\n    waiting: number;\n    active: number;\n    completed: number;\n    failed: number;\n    delayed: number;\n    total: number;\n  };\n}\n\n// ============================================================================\n// Payment Queue Types\n// ============================================================================\n\n/**\n * Schedule payment cleanup request\n */\nexport interface SchedulePaymentCleanupRequest {\n  paymentId: string;\n  bookingId?: string | null;\n  delayMs?: number; // Default: 5 minutes (300000ms)\n}\n\n/**\n * Execute immediate cleanup request\n */\nexport interface ExecutePaymentCleanupRequest {\n  paymentId: string;\n  bookingId?: string | null;\n}\n\n/**\n * Payment cleanup job response\n */\nexport interface PaymentCleanupJobResponse {\n  jobId: string | number;\n  paymentId: string;\n  bookingId?: string | null;\n  delayMs?: number;\n  cleanupTime?: string;\n  status: QueueJobStatus;\n  priority?: string;\n  message?: string;\n}\n\n/**\n * Cancel payment cleanup response\n */\nexport interface CancelPaymentCleanupResponse {\n  paymentId: string;\n  status: 'cancelled';\n  message: string;\n}\n\n// ============================================================================\n// Health & Status Types\n// ============================================================================\n\n/**\n * Health check response\n */\nexport interface HealthCheckResponse {\n  success: boolean;\n  status: 'healthy' | 'unhealthy';\n  timestamp: string;\n  checks?: {\n    redis: {\n      healthy: boolean;\n      status: string;\n      connections: number;\n    };\n    smtp: {\n      healthy: boolean;\n      message: string;\n    };\n    workers: {\n      initialized: boolean;\n      isLeader: boolean;\n      status: {\n        notification: 'running' | 'stopped';\n        email: 'running' | 'stopped';\n        paymentCleanup: 'running' | 'stopped';\n      };\n    };\n  };\n}\n\n// ============================================================================\n// Error Types\n// ============================================================================\n\n/**\n * Worker API error class\n */\nexport class WorkerApiError extends Error {\n  constructor(\n    message: string,\n    public code: string,\n    public statusCode: number,\n    public details?: string | Record<string, unknown>\n  ) {\n    super(message);\n    this.name = 'WorkerApiError';\n  }\n}\n"],"names":[],"mappings":"AAAA;;;;;;;GAOG;;;;AA8PH,+EAA+E;AAC/E,cAAc;AACd,+EAA+E;AAE/E;;GAEG,CACH,MAAa,cAAe,SAAQ,KAAK;IACvC,YACE,OAAe,EACR,IAAY,EACZ,UAAkB,EAClB,OAA0C,CAAA;QAEjD,KAAK,CAAC,OAAO,CAAC,CAAC;QAJR,IAAA,CAAA,IAAI,GAAJ,IAAI,CAAQ;QACZ,IAAA,CAAA,UAAU,GAAV,UAAU,CAAQ;QAClB,IAAA,CAAA,OAAO,GAAP,OAAO,CAAmC;QAGjD,IAAI,CAAC,IAAI,GAAG,gBAAgB,CAAC;IAC/B,CAAC;CACF;AAVD,QAAA,cAAA,GAAA,eAUC","debugId":null}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/shared/dist/types/index.js","sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/packages/shared/src/types/index.ts"],"sourcesContent":["/**\n * Shared TypeScript types\n *\n * Export common types used across the monorepo\n */\n\n// Re-export Prisma types\nexport * from '@prisma/client';\n\n// Worker API types (shared between Next.js and Worker service)\nexport * from './worker-api';\n"],"names":[],"mappings":"AAAA;;;;GAIG;;;;;;;;;;;;;;;;;;;;;;AAEH,yBAAyB;AACzB,qGAAA,SAA+B;AAE/B,+DAA+D;AAC/D,qHAAA,SAA6B","debugId":null}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/shared/dist/index.js","sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/packages/shared/src/index.ts"],"sourcesContent":["/**\n * @mimisalon/shared\n *\n * Shared code for MimiSalon monorepo\n * Exports Prisma client, shared types, and utilities\n */\n\n// Export Prisma client\nexport { prisma } from './prisma/client';\n\n// Export shared types (to be added as needed)\nexport * from './types';\n"],"names":[],"mappings":"AAAA;;;;;GAKG;;;;;;;;;;;;;;;;;;;;;;;AAEH,uBAAuB;AACvB,IAAA,sCAAyC;AAAhC,OAAA,cAAA,CAAA,SAAA,UAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,SAAA,MAAM;IAAA;AAAA,GAAA;AAEf,8CAA8C;AAC9C,gHAAA,SAAwB","debugId":null}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/lib/env.ts"],"sourcesContent":["/**\n * Environment Variable Validation\n *\n * Provides type-safe runtime validation for all environment variables\n * using @t3-oss/env-nextjs and Zod schemas.\n *\n * Usage:\n * ```typescript\n * import { env } from '@/lib/env';\n *\n * // Server-side\n * const dbUrl = env.DATABASE_URL;\n *\n * // Client-side\n * const apiKey = env.NEXT_PUBLIC_KAKAO_MAP_KEY;\n * ```\n *\n * Features:\n * - Runtime validation with helpful error messages\n * - TypeScript autocomplete and type safety\n * - Separate server and client validation\n * - Build-time validation to catch issues early\n */\n\nimport { createEnv } from '@t3-oss/env-nextjs'\nimport { z } from 'zod'\n\nexport const env = createEnv({\n  /**\n   * Server-side environment variables\n   * These are only available on the server and never exposed to the client\n   */\n  server: {\n    // ===================================================\n    // Node Environment\n    // ===================================================\n    NODE_ENV: z.enum(['development', 'production', 'test']).default('development'),\n\n    // ===================================================\n    // Database Configuration\n    // ===================================================\n    DATABASE_URL: z.string().url().describe('PostgreSQL database connection string'),\n\n    // ===================================================\n    // Authentication (better-auth)\n    // ===================================================\n    BETTER_AUTH_SECRET: z.string().min(32).describe('Auth secret key for session encryption'),\n    BETTER_AUTH_URL: z\n      .string()\n      .url()\n      .default('http://localhost:3000')\n      .describe('Application base URL'),\n    AUTH_SECRET: z\n      .string()\n      .min(1)\n      .optional()\n      .describe('Deprecated: Use BETTER_AUTH_SECRET instead'),\n    AUTH_TRUST_HOST: z\n      .string()\n      .transform((val) => val === 'true')\n      .optional(),\n    AUTH_URL: z.string().url().optional().describe('Deprecated: Use BETTER_AUTH_URL instead'),\n\n    // ===================================================\n    // Email Configuration (SMTP)\n    // ===================================================\n    SMTP_HOST: z.string().min(1).describe('SMTP server hostname'),\n    SMTP_PORT: z.coerce.number().int().min(1).max(65535).describe('SMTP server port'),\n    SMTP_USERNAME: z.string().email().describe('SMTP authentication username'),\n    SMTP_PASSWORD: z.string().min(1).describe('SMTP authentication password'),\n\n    // ===================================================\n    // Twilio Configuration (SMS & Phone Verification)\n    // ===================================================\n    TWILIO_ACCOUNT_SID: z.string().min(1).describe('Twilio Account SID'),\n    TWILIO_AUTH_TOKEN: z.string().min(1).describe('Twilio Auth Token'),\n    TWILIO_VERIFY_SERVICE_SID: z.string().min(1).describe('Twilio Verify Service SID'),\n    TWILIO_PHONE_NUMBER: z\n      .string()\n      .regex(/^\\+\\d{1,15}$/, 'Must be E.164 format')\n      .describe('Twilio phone number in E.164 format'),\n\n    // ===================================================\n    // PortOne Payment Configuration\n    // ===================================================\n    PORTONE_API_SECRET: z.string().min(1).describe('PortOne API secret for partner settlement'),\n    PORTONE_CHANNEL_KEY: z.string().min(1).describe('PortOne channel key'),\n    PORTONE_STORE_ID: z.string().min(1).describe('PortOne store ID'),\n    PORTONE_API_BASE_URL: z.string().url().default('https://api.portone.io'),\n    PORTONE_WEBHOOK_SECRET: z\n      .string()\n      .min(1)\n      .optional()\n      .describe('PortOne webhook secret for signature verification'),\n    PORTONE_PLATFORM_ENABLED: z\n      .string()\n      .transform((val) => val === 'true')\n      .optional(),\n    PORTONE_DEFAULT_CONTRACT_ID: z.string().optional(),\n\n    // ===================================================\n    // Settlement Configuration\n    // ===================================================\n    SETTLEMENT_COMMISSION_RATE: z.coerce.number().min(0).max(100).default(10),\n\n    // ===================================================\n    // Google Cloud Storage (GCS)\n    // ===================================================\n    GCS_PROJECT_ID: z.string().min(1).describe('Google Cloud project ID'),\n    GOOGLE_APPLICATION_CREDENTIALS: z\n      .string()\n      .optional()\n      .describe('Path to service account JSON key (local dev only)'),\n    GCS_APP_BUCKET: z.string().min(1).describe('GCS bucket name for application files'),\n\n    // ===================================================\n    // Kakao API (Server-side)\n    // ===================================================\n    KAKAO_REST_API_KEY: z.string().min(1).describe('Kakao REST API key for geocoding'),\n\n    // ===================================================\n    // Firebase Configuration (Push Notifications)\n    // ===================================================\n    FIREBASE_PROJECT_ID: z.string().optional(),\n    FIREBASE_CLIENT_EMAIL: z.string().email().optional(),\n    FIREBASE_PRIVATE_KEY: z.string().optional(),\n\n    // ===================================================\n    // Expo Push Notifications\n    // ===================================================\n    EXPO_ACCESS_TOKEN: z.string().optional().describe('Expo access token for push notifications'),\n\n    // ===================================================\n    // JIRA Error Reporting\n    // ===================================================\n    JIRA_DOMAIN: z.string().optional().describe('JIRA domain for error reporting'),\n    JIRA_EMAIL: z.string().email().optional().describe('JIRA authentication email'),\n    JIRA_API_TOKEN: z.string().optional().describe('JIRA API token'),\n    JIRA_PROJECT_KEY: z.string().optional().describe('JIRA project key'),\n\n    // ===================================================\n    // Winston Logging Configuration\n    // ===================================================\n    LOG_LEVEL: z.enum(['error', 'warn', 'info', 'debug']).default('info'),\n    LOG_DIR: z.string().default('logs'),\n    LOG_MAX_SIZE: z.string().default('20m').describe('Maximum log file size before rotation'),\n    LOG_MAX_FILES: z.string().default('14d').describe('Keep logs for specified duration'),\n\n    // ===================================================\n    // BullMQ Queue Configuration (Optional)\n    // ===================================================\n    BULLMQ_NOTIFICATION_CONCURRENCY: z.coerce.number().int().min(1).optional(),\n    BULLMQ_EMAIL_CONCURRENCY: z.coerce.number().int().min(1).optional(),\n    BULLMQ_CLEANUP_CONCURRENCY: z.coerce.number().int().min(1).optional(),\n    BULLMQ_EMAIL_RATE_LIMIT: z.coerce.number().int().min(1).optional(),\n    BULLMQ_NOTIFICATION_RATE_LIMIT: z.coerce.number().int().min(1).optional(),\n    BULLMQ_MAX_COMPLETED_JOBS: z.coerce.number().int().min(1).optional(),\n    BULLMQ_MAX_FAILED_JOBS: z.coerce.number().int().min(1).optional(),\n    BULLMQ_EMAIL_MAX_ATTEMPTS: z.coerce.number().int().min(1).optional(),\n    BULLMQ_EMAIL_RETRY_DELAY: z.coerce.number().int().min(0).optional(),\n    BULLMQ_CLEANUP_MAX_ATTEMPTS: z.coerce.number().int().min(1).optional(),\n    BULLMQ_CLEANUP_RETRY_DELAY: z.coerce.number().int().min(0).optional(),\n    BULLMQ_ENABLE_LEADER_ELECTION: z\n      .string()\n      .transform((val) => val === 'true')\n      .optional(),\n    BULLMQ_LEADER_TTL: z.coerce.number().int().min(1000).optional(),\n    BULLMQ_LEADER_HEARTBEAT: z.coerce.number().int().min(1000).optional(),\n    BULLMQ_LEADER_RETRY_INTERVAL: z.coerce.number().int().min(1000).optional(),\n    BULLMQ_VERBOSE_LOGGING: z\n      .string()\n      .transform((val) => val === 'true')\n      .optional(),\n    BULLMQ_ENABLE_METRICS: z\n      .string()\n      .transform((val) => val === 'true')\n      .optional(),\n\n    // ===================================================\n    // OAuth Providers (Optional)\n    // ===================================================\n    GOOGLE_CLIENT_ID: z.string().optional().describe('Google OAuth client ID'),\n    GOOGLE_CLIENT_SECRET: z.string().optional().describe('Google OAuth client secret'),\n\n    // ===================================================\n    // API Configuration\n    // ===================================================\n    API_BASE_URL: z.string().url().optional().describe('Backend API base URL'),\n\n    // ===================================================\n    // Webhook & Security Configuration\n    // ===================================================\n    PORTONE_WEBHOOK_ALLOWED_IPS: z\n      .string()\n      .optional()\n      .default('52.78.100.19,52.78.48.223,52.78.5.241,127.0.0.1,::1')\n      .describe('Comma-separated list of allowed IPs for PortOne webhooks'),\n\n    // ===================================================\n    // Scheduled Jobs & Cron\n    // ===================================================\n    CRON_SECRET: z\n      .string()\n      .optional()\n      .describe('Secret for authenticating cron job requests - REQUIRED in production'),\n    SCHEDULER_API_KEY: z\n      .string()\n      .optional()\n      .describe('API key for notification scheduler endpoints'),\n    QUEUE_HEALTH_TOKEN: z\n      .string()\n      .optional()\n      .describe('Authentication token for queue health check endpoint'),\n\n    // ===================================================\n    // Build & Runtime\n    // ===================================================\n    NEXT_PHASE: z.string().optional().describe('Next.js build phase identifier'),\n    npm_package_version: z.string().optional().default('1.0.0').describe('Application version'),\n  },\n\n  /**\n   * Client-side environment variables (NEXT_PUBLIC_*)\n   * These are exposed to the browser and must be prefixed with NEXT_PUBLIC_\n   */\n  client: {\n    // ===================================================\n    // Kakao Map API (Client-side)\n    // ===================================================\n    NEXT_PUBLIC_KAKAO_MAP_KEY: z.string().optional().describe('Kakao Map JavaScript API key'),\n\n    // ===================================================\n    // PortOne (Client-side)\n    // ===================================================\n    // Optional for runtime injection via /api/env endpoint\n    NEXT_PUBLIC_PORTONE_CHANNEL_KEY: z\n      .string()\n      .optional()\n      .describe('PortOne channel key for checkout (runtime injected)'),\n    NEXT_PUBLIC_PORTONE_STORE_ID: z\n      .string()\n      .optional()\n      .describe('PortOne store ID for checkout (runtime injected)'),\n\n    // ===================================================\n    // Customer Service\n    // ===================================================\n    NEXT_PUBLIC_CUSTOMER_SERVICE_PHONE: z\n      .string()\n      .default('+82-10-4043-9775')\n      .describe('Customer service phone number'),\n    NEXT_PUBLIC_CUSTOMER_SERVICE_EMAIL: z\n      .string()\n      .email()\n      .default('koobg@mimisalon.pet')\n      .describe('Customer service email'),\n\n    // ===================================================\n    // Client-side Logging\n    // ===================================================\n    NEXT_PUBLIC_LOGGING_ENABLED: z\n      .string()\n      .default('true')\n      .transform((val) => val === 'true')\n      .describe('Enable client-side error logging'),\n  },\n\n  /**\n   * Runtime environment variable mapping\n   * You can't destruct `process.env` as a regular object in Next.js edge runtime\n   * so we need to manually map each variable\n   */\n  runtimeEnv: {\n    // Node Environment\n    NODE_ENV: process.env.NODE_ENV,\n\n    // Database\n    DATABASE_URL: process.env.DATABASE_URL,\n\n    // Authentication\n    BETTER_AUTH_SECRET: process.env.BETTER_AUTH_SECRET,\n    BETTER_AUTH_URL: process.env.BETTER_AUTH_URL,\n    AUTH_SECRET: process.env.AUTH_SECRET,\n    AUTH_TRUST_HOST: process.env.AUTH_TRUST_HOST,\n    AUTH_URL: process.env.AUTH_URL,\n\n    // Email\n    SMTP_HOST: process.env.SMTP_HOST,\n    SMTP_PORT: process.env.SMTP_PORT,\n    SMTP_USERNAME: process.env.SMTP_USERNAME,\n    SMTP_PASSWORD: process.env.SMTP_PASSWORD,\n\n    // Twilio\n    TWILIO_ACCOUNT_SID: process.env.TWILIO_ACCOUNT_SID,\n    TWILIO_AUTH_TOKEN: process.env.TWILIO_AUTH_TOKEN,\n    TWILIO_VERIFY_SERVICE_SID: process.env.TWILIO_VERIFY_SERVICE_SID,\n    TWILIO_PHONE_NUMBER: process.env.TWILIO_PHONE_NUMBER,\n\n    // PortOne\n    PORTONE_API_SECRET: process.env.PORTONE_API_SECRET,\n    PORTONE_CHANNEL_KEY: process.env.PORTONE_CHANNEL_KEY,\n    PORTONE_STORE_ID: process.env.PORTONE_STORE_ID,\n    PORTONE_API_BASE_URL: process.env.PORTONE_API_BASE_URL,\n    PORTONE_WEBHOOK_SECRET: process.env.PORTONE_WEBHOOK_SECRET,\n    PORTONE_PLATFORM_ENABLED: process.env.PORTONE_PLATFORM_ENABLED,\n    PORTONE_DEFAULT_CONTRACT_ID: process.env.PORTONE_DEFAULT_CONTRACT_ID,\n    NEXT_PUBLIC_PORTONE_CHANNEL_KEY: process.env.NEXT_PUBLIC_PORTONE_CHANNEL_KEY,\n    NEXT_PUBLIC_PORTONE_STORE_ID: process.env.NEXT_PUBLIC_PORTONE_STORE_ID,\n\n    // Settlement\n    SETTLEMENT_COMMISSION_RATE: process.env.SETTLEMENT_COMMISSION_RATE,\n\n    // Google Cloud Storage\n    GCS_PROJECT_ID: process.env.GCS_PROJECT_ID,\n    GOOGLE_APPLICATION_CREDENTIALS: process.env.GOOGLE_APPLICATION_CREDENTIALS,\n    GCS_APP_BUCKET: process.env.GCS_APP_BUCKET,\n\n    // Kakao\n    KAKAO_REST_API_KEY: process.env.KAKAO_REST_API_KEY,\n    NEXT_PUBLIC_KAKAO_MAP_KEY: process.env.NEXT_PUBLIC_KAKAO_MAP_KEY,\n\n    // Firebase\n    FIREBASE_PROJECT_ID: process.env.FIREBASE_PROJECT_ID,\n    FIREBASE_CLIENT_EMAIL: process.env.FIREBASE_CLIENT_EMAIL,\n    FIREBASE_PRIVATE_KEY: process.env.FIREBASE_PRIVATE_KEY,\n\n    // Expo\n    EXPO_ACCESS_TOKEN: process.env.EXPO_ACCESS_TOKEN,\n\n    // JIRA\n    JIRA_DOMAIN: process.env.JIRA_DOMAIN,\n    JIRA_EMAIL: process.env.JIRA_EMAIL,\n    JIRA_API_TOKEN: process.env.JIRA_API_TOKEN,\n    JIRA_PROJECT_KEY: process.env.JIRA_PROJECT_KEY,\n\n    // Logging\n    LOG_LEVEL: process.env.LOG_LEVEL,\n    LOG_DIR: process.env.LOG_DIR,\n    LOG_MAX_SIZE: process.env.LOG_MAX_SIZE,\n    LOG_MAX_FILES: process.env.LOG_MAX_FILES,\n    NEXT_PUBLIC_LOGGING_ENABLED: process.env.NEXT_PUBLIC_LOGGING_ENABLED,\n\n    // BullMQ\n    BULLMQ_NOTIFICATION_CONCURRENCY: process.env.BULLMQ_NOTIFICATION_CONCURRENCY,\n    BULLMQ_EMAIL_CONCURRENCY: process.env.BULLMQ_EMAIL_CONCURRENCY,\n    BULLMQ_CLEANUP_CONCURRENCY: process.env.BULLMQ_CLEANUP_CONCURRENCY,\n    BULLMQ_EMAIL_RATE_LIMIT: process.env.BULLMQ_EMAIL_RATE_LIMIT,\n    BULLMQ_NOTIFICATION_RATE_LIMIT: process.env.BULLMQ_NOTIFICATION_RATE_LIMIT,\n    BULLMQ_MAX_COMPLETED_JOBS: process.env.BULLMQ_MAX_COMPLETED_JOBS,\n    BULLMQ_MAX_FAILED_JOBS: process.env.BULLMQ_MAX_FAILED_JOBS,\n    BULLMQ_EMAIL_MAX_ATTEMPTS: process.env.BULLMQ_EMAIL_MAX_ATTEMPTS,\n    BULLMQ_EMAIL_RETRY_DELAY: process.env.BULLMQ_EMAIL_RETRY_DELAY,\n    BULLMQ_CLEANUP_MAX_ATTEMPTS: process.env.BULLMQ_CLEANUP_MAX_ATTEMPTS,\n    BULLMQ_CLEANUP_RETRY_DELAY: process.env.BULLMQ_CLEANUP_RETRY_DELAY,\n    BULLMQ_ENABLE_LEADER_ELECTION: process.env.BULLMQ_ENABLE_LEADER_ELECTION,\n    BULLMQ_LEADER_TTL: process.env.BULLMQ_LEADER_TTL,\n    BULLMQ_LEADER_HEARTBEAT: process.env.BULLMQ_LEADER_HEARTBEAT,\n    BULLMQ_LEADER_RETRY_INTERVAL: process.env.BULLMQ_LEADER_RETRY_INTERVAL,\n    BULLMQ_VERBOSE_LOGGING: process.env.BULLMQ_VERBOSE_LOGGING,\n    BULLMQ_ENABLE_METRICS: process.env.BULLMQ_ENABLE_METRICS,\n\n    // OAuth\n    GOOGLE_CLIENT_ID: process.env.GOOGLE_CLIENT_ID,\n    GOOGLE_CLIENT_SECRET: process.env.GOOGLE_CLIENT_SECRET,\n\n    // API\n    API_BASE_URL: process.env.API_BASE_URL,\n\n    // Webhook & Security\n    PORTONE_WEBHOOK_ALLOWED_IPS: process.env.PORTONE_WEBHOOK_ALLOWED_IPS,\n\n    // Scheduled Jobs & Cron\n    CRON_SECRET: process.env.CRON_SECRET,\n    SCHEDULER_API_KEY: process.env.SCHEDULER_API_KEY,\n    QUEUE_HEALTH_TOKEN: process.env.QUEUE_HEALTH_TOKEN,\n\n    // Build & Runtime\n    NEXT_PHASE: process.env.NEXT_PHASE,\n    npm_package_version: process.env.npm_package_version,\n\n    // Customer Service\n    NEXT_PUBLIC_CUSTOMER_SERVICE_PHONE: process.env.NEXT_PUBLIC_CUSTOMER_SERVICE_PHONE,\n    NEXT_PUBLIC_CUSTOMER_SERVICE_EMAIL: process.env.NEXT_PUBLIC_CUSTOMER_SERVICE_EMAIL,\n  },\n\n  /**\n   * Skip validation during build\n   * This allows the build to succeed even if some optional variables are missing\n   */\n  skipValidation: !!process.env.SKIP_ENV_VALIDATION,\n\n  /**\n   * Emit validation errors with helpful messages\n   */\n  emptyStringAsUndefined: true,\n})\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 485, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/lib/auth.ts"],"sourcesContent":["import { betterAuth } from 'better-auth'\nimport type { BetterAuthOptions } from 'better-auth'\nimport { prismaAdapter } from 'better-auth/adapters/prisma'\nimport { PrismaClient } from '@mimisalon/shared'\nimport { admin, emailOTP, phoneNumber } from 'better-auth/plugins'\nimport bcrypt from 'bcryptjs'\nimport { env } from './env'\n\nconst prisma = new PrismaClient()\n\n/**\n * Better Auth Configuration\n *\n * Replaces NextAuth.js with better-auth for improved type safety,\n * plugin ecosystem, and better developer experience.\n *\n * Features:\n * - Email/Password authentication with bcrypt\n * - Role-based access control (CUSTOMER, GROOMER, ADMIN)\n * - Prisma adapter for PostgreSQL\n * - Session management with secure cookies\n * - Admin plugin for role management\n */\nconst auth = betterAuth({\n  // Database configuration with Prisma adapter\n  database: prismaAdapter(prisma, {\n    provider: 'postgresql',\n  }),\n\n  // App configuration\n  baseURL: env.BETTER_AUTH_URL,\n  basePath: '/api/auth',\n  secret: env.BETTER_AUTH_SECRET,\n\n  // Trust host in production - include both staging and production domains\n  trustedOrigins: [\n    env.BETTER_AUTH_URL,\n    'http://localhost:3000',\n    'https://mimisalon.pet',\n    'https://staging.mimisalon.pet',\n  ],\n\n  // Email and password authentication\n  emailAndPassword: {\n    enabled: true,\n    requireEmailVerification: true, // Require email verification for signup\n    sendResetPassword: async ({ user, url }) => {\n      // Import email service dynamically to avoid build-time issues\n      const { sendEmail } = await import('@/lib/email')\n      const { generatePasswordResetTemplate } = await import('@/features/templates')\n\n      const html = await generatePasswordResetTemplate(user.name || user.email, url)\n\n      await sendEmail({\n        to: user.email,\n        subject: '비밀번호 재설정 - 미미살롱펫',\n        html,\n      })\n    },\n    // Custom password hashing and verification (bcrypt)\n    password: {\n      hash: async (password: string) => {\n        return await bcrypt.hash(password, 10)\n      },\n      verify: async ({ hash, password }: { hash: string; password: string }) => {\n        return bcrypt.compare(password, hash)\n      },\n    },\n  },\n\n  // Email verification configuration\n  emailVerification: {\n    sendVerificationEmail: async ({ user, url }) => {\n      // Import email service dynamically\n      const { sendEmail } = await import('@/lib/email')\n      const { generateEmailVerificationTemplate } = await import('@/features/templates')\n\n      const html = await generateEmailVerificationTemplate(user.name || user.email, url)\n\n      await sendEmail({\n        to: user.email,\n        subject: '이메일 인증 - 미미살롱펫',\n        html,\n      })\n    },\n    sendOnSignUp: true, // Send verification email on signup\n    autoSignInAfterVerification: true, // Auto sign-in after email verification\n  },\n\n  // Session configuration\n  session: {\n    expiresIn: 60 * 60 * 24 * 30, // 30 days\n    updateAge: 60 * 60 * 24, // 24 hours\n    cookieCache: {\n      enabled: true,\n      maxAge: 60 * 5, // 5 minutes\n    },\n  },\n\n  // Account linking configuration\n  account: {\n    accountLinking: {\n      enabled: true,\n      trustedProviders: ['credential'],\n    },\n  },\n\n  // Social providers configuration (add as needed)\n  socialProviders: {\n    // Example: Add Google OAuth\n    // google: {\n    //   clientId: process.env.GOOGLE_CLIENT_ID as string,\n    //   clientSecret: process.env.GOOGLE_CLIENT_SECRET as string,\n    // },\n  },\n\n  // Plugins for extended functionality\n  plugins: [\n    // Admin plugin for role-based access control\n    admin({\n      impersonationSessionDuration: 60 * 60, // 1 hour\n    }),\n\n    // Email OTP plugin for flexible verification\n    // Supports: email verification during signup, sign-in OTP, password reset OTP\n    // OTP is sent when client calls sendVerificationEmail() method\n    emailOTP({\n      // Send OTP via email for various verification scenarios\n      async sendVerificationOTP({ email, otp, type }) {\n        console.log('Sending OTP to:', email, 'with code:', otp)\n        if (process.env.NODE_ENV === 'production') {\n          // Import services dynamically\n          const { sendEmail } = await import('@/lib/email')\n          const { generateOTPEmailTemplate } = await import('@/features/templates')\n\n          // Generate custom OTP email template\n          const html = await generateOTPEmailTemplate(email, otp, type)\n\n          await sendEmail({\n            to: email,\n            subject:\n              type === 'sign-in'\n                ? '로그인 인증코드 - 미미살롱펫'\n                : type === 'email-verification'\n                  ? '이메일 인증코드 - 미미살롱펫'\n                  : '비밀번호 재설정 인증코드 - 미미살롱펫',\n            html,\n          })\n        }\n      },\n      otpLength: 6, // 6-digit OTP code\n      expiresIn: 600, // 10 minutes validity\n      disableSignUp: false, // Enable signup via email OTP\n      allowedAttempts: 5, // Maximum OTP verification attempts before invalidation\n    }),\n\n    // Phone Number plugin for SMS authentication\n    // Supports: phone verification during signup, sign-in OTP, password reset via SMS\n    // OTP is sent when client calls sendVerificationOtp() method\n    phoneNumber({\n      // Send OTP via SMS using Twilio\n      async sendOTP({ phoneNumber, code }, request) {\n        console.log('Sending SMS OTP to:', phoneNumber, 'with code:', code)\n\n        // Import Twilio service dynamically\n        if (process.env.NODE_ENV === 'production') {\n          const { sendSMSCode } = await import('./twilio')\n\n          const result = await sendSMSCode(phoneNumber, code)\n\n          if (!result.success) {\n            throw new Error(result.error || 'Failed to send SMS')\n          }\n        }\n\n        console.log('SMS OTP sent successfully to:', phoneNumber)\n      },\n      otpLength: 6, // 6-digit OTP code\n      expiresIn: 600, // 10 minutes validity\n      allowedAttempts: 3, // Maximum OTP verification attempts before invalidation\n    }),\n  ],\n\n  // Advanced options\n  advanced: {\n    database: {\n      generateId: () => {\n        // Use cuid for ID generation (compatible with existing schema)\n        return crypto.randomUUID()\n      },\n    },\n  },\n} satisfies BetterAuthOptions)\nexport default auth\n\n/**\n * Type exports for better TypeScript inference\n */\nexport type Session = typeof auth.$Infer.Session.session\nexport type User = typeof auth.$Infer.Session.user\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 649, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/MacBook-Dev/package/mimisalon-pet-web/src/app/api/auth/%5B...all%5D/route.ts"],"sourcesContent":["import auth from '@/lib/auth';\nimport { toNextJsHandler } from 'better-auth/next-js';\n\n/**\n * Better Auth API Route Handler\n *\n * Handles all authentication requests at /api/auth/*\n * Replaces the previous [...nextauth]/route.ts\n *\n * Supported endpoints:\n * - POST /api/auth/sign-in/email - Email/password sign in\n * - POST /api/auth/sign-up/email - Email/password sign up\n * - POST /api/auth/sign-out - Sign out\n * - GET /api/auth/session - Get current session\n * - And more...\n */\nexport const { GET, POST } = toNextJsHandler(auth);\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAeO,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,IAAA,0LAAe,EAAC,+HAAI","debugId":null}}]
}