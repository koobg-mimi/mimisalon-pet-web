module.exports=[630176,a=>{"use strict";var b=a.i(187924),c=a.i(256711),d=a.i(302491),e=a.i(572131),f=a.i(50944),g=a.i(571987),h=a.i(433217),i=a.i(370025),j=a.i(937927),k=a.i(591119),l=a.i(699570),m=a.i(786304),n=a.i(205138),o=a.i(730769),p=a.i(558020),q=a.i(130748),r=a.i(275564),s=a.i(485155),t=a.i(854251),u=a.i(839982),v=a.i(988552);let w=(0,a.i(170106).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var x=a.i(301378);function y({params:a}){var y;let z=(0,e.use)(a),A=(0,f.useRouter)(),B=(0,j.useQueryClient)(),{data:C,isLoading:D,error:E}=(0,h.useQuery)({queryKey:["groomer","bookings",z.id],queryFn:async()=>{let a=await fetch(`/api/groomer/bookings/${z.id}`);if(!a.ok){if(404===a.status)throw Error("Booking not found");throw Error("Failed to fetch booking details")}return a.json()}}),F=async(a,b)=>{try{console.log("Updating service:",a,b)}catch(a){console.error("Error updating service:",a)}},G=(0,i.useMutation)({mutationFn:async()=>{let a=await fetch(`/api/groomer/bookings/${z.id}/complete`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error((await a.json()).error||"완료 처리에 실패했습니다");return a.json()},onSuccess:()=>{B.invalidateQueries({queryKey:["groomer","bookings",z.id]}),B.invalidateQueries({queryKey:["groomer","bookings"]}),alert("모든 서비스가 완료되었습니다")},onError:a=>{console.error("Complete all services error:",a),alert(a.message||"완료 처리 중 오류가 발생했습니다")}});return D?(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-4 text-center",children:[(0,b.jsx)(n.LoadingSpinner,{size:"lg"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"예약 정보를 불러오는 중..."})]})})})}):E||!C?(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-4 text-center",children:[(0,b.jsx)(s.AlertCircleIcon,{className:"text-muted-foreground mx-auto h-12 w-12"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"예약을 찾을 수 없습니다"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:E instanceof Error?E.message:"요청하신 예약 정보를 찾을 수 없습니다."}),(0,b.jsx)(l.Button,{onClick:()=>A.push("/groomer/dashboard/bookings"),children:"예약 목록으로 돌아가기"})]})})})}):(0,b.jsx)("div",{className:"container mx-auto px-2 py-4 sm:px-4 sm:py-8",children:(0,b.jsxs)("div",{className:"mx-auto max-w-4xl space-y-4 sm:space-y-6",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center space-x-2 sm:mb-6 sm:space-x-4",children:[(0,b.jsx)(l.Button,{variant:"ghost",onClick:()=>A.back(),className:"p-1.5 sm:p-2",children:(0,b.jsx)(v.ArrowLeftIcon,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("h1",{className:"truncate text-xl font-bold sm:text-2xl",children:"예약 관리"}),(0,b.jsxs)("p",{className:"text-muted-foreground truncate text-sm sm:text-base",children:["예약 번호: #",C.id]})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)(k.CardTitle,{className:"flex items-center space-x-2 text-lg sm:space-x-3 sm:text-xl",children:[(0,b.jsx)(o.CalendarIcon,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,b.jsx)("span",{children:"예약 정보"})]}),(0,b.jsx)(m.Badge,{variant:function(a){switch(a){case"GROOMER_CONFIRM":case"CONFIRMED":case"WORK_IN_PROGRESS":case"IN_PROGRESS":return"default";case"SERVICE_COMPLETED":case"COMPLETED":return"success";case"SERVICE_CANCELLED":case"BOOKING_FAILED":case"CANCELLED":return"destructive";default:return"secondary"}}(C.status),className:"w-fit",children:{FIRST_PAYMENT_PENDING:"결제 대기",FIRST_PAYMENT_COMPLETE:"확인 대기",GROOMER_CONFIRM_PENDING:"확인 대기",GROOMER_CONFIRM:"예약 확정",WORK_IN_PROGRESS:"진행 중",SERVICE_COMPLETED:"완료",SERVICE_CANCELLED:"취소",BOOKING_FAILED:"예약 실패",CONFIRMED:"예약 확정",IN_PROGRESS:"진행 중",COMPLETED:"완료",CANCELLED:"취소",PENDING:"대기"}[y=C.status]||y})]})}),(0,b.jsx)(k.CardContent,{className:"space-y-4 p-4 pt-0 sm:space-y-6 sm:p-6 sm:pt-0",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-sm",children:"예약 날짜"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[(0,b.jsx)(o.CalendarIcon,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"font-medium",children:C.appointmentDate})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-sm",children:"예약 시간"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[(0,b.jsx)(p.ClockIcon,{className:"h-4 w-4"}),(0,b.jsxs)("span",{className:"font-medium",children:[C.startTime," - ",C.endTime]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-sm",children:"총 서비스 금액"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[(0,b.jsx)(u.CreditCardIcon,{className:"h-4 w-4"}),(0,b.jsxs)("span",{className:"text-lg font-medium",children:[C.totalAmount.toLocaleString("ko-KR"),"원"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-sm",children:"결제 상태"}),(0,b.jsx)(m.Badge,{variant:"PAID"===C.paymentStatus||"COMPLETED"===C.paymentStatus?"success":"secondary",className:"mt-1",children:"PAID"===C.paymentStatus||"COMPLETED"===C.paymentStatus?"결제 완료":"결제 대기"})]})]})]})})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{className:"p-4 sm:p-6",children:(0,b.jsxs)(k.CardTitle,{className:"flex items-center space-x-2 text-lg sm:space-x-3 sm:text-xl",children:[(0,b.jsx)(q.UserIcon,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,b.jsx)("span",{children:"예약 상세 정보"})]})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4 p-4 pt-0 sm:space-y-6 sm:p-6 sm:pt-0",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"mb-3 font-medium",children:"고객 정보"}),C.customer?(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"이름:"})," ",C.customer.name]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"연락처:"})," ",C.customer.phone]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"이메일:"})," ",C.customer.email]})]}):(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"고객 정보가 없습니다"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"mb-3 font-medium",children:"담당 미용사"}),C.groomer?(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[C.groomer.photoUrl?(0,b.jsx)("div",{className:"relative h-12 w-12 flex-shrink-0",children:(0,b.jsx)(g.default,{src:C.groomer.photoUrl,alt:C.groomer.name,fill:!0,className:"rounded-full object-cover",unoptimized:!0})}):(0,b.jsx)("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-gray-200",children:(0,b.jsx)(q.UserIcon,{className:"h-6 w-6 text-gray-400"})}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"이름:"})," ",C.groomer.name]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"연락처:"})," ",C.groomer.phone||"-"]}),C.groomer.experience&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"경력:"})," ",C.groomer.experience]})]})]}):(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"아직 미용사가 배정되지 않았습니다"})]})]}),C.location&&(0,b.jsxs)("div",{className:"col-span-1 mt-4 sm:col-span-2 sm:mt-6",children:[(0,b.jsx)("h4",{className:"mb-3 text-base font-medium sm:text-lg",children:"서비스 주소"}),(0,b.jsx)("div",{className:"rounded-lg border bg-gray-50 p-3 sm:p-4 dark:bg-gray-900",children:(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(x.MapPinIcon,{className:"text-muted-foreground mt-0.5 h-5 w-5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"text-sm sm:text-base",children:C.location.address}),(0,b.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs sm:text-sm",children:["우편번호: ",C.location.zipCode]})]})]})})]}),(0,b.jsxs)("div",{className:"col-span-1 mt-4 sm:col-span-2 sm:mt-6",children:[(0,b.jsx)("h4",{className:"mb-3 text-base font-medium sm:text-lg",children:"반려동물 정보"}),(0,b.jsx)("div",{className:"space-y-3 sm:space-y-4",children:C.pets.map(a=>(0,b.jsx)("div",{className:"rounded-lg border p-3 sm:p-4",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[a.photoUrl?(0,b.jsx)("div",{className:"relative h-12 w-12 flex-shrink-0 sm:h-16 sm:w-16",children:(0,b.jsx)(g.default,{src:a.photoUrl,alt:a.name,fill:!0,className:"rounded-full object-cover",unoptimized:!0})}):(0,b.jsx)("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-gray-200 sm:h-16 sm:w-16",children:(0,b.jsx)(q.UserIcon,{className:"h-6 w-6 text-gray-400 sm:h-8 sm:w-8"})}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("h3",{className:"truncate text-base font-semibold sm:text-lg",children:a.name}),(0,b.jsxs)("p",{className:"text-muted-foreground text-sm sm:text-base",children:[(0,b.jsxs)("span",{className:"inline-block",children:[a.species," • ",a.breed]}),(0,b.jsxs)("span",{className:"ml-1 inline-block",children:["• ",a.weight,"kg • ",a.age,"세"]})]})]})]})},a.id))})]})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{className:"p-4 sm:p-6",children:(0,b.jsxs)(k.CardTitle,{className:"flex items-center space-x-2 text-lg sm:space-x-3 sm:text-xl",children:[(0,b.jsx)(r.ScissorsIcon,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,b.jsx)("span",{children:"서비스 진행 관리"})]})}),(0,b.jsx)(k.CardContent,{className:"p-4 pt-0 sm:p-6 sm:pt-0",children:(0,b.jsx)("div",{className:"space-y-4 sm:space-y-6",children:C.pets.map(a=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"mb-2 text-base font-medium sm:mb-3 sm:text-lg",children:[a.name,"의 서비스"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[a.services.map(a=>(0,b.jsx)("div",{className:"rounded-lg border p-3 sm:p-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("h4",{className:"text-sm font-medium sm:text-base",children:a.name}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs sm:text-sm",children:a.description}),(0,b.jsxs)("div",{className:"text-muted-foreground mt-2 flex flex-wrap items-center gap-3 text-xs sm:gap-4 sm:text-sm",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(p.ClockIcon,{className:"h-3 w-3"}),a.duration,"분"]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(u.CreditCardIcon,{className:"h-3 w-3"}),a.price.toLocaleString(),"원"]})]})]}),"SERVICE_COMPLETED"!==C.status&&"COMPLETED"!==C.status&&(0,b.jsxs)("div",{className:"mt-3 flex flex-row gap-2 sm:mt-0 sm:flex-col",children:[("PENDING"===a.status||"GROOMER_CONFIRM"===a.status||"GROOMER_CONFIRM_PENDING"===a.status)&&(0,b.jsxs)(l.Button,{size:"sm",onClick:()=>F(a.id,"IN_PROGRESS"),className:"flex-1 text-xs sm:flex-initial sm:text-sm",children:[(0,b.jsx)(w,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),"시작"]}),("IN_PROGRESS"===a.status||"WORK_IN_PROGRESS"===a.status)&&(0,b.jsxs)(l.Button,{size:"sm",onClick:()=>F(a.id,"COMPLETED"),className:"flex-1 text-xs sm:flex-initial sm:text-sm",children:[(0,b.jsx)(t.CheckCircleIcon,{className:"mr-1 h-3 w-3 sm:mr-2 sm:h-4 sm:w-4"}),"완료"]})]})]})},a.id)),a.options&&a.options.length>0&&(0,b.jsxs)("div",{className:"mt-3 rounded-lg border border-dashed p-3 sm:p-4",children:[(0,b.jsx)("h5",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"추가 옵션"}),(0,b.jsx)("div",{className:"space-y-2",children:a.options.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("span",{className:"text-foreground",children:["+ ",a.name]}),(0,b.jsxs)("span",{className:"font-medium",children:[a.price.toLocaleString(),"원"]})]},c))})]})]})]},a.id))})})]}),"SERVICE_COMPLETED"===C.status||"COMPLETED"===C.status?(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"space-y-2 text-center",children:[(0,b.jsx)(t.CheckCircleIcon,{className:"mx-auto h-10 w-10 text-green-500 sm:h-12 sm:w-12"}),(0,b.jsx)("h3",{className:"text-base font-semibold text-green-700 sm:text-lg",children:"서비스가 완료되었습니다"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:C.actualEndTime?`완료 시간: ${(0,c.format)(new Date(C.actualEndTime),"yyyy-MM-dd HH:mm:ss",{locale:d.ko})}`:"모든 서비스가 성공적으로 완료되었습니다"})]})})}):(0,b.jsx)("div",{className:"flex flex-col gap-3 sm:flex-row sm:gap-4",children:(0,b.jsx)(l.Button,{className:"w-full flex-1 sm:w-auto",onClick:()=>{confirm("모든 서비스를 완료 처리하시겠습니까?")&&G.mutate()},disabled:"SERVICE_CANCELLED"===C.status||"CANCELLED"===C.status,children:"모든 서비스 완료"})})]})})}a.s(["default",()=>y],630176)}];

//# sourceMappingURL=src_app_groomer_dashboard_bookings_%5Bid%5D_page_tsx_8dd19e68._.js.map