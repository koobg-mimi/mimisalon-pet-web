module.exports=[168370,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(571987),f=a.i(238246),g=a.i(433217),h=a.i(591119),i=a.i(699570),j=a.i(786304),k=a.i(505084),l=a.i(205138),m=a.i(730769),n=a.i(558020),o=a.i(130748),p=a.i(275564),q=a.i(254688),r=a.i(931105),s=a.i(485155),t=a.i(854251),u=a.i(390844),v=a.i(839982),w=a.i(988552),x=a.i(256711),y=a.i(302491);function z({params:a}){let z,A,B=(0,c.use)(a),C=(0,d.useRouter)(),D=(0,d.useSearchParams)(),[E,F]=(0,c.useState)(!1),{data:G,isLoading:H,isError:I}=(0,g.useQuery)({queryKey:["customer","booking",B.id],queryFn:async()=>{let a=await fetch(`/api/customer/booking/${B.id}`);if(!a.ok)throw Error(`Failed to fetch booking: ${a.statusText}`);return a.json()},enabled:!!B.id}),{data:J}=(0,g.useQuery)({queryKey:["customer","reviews","booking",B.id],queryFn:async()=>{let a=await fetch(`/api/customer/reviews?bookingId=${B.id}`);return a.ok?a.json():null},enabled:!!G&&"SERVICE_COMPLETED"===G.status});return((0,c.useEffect)(()=>{"true"===D.get("reviewSubmitted")&&(F(!0),setTimeout(()=>F(!1),5e3))},[D]),H)?(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-4 text-center",children:[(0,b.jsx)(l.LoadingSpinner,{size:"lg"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"예약 정보를 불러오는 중..."})]})})})}):G?(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"mx-auto max-w-4xl space-y-6",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center space-x-4",children:[(0,b.jsx)(i.Button,{variant:"ghost",onClick:()=>C.back(),className:"p-2",children:(0,b.jsx)(w.ArrowLeftIcon,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"예약 상세정보"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["예약 번호: #",G.id]})]})]}),"ADDITIONAL_PAYMENT_PENDING"===G.status&&(0,b.jsx)(h.Card,{className:"border-orange-200 bg-orange-50",children:(0,b.jsx)(h.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(s.AlertCircleIcon,{className:"mt-0.5 h-6 w-6 flex-shrink-0 text-orange-600"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"mb-2 text-lg font-semibold text-orange-900",children:"추가 결제가 필요합니다"}),(0,b.jsxs)("p",{className:"mb-4 text-sm text-orange-800",children:["미용 진행 중 추가 서비스가 필요하여 견적이 발생했습니다.",G.additionalAmount&&(0,b.jsxs)(b.Fragment,{children:["추가 결제 금액:"," ",(0,b.jsxs)("span",{className:"font-semibold",children:[G.additionalAmount.toLocaleString("ko-KR"),"원"]})]})]}),(0,b.jsx)(i.Button,{asChild:!0,className:"bg-orange-600 hover:bg-orange-700",children:(0,b.jsx)(f.default,{href:`/payment/additional/${G.id}`,children:"추가 결제하기"})})]})]})})}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(h.CardTitle,{className:"flex items-center space-x-3",children:[(0,b.jsx)(m.CalendarIcon,{className:"h-6 w-6"}),(0,b.jsx)("span",{children:"예약 정보"})]}),(0,b.jsx)(j.Badge,{variant:(a=>{switch(a){case"FIRST_PAYMENT_PENDING":case"GROOMER_CONFIRM_PENDING":case"ADDITIONAL_PAYMENT_PENDING":return"warning";case"FIRST_PAYMENT_COMPLETE":case"GROOMER_CONFIRM":case"ADDITIONAL_PAYMENT_COMPLETE":case"WORK_IN_PROGRESS":return"info";case"SERVICE_COMPLETED":return"success";case"SERVICE_CANCELLED":case"BOOKING_FAILED":return"destructive";default:return"secondary"}})(G.status),children:(a=>{switch(a){case"FIRST_PAYMENT_PENDING":return"1차 결제 대기";case"FIRST_PAYMENT_COMPLETE":return"1차 결제 완료";case"GROOMER_CONFIRM_PENDING":return"미용사 확인 대기";case"GROOMER_CONFIRM":return"미용사 확정";case"ADDITIONAL_PAYMENT_PENDING":return"추가 결제 대기";case"ADDITIONAL_PAYMENT_COMPLETE":return"추가 결제 완료";case"WORK_IN_PROGRESS":return"진행 중";case"SERVICE_COMPLETED":return"완료";case"SERVICE_CANCELLED":return"취소됨";case"BOOKING_FAILED":return"예약 실패";default:return"알 수 없음"}})(G.status)})]})}),(0,b.jsx)(h.CardContent,{className:"space-y-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-sm",children:"예약 날짜"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[(0,b.jsx)(m.CalendarIcon,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"font-medium",children:G.appointmentDate})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-sm",children:"예약 시간"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[(0,b.jsx)(n.ClockIcon,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"font-medium",children:G.startTime})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-sm",children:"총 결제금액"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[(0,b.jsx)(v.CreditCardIcon,{className:"h-4 w-4"}),(0,b.jsxs)("div",{className:"text-lg font-medium",children:[(0,b.jsxs)("span",{children:[G.paidAmount.toLocaleString("ko-KR"),"원"]}),null!==G.additionalAmount&&void 0!==G.additionalAmount&&G.additionalAmount>0&&(0,b.jsxs)("span",{className:"ml-2 text-sm text-orange-600",children:["(추가금: ",G.additionalAmount.toLocaleString("ko-KR"),"원)"]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted-foreground text-sm",children:"결제 상태"}),(0,b.jsx)(j.Badge,{variant:"PAID"===G.paymentStatus?"success":"warning",className:"mt-1",children:"PAID"===G.paymentStatus?"결제 완료":"결제 대기"})]})]})]})})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center space-x-3",children:[(0,b.jsx)(o.UserIcon,{className:"h-6 w-6"}),(0,b.jsx)("span",{children:"반려동물 정보"})]})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[G.pet.photoUrl?(0,b.jsx)(e.default,{src:G.pet.photoUrl,alt:G.pet.name,width:64,height:64,className:"h-16 w-16 rounded-full object-cover",unoptimized:!0,onError:a=>{console.error("Failed to load pet image:",G.pet.photoUrl),console.error("Error event:",a)}}):(0,b.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-gray-200",children:(0,b.jsx)(o.UserIcon,{className:"h-8 w-8 text-gray-400"})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:G.pet.name}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:[G.pet.species," • ",G.pet.breed," • ",G.pet.weight,"kg"]})]})]})})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center space-x-3",children:[(0,b.jsx)(p.ScissorsIcon,{className:"h-6 w-6"}),(0,b.jsx)("span",{children:"서비스 목록"})]})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:G.services.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-sm",children:a.description}),(0,b.jsx)("div",{className:"text-muted-foreground mt-2 flex items-center space-x-4 text-sm",children:(0,b.jsxs)("span",{children:[a.price.toLocaleString(),"원"]})})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsx)(j.Badge,{variant:"COMPLETED"===a.status?"success":"IN_PROGRESS"===a.status?"info":"secondary",children:"COMPLETED"===a.status?"완료":"IN_PROGRESS"===a.status?"진행 중":"대기"})})]}),c<G.services.length-1&&(0,b.jsx)(k.Separator,{className:"mt-4"})]},a.id))})})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center space-x-3",children:[(0,b.jsx)(o.UserIcon,{className:"h-6 w-6"}),(0,b.jsx)("span",{children:"미용사 정보"})]})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[G.groomer.photoUrl?(0,b.jsx)(e.default,{src:G.groomer.photoUrl,alt:G.groomer.name,width:64,height:64,className:"h-16 w-16 rounded-full object-cover",unoptimized:!0,onError:a=>{console.error("Failed to load groomer image:",G.groomer.photoUrl),console.error("Error event:",a)}}):(0,b.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-gray-200",children:(0,b.jsx)(o.UserIcon,{className:"h-8 w-8 text-gray-400"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:G.groomer.name}),(0,b.jsx)("div",{className:"mt-2 space-y-1",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(r.StarIcon,{className:"h-4 w-4 fill-current text-yellow-500"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:G.groomer.rating})]}),G.groomer.experience&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Separator,{orientation:"vertical",className:"h-4"}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"경력"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:G.groomer.experience})]})]})]})})]}),(0,b.jsx)("div",{className:"space-x-2",children:(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{G.groomer.phone&&(window.location.href=`tel:${G.groomer.phone}`)},disabled:!G.groomer.phone,title:G.groomer.phone?`${G.groomer.phone}로 전화하기`:"전화번호가 없습니다",children:[(0,b.jsx)(q.PhoneIcon,{className:"mr-2 h-4 w-4"}),G.groomer.phone?"전화":"전화 불가"]})})]})})})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"진행 상황"}),(0,b.jsx)(h.CardDescription,{children:"예약 진행 상황을 확인하세요"})]}),(0,b.jsx)(h.CardContent,{children:(z=[],A=G.status,z.push({id:"created",title:"예약 생성",description:"예약이 성공적으로 생성되었습니다",icon:(0,b.jsx)(m.CalendarIcon,{className:"h-4 w-4"}),timestamp:G.createdAt||G.appointmentDate,isCompleted:!0}),["FIRST_PAYMENT_COMPLETE","GROOMER_CONFIRM_PENDING","GROOMER_CONFIRM","ADDITIONAL_PAYMENT_PENDING","ADDITIONAL_PAYMENT_COMPLETE","WORK_IN_PROGRESS","SERVICE_COMPLETED"].includes(A)&&z.push({id:"payment1",title:"1차 결제 완료",description:"기본 서비스 요금 결제가 완료되었습니다",icon:(0,b.jsx)(v.CreditCardIcon,{className:"h-4 w-4"}),timestamp:G.createdAt,isCompleted:!0}),["GROOMER_CONFIRM","ADDITIONAL_PAYMENT_PENDING","ADDITIONAL_PAYMENT_COMPLETE","WORK_IN_PROGRESS","SERVICE_COMPLETED"].includes(A)&&z.push({id:"confirmed",title:"미용사 확정",description:`${G.groomer?.name||"미용사"}님이 예약을 확정했습니다`,icon:(0,b.jsx)(t.CheckCircleIcon,{className:"h-4 w-4"}),timestamp:G.createdAt,isCompleted:!0}),"ADDITIONAL_PAYMENT_PENDING"===A?z.push({id:"additional_payment",title:"추가 결제 대기",description:"추가 서비스 요금 결제가 필요합니다",icon:(0,b.jsx)(s.AlertCircleIcon,{className:"h-4 w-4"}),timestamp:null,isCompleted:!1,isActive:!0}):["ADDITIONAL_PAYMENT_COMPLETE","WORK_IN_PROGRESS","SERVICE_COMPLETED"].includes(A)&&G.additionalAmount&&z.push({id:"additional_payment",title:"추가 결제 완료",description:"추가 서비스 요금 결제가 완료되었습니다",icon:(0,b.jsx)(v.CreditCardIcon,{className:"h-4 w-4"}),timestamp:G.createdAt,isCompleted:!0}),["WORK_IN_PROGRESS","SERVICE_COMPLETED"].includes(A)&&z.push({id:"in_progress",title:"서비스 진행 중",description:"미용 서비스가 진행 중입니다",icon:(0,b.jsx)(p.ScissorsIcon,{className:"h-4 w-4"}),timestamp:G.actualStartTime,isCompleted:"SERVICE_COMPLETED"===A,isActive:"WORK_IN_PROGRESS"===A}),"SERVICE_COMPLETED"===A&&z.push({id:"completed",title:"서비스 완료",description:"모든 서비스가 완료되었습니다",icon:(0,b.jsx)(t.CheckCircleIcon,{className:"h-4 w-4"}),timestamp:G.actualEndTime,isCompleted:!0}),["SERVICE_CANCELLED","BOOKING_FAILED"].includes(A)&&z.push({id:"cancelled",title:"SERVICE_CANCELLED"===A?"예약 취소":"예약 실패",description:"SERVICE_CANCELLED"===A?"예약이 취소되었습니다":"예약이 실패했습니다",icon:(0,b.jsx)(u.XCircleIcon,{className:"h-4 w-4"}),timestamp:G.createdAt,isCompleted:!0,isError:!0}),(0,b.jsx)("div",{className:"space-y-6",children:z.map((a,c)=>(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`flex h-8 w-8 items-center justify-center rounded-full ${a.isError?"bg-red-100 text-red-600":a.isActive?"bg-orange-100 text-orange-600":a.isCompleted?"bg-primary text-white":"bg-muted text-muted-foreground"} `,children:a.icon}),c<z.length-1&&(0,b.jsx)("div",{className:`mt-2 h-12 w-px ${a.isCompleted?"bg-primary":"bg-border"}`})]}),(0,b.jsxs)("div",{className:"flex-1 pb-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h4",{className:`font-medium ${a.isActive?"text-orange-600":""}`,children:a.title}),a.timestamp&&(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:(0,x.format)(new Date(a.timestamp),"yyyy-MM-dd HH:mm:ss",{locale:y.ko})})]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-sm",children:a.description})]})]},a.id))}))})]}),E&&(0,b.jsx)(h.Card,{className:"border-green-200 bg-green-50",children:(0,b.jsx)(h.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(t.CheckCircleIcon,{className:"h-5 w-5 text-green-600"}),(0,b.jsx)("p",{className:"text-sm text-green-800",children:"리뷰가 성공적으로 등록되었습니다!"})]})})}),J&&(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)(h.CardTitle,{className:"flex items-center space-x-3",children:[(0,b.jsx)(r.StarIcon,{className:"h-6 w-6"}),(0,b.jsx)("span",{children:"내 리뷰"})]})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[[1,2,3,4,5].map(a=>(0,b.jsx)(r.StarIcon,{className:`h-5 w-5 ${a<=J.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},a)),(0,b.jsx)("span",{className:"text-muted-foreground ml-2 text-sm",children:(0,x.format)(new Date(J.createdAt),"yyyy년 MM월 dd일",{locale:y.ko})})]}),J.comment&&(0,b.jsx)("p",{className:"text-sm",children:J.comment}),J.images&&J.images.length>0&&(0,b.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-2",children:J.images.map(a=>(0,b.jsx)("div",{className:"relative aspect-square",children:(0,b.jsx)(e.default,{src:a.url,alt:"Review image",fill:!0,className:"rounded-lg object-cover",unoptimized:!0})},a.id))}),J.response&&(0,b.jsxs)("div",{className:"mt-4 rounded-lg bg-gray-50 p-3",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"미용사 답변"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:J.response.content})]})]})})]}),(0,b.jsxs)("div",{className:"flex space-x-4",children:["ADDITIONAL_PAYMENT_PENDING"===G.status&&(0,b.jsx)(i.Button,{asChild:!0,className:"flex-1 bg-orange-600 hover:bg-orange-700",children:(0,b.jsx)(f.default,{href:`/payment/additional/${G.id}`,children:"추가 결제하기"})}),"SERVICE_COMPLETED"===G.status&&!J&&(0,b.jsx)(i.Button,{className:"flex-1",onClick:()=>C.push(`/customer/review/create?bookingId=${G.id}`),children:"리뷰 작성"})]})]})}):(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-4 text-center",children:[(0,b.jsx)(s.AlertCircleIcon,{className:"text-muted-foreground mx-auto h-12 w-12"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"예약을 찾을 수 없습니다"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"요청하신 예약 정보를 찾을 수 없습니다."}),(0,b.jsx)(i.Button,{onClick:()=>C.push("/customer/bookings"),children:"예약 목록으로 돌아가기"})]})})})})}a.s(["default",()=>z])}];

//# sourceMappingURL=src_app_customer_booking_%5Bid%5D_page_tsx_c16dcbca._.js.map