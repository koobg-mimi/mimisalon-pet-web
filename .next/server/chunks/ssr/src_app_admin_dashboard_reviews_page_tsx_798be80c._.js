module.exports=[611978,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(529139),e=a.i(50944),f=a.i(812243),f=f,g=a.i(821374),h=a.i(177156),i=a.i(170106);let j=(0,i.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var k=a.i(130991),k=k;let l=(0,i.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var m=a.i(591119);function n({stats:a}){return a?(0,b.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{className:"pb-2",children:(0,b.jsx)(m.CardTitle,{className:"text-sm font-medium",children:"전체 리뷰"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.totalReviews.toLocaleString("ko-KR")}),(0,b.jsx)(f.default,{className:"text-muted-foreground h-4 w-4"})]})})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{className:"pb-2",children:(0,b.jsx)(m.CardTitle,{className:"text-sm font-medium",children:"평균 평점"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:a.averageRating.toFixed(1)}),(0,b.jsx)(g.Star,{className:"h-4 w-4 fill-yellow-600 text-yellow-600"})]})})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{className:"pb-2",children:(0,b.jsx)(m.CardTitle,{className:"text-sm font-medium",children:"공개된 리뷰"})}),(0,b.jsxs)(m.CardContent,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.publicReviews.toLocaleString("ko-KR")}),(0,b.jsx)(h.Eye,{className:"h-4 w-4 text-green-600"})]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:a.totalReviews>0?`${(a.publicReviews/a.totalReviews*100).toFixed(0)}% 공개`:"리뷰 없음"})]})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{className:"pb-2",children:(0,b.jsx)(m.CardTitle,{className:"text-sm font-medium",children:"신고된 리뷰"})}),(0,b.jsxs)(m.CardContent,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:a.flaggedReviews.toLocaleString("ko-KR")}),(0,b.jsx)(j,{className:"h-4 w-4 text-red-600"})]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:a.flaggedReviews>0?"확인 필요":"정상"})]})]}),(0,b.jsxs)(m.Card,{className:"md:col-span-2",children:[(0,b.jsx)(m.CardHeader,{className:"pb-2",children:(0,b.jsx)(m.CardTitle,{className:"text-sm font-medium",children:"평점 분포"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:[5,4,3,2,1].map(c=>{let d=a.ratingDistribution[c.toString()],e=a.totalReviews>0?d/a.totalReviews*100:0;return(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex w-12 items-center justify-end gap-1 text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:c}),(0,b.jsx)(g.Star,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"})]}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("div",{className:"bg-secondary h-2 overflow-hidden rounded-full",children:(0,b.jsx)("div",{className:"h-full rounded-full bg-yellow-500 transition-all",style:{width:`${e}%`}})})}),(0,b.jsxs)("div",{className:"text-muted-foreground w-16 text-right text-sm tabular-nums",children:[d," (",e.toFixed(0),"%)"]})]},c)})})})]}),(0,b.jsxs)(m.Card,{className:"md:col-span-2",children:[(0,b.jsx)(m.CardHeader,{className:"pb-2",children:(0,b.jsx)(m.CardTitle,{className:"text-sm font-medium",children:"답변율"})}),(0,b.jsxs)(m.CardContent,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[(100*a.responseRate).toFixed(0),"%"]}),(0,b.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs",children:[Math.round(a.totalReviews*a.responseRate).toLocaleString("ko-KR"),"개 /"," ",a.totalReviews.toLocaleString("ko-KR"),"개 리뷰에 답변"]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(k.default,{className:"h-8 w-8 text-blue-600"}),(0,b.jsx)(l,{className:"text-muted-foreground h-8 w-8"})]})]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)("div",{className:"bg-secondary h-3 overflow-hidden rounded-full",children:(0,b.jsx)("div",{className:"h-full rounded-full bg-blue-500 transition-all",style:{width:`${100*a.responseRate}%`}})})})]})]})]}):null}var o=a.i(369012),p=a.i(699570),q=a.i(866718),r=a.i(580701);function s({filters:a,onFiltersChange:c,onApplyFilters:d,totalCount:e,currentPage:f,totalPages:h,services:i=[]}){return(0,b.jsx)(m.Card,{className:"mb-6",children:(0,b.jsxs)(m.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(q.Input,{placeholder:"고객명, 리뷰 내용, 서비스명으로 검색...",value:a.searchQuery,onChange:a=>{c({searchQuery:a.target.value})},onKeyDown:a=>{"Enter"===a.key&&d&&d()},className:"w-full"})}),(0,b.jsxs)(r.Select,{value:a.ratingFilter?.toString()||"ALL",onValueChange:a=>{c({ratingFilter:"ALL"===a?null:parseInt(a,10)})},children:[(0,b.jsx)(r.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(r.SelectValue,{placeholder:"평점"})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"ALL",children:"전체 평점"}),[5,4,3,2,1].map(a=>(0,b.jsx)(r.SelectItem,{value:a.toString(),children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{children:a}),(0,b.jsx)(g.Star,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"})]})},a))]})]}),(0,b.jsxs)(r.Select,{value:a.statusFilter,onValueChange:a=>{c({statusFilter:a})},children:[(0,b.jsx)(r.SelectTrigger,{className:"w-[160px]",children:(0,b.jsx)(r.SelectValue,{placeholder:"상태"})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"ALL",children:"전체 상태"}),(0,b.jsx)(r.SelectItem,{value:"PUBLIC",children:"공개"}),(0,b.jsx)(r.SelectItem,{value:"PRIVATE",children:"비공개"}),(0,b.jsx)(r.SelectItem,{value:"FLAGGED",children:"신고됨"}),(0,b.jsx)(r.SelectItem,{value:"WITH_RESPONSE",children:"답변 완료"}),(0,b.jsx)(r.SelectItem,{value:"NO_RESPONSE",children:"답변 대기"})]})]}),d&&(0,b.jsxs)(p.Button,{onClick:d,variant:"outline",className:"w-full sm:w-auto",children:[(0,b.jsx)(o.Filter,{className:"mr-2 h-4 w-4"}),"필터 적용"]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[i.length>0&&(0,b.jsxs)(r.Select,{value:a.serviceFilter,onValueChange:a=>{c({serviceFilter:a})},children:[(0,b.jsx)(r.SelectTrigger,{className:"w-full sm:w-[180px]",children:(0,b.jsx)(r.SelectValue,{placeholder:"서비스"})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"ALL",children:"전체 서비스"}),i.map(a=>(0,b.jsx)(r.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)(r.Select,{value:a.sortBy,onValueChange:a=>{c({sortBy:a})},children:[(0,b.jsx)(r.SelectTrigger,{className:"w-full sm:w-[160px]",children:(0,b.jsx)(r.SelectValue,{placeholder:"정렬 기준"})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"createdAt",children:"작성일"}),(0,b.jsx)(r.SelectItem,{value:"rating",children:"평점"}),(0,b.jsx)(r.SelectItem,{value:"customerName",children:"고객명"})]})]}),(0,b.jsxs)(r.Select,{value:a.sortOrder,onValueChange:a=>{c({sortOrder:a})},children:[(0,b.jsx)(r.SelectTrigger,{className:"w-full sm:w-[140px]",children:(0,b.jsx)(r.SelectValue,{placeholder:"순서"})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"desc",children:"최신순"}),(0,b.jsx)(r.SelectItem,{value:"asc",children:"오래된순"})]})]})]})]}),void 0!==e&&e>0&&(0,b.jsxs)("div",{className:"text-muted-foreground mt-4 text-sm",children:["총 ",e.toLocaleString("ko-KR"),"개의 리뷰",void 0!==f&&void 0!==h&&(0,b.jsxs)("span",{children:[" ","(페이지 ",f," / ",h,")"]})]})]})})}var f=f,t=a.i(596221),u=a.i(400187),v=a.i(368114),w=a.i(141379);let x=(0,u.cva)("inline-flex items-center gap-1.5 rounded-full font-medium transition-colors border",{variants:{variant:{default:"border-transparent px-2.5 py-0.5",compact:"text-xs px-2 py-0.5 border-transparent",detailed:"text-sm px-3 py-1.5 border-transparent shadow-sm",highlight:"px-3 py-1 border-current ring-2 ring-offset-2 ring-current/20",minimal:"border-0 bg-transparent px-0 py-0"},size:{sm:"text-xs",default:"text-sm",lg:"text-base"},status:{public:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",private:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",flagged:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}},defaultVariants:{variant:"default",size:"default",status:"public"}}),y=c.forwardRef(({className:a,variant:c,size:d,isPublic:e,isFlagged:f,showIcon:g=!0,...i},k)=>{let l=f?j:e?h.Eye:w.EyeOff,m=f?"Flagged":e?"Public":"Private";return(0,b.jsxs)("div",{ref:k,className:(0,v.cn)(x({variant:c,size:d,status:f?"flagged":e?"public":"private",className:a})),role:"status","aria-label":`Review status: ${m}`,...i,children:[g&&(0,b.jsx)(l,{className:"sm"===d?"h-3 w-3":"lg"===d?"h-4 w-4":"h-3.5 w-3.5","aria-hidden":"true"}),(0,b.jsx)("span",{children:m})]})});y.displayName="ReviewStatusBadge";let z=(0,u.cva)("inline-flex items-center gap-0.5",{variants:{size:{sm:"text-sm",default:"text-base",lg:"text-lg"}},defaultVariants:{size:"default"}}),A=c.forwardRef(({className:a,size:c,rating:d,showNumeric:e=!1,...f},h)=>{let i=Math.max(1,Math.min(5,Math.round(d))),j="sm"===c?"h-4 w-4":"lg"===c?"h-6 w-6":"h-5 w-5",k=Array.from({length:5},(a,c)=>{let d=c+1,e=d<=i;return(0,b.jsx)(g.Star,{className:(0,v.cn)(j,"transition-colors",e?"fill-yellow-400 text-yellow-400 dark:fill-yellow-500 dark:text-yellow-500":"fill-none text-gray-300 dark:text-gray-600"),"aria-hidden":"true"},d)});return(0,b.jsxs)("div",{ref:h,className:(0,v.cn)(z({size:c,className:a})),role:"img","aria-label":`Rating: ${i} out of 5 stars`,...f,children:[k,e&&(0,b.jsx)("span",{className:(0,v.cn)("text-muted-foreground ml-1.5 font-medium","sm"===c?"text-xs":"lg"===c?"text-base":"text-sm"),children:i})]})});A.displayName="ReviewRatingStars";let B=(0,u.cva)("cursor-pointer transition-all hover:shadow-md",{variants:{variant:{default:"border-border bg-card shadow-sm",compact:"border-border bg-card shadow-sm",detailed:"border-border bg-card shadow-md",highlight:"border-primary/50 bg-gradient-to-br from-primary/5 to-transparent shadow-md",minimal:"border-border/50 bg-transparent shadow-none"},size:{sm:"p-4",default:"p-5",lg:"p-6"}},defaultVariants:{variant:"default",size:"default"}}),C=c.forwardRef(({className:a,variant:c,size:d,review:e,onViewDetails:f,...g},h)=>{let i=new Date(e.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"});return(0,b.jsxs)(m.Card,{ref:h,className:(0,v.cn)(B({variant:c,size:d,className:a})),onClick:()=>{f?.(e)},onKeyDown:a=>{("Enter"===a.key||" "===a.key)&&(a.preventDefault(),f?.(e))},tabIndex:f?0:void 0,role:f?"button":void 0,"aria-label":f?`View details for review by ${e.customer.name}`:void 0,...g,children:[(0,b.jsx)(m.CardHeader,{className:"space-y-2 p-0 pb-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsx)(A,{rating:e.rating,size:d}),(0,b.jsxs)("p",{className:"text-muted-foreground text-sm",children:[(0,b.jsx)("span",{className:"text-foreground font-medium",children:e.customer.name}),(0,b.jsx)("span",{className:"mx-1.5",children:"•"}),(0,b.jsx)("span",{children:i})]})]}),(0,b.jsx)(y,{isPublic:e.isPublic,isFlagged:e.isFlagged,size:d,variant:"minimal"===c?"minimal":"compact"})]})}),e.comment&&(0,b.jsx)(m.CardContent,{className:"p-0 pb-3",children:(0,b.jsx)("p",{className:"text-muted-foreground line-clamp-3 text-sm leading-relaxed",children:e.comment})}),(0,b.jsxs)(m.CardFooter,{className:"text-muted-foreground flex items-center justify-between p-0 text-xs",children:[(0,b.jsx)("span",{children:e.booking.service.name}),e.response&&(0,b.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:"Response"})]})]})});function D({reviews:a,isLoading:c,onViewDetails:d,currentPage:e,totalPages:g,onPageChange:h,cardVariant:i="default",cardSize:j="default"}){return c&&0===a.length?(0,b.jsx)(m.Card,{children:(0,b.jsx)(m.CardContent,{className:"flex min-h-[400px] items-center justify-center",children:(0,b.jsxs)("div",{className:"text-muted-foreground flex flex-col items-center gap-3",children:[(0,b.jsx)(t.Loader2,{className:"h-8 w-8 animate-spin"}),(0,b.jsx)("p",{className:"text-sm",children:"리뷰 불러오는 중..."})]})})}):c||0!==a.length?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(a=>(0,b.jsx)(C,{review:a,onViewDetails:d,variant:a.isFlagged?"highlight":i,size:j},a.id))}),c&&a.length>0&&(0,b.jsx)(m.Card,{children:(0,b.jsx)(m.CardContent,{className:"flex items-center justify-center py-8",children:(0,b.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2 text-sm",children:[(0,b.jsx)(t.Loader2,{className:"h-4 w-4 animate-spin"}),(0,b.jsx)("span",{children:"추가 리뷰 불러오는 중..."})]})})}),h&&void 0!==e&&void 0!==g&&g>1&&(0,b.jsx)(m.Card,{children:(0,b.jsxs)(m.CardContent,{className:"flex items-center justify-between py-4",children:[(0,b.jsxs)("div",{className:"text-muted-foreground text-sm",children:["페이지 ",e," / ",g]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Button,{variant:"outline",size:"sm",onClick:()=>h(e-1),disabled:e<=1||c,children:"이전"}),(0,b.jsx)(p.Button,{variant:"outline",size:"sm",onClick:()=>h(e+1),disabled:e>=g||c,children:"다음"})]})]})}),!h&&!c&&a.length>0&&(0,b.jsx)(m.Card,{children:(0,b.jsx)(m.CardContent,{className:"text-muted-foreground py-4 text-center text-sm",children:"모든 리뷰를 불러왔습니다"})})]}):(0,b.jsx)(m.Card,{children:(0,b.jsx)(m.CardContent,{className:"flex min-h-[400px] items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-3 text-center",children:[(0,b.jsx)(f.default,{className:"text-muted-foreground/50 h-12 w-12"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-lg font-medium",children:"리뷰를 찾을 수 없습니다"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"필터나 검색어를 변경해보세요"})]})]})})})}C.displayName="ReviewCard";var f=f,E=a.i(781560),F=a.i(814574),G=a.i(269876),H=a.i(505084),I=a.i(872233),J=a.i(571987);function K({review:a,open:c,onOpenChange:d,onApprove:e,onFlag:g,onHide:i,onRespond:k,onDelete:l}){return a?(0,b.jsx)(F.Dialog,{open:c,onOpenChange:d,children:(0,b.jsxs)(F.DialogContent,{className:"max-h-[90vh] max-w-4xl p-0",children:[(0,b.jsx)(F.DialogHeader,{className:"px-6 pt-6 pb-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(I.Avatar,{className:"h-16 w-16",children:[(0,b.jsx)(I.AvatarImage,{src:a.customer.image||void 0,alt:a.customer.name}),(0,b.jsx)(I.AvatarFallback,{className:"text-2xl",children:a.customer.name.charAt(0)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(F.DialogTitle,{className:"text-2xl",children:a.customer.name}),(0,b.jsx)(F.DialogDescription,{className:"mt-1",children:a.customer.email})]})]}),(0,b.jsx)(y,{isPublic:a.isPublic,isFlagged:a.isFlagged,variant:"detailed"})]})}),(0,b.jsx)(G.ScrollArea,{className:"max-h-[calc(90vh-180px)]",children:(0,b.jsxs)("div",{className:"space-y-6 px-6 pb-6",children:[(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"리뷰 내용"}),(0,b.jsxs)("div",{className:"bg-muted/50 space-y-3 rounded-lg p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"평점"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(A,{rating:a.rating,size:"lg",showNumeric:!0})})]}),a.comment&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"리뷰 내용"}),(0,b.jsx)("p",{className:"mt-1 text-sm whitespace-pre-wrap",children:a.comment})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"작성일"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(a.createdAt).toLocaleString("ko-KR")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"수정일"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(a.updatedAt).toLocaleString("ko-KR")})]})]})]})]}),a.images&&a.images.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(H.Separator,{}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"리뷰 사진"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4",children:a.images.map(a=>(0,b.jsx)("div",{className:"border-border relative aspect-square overflow-hidden rounded-lg border",children:(0,b.jsx)(J.default,{src:a.url,alt:`Review image ${a.order}`,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw"})},a.id))})]})]}),(0,b.jsx)(H.Separator,{}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"예약 정보"}),(0,b.jsxs)("div",{className:"bg-muted/50 space-y-3 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"예약일"}),(0,b.jsx)("p",{className:"font-medium",children:a.booking.date})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"서비스"}),(0,b.jsx)("p",{className:"font-medium",children:a.booking.service.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"미용사"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,b.jsxs)(I.Avatar,{className:"h-6 w-6",children:[(0,b.jsx)(I.AvatarImage,{src:a.booking.groomer.image||void 0,alt:a.booking.groomer.name}),(0,b.jsx)(I.AvatarFallback,{className:"text-xs",children:a.booking.groomer.name.charAt(0)})]}),(0,b.jsx)("span",{className:"font-medium",children:a.booking.groomer.name})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"지점"}),(0,b.jsx)("p",{className:"font-medium",children:a.booking.location.name})]})]}),a.booking.pets&&a.booking.pets.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"반려동물"}),(0,b.jsx)("div",{className:"mt-1 flex flex-wrap gap-2",children:a.booking.pets.map(a=>(0,b.jsxs)("span",{className:"bg-primary/10 text-primary inline-flex items-center rounded-full px-3 py-1 text-sm font-medium",children:[a.name," (",a.breed?.name||"알 수 없음",")"]},a.id))})]})]})]}),a.response&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(H.Separator,{}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"미용사 답변"}),(0,b.jsxs)("div",{className:"bg-muted/50 space-y-2 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"답변자:"}),(0,b.jsx)("span",{className:"font-medium",children:a.response.groomer.name}),(0,b.jsxs)("span",{className:"text-muted-foreground text-xs",children:["• ",new Date(a.response.createdAt).toLocaleString("ko-KR")]})]}),(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:a.response.content})]})]})]}),a.isFlagged&&a.flagReason&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(H.Separator,{}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold text-red-600",children:"신고 정보"}),(0,b.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-900 dark:bg-red-950/20",children:(0,b.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:a.flagReason})})]})]})]})}),(0,b.jsx)(F.DialogFooter,{className:"px-6 pb-6",children:(0,b.jsxs)("div",{className:"flex w-full flex-wrap gap-2",children:[a.isPublic?(0,b.jsxs)(p.Button,{onClick:()=>i?.(a.id),variant:"outline",size:"sm",className:"text-orange-600",children:[(0,b.jsx)(w.EyeOff,{className:"mr-2 h-4 w-4"}),"숨기기"]}):(0,b.jsxs)(p.Button,{onClick:()=>e?.(a.id),variant:"outline",size:"sm",className:"text-green-600",children:[(0,b.jsx)(h.Eye,{className:"mr-2 h-4 w-4"}),"공개"]}),!a.isFlagged&&(0,b.jsxs)(p.Button,{onClick:()=>g?.(a.id),variant:"outline",size:"sm",className:"text-red-600",children:[(0,b.jsx)(j,{className:"mr-2 h-4 w-4"}),"신고"]}),!a.response&&(0,b.jsxs)(p.Button,{onClick:()=>k?.(a.id),variant:"outline",size:"sm",children:[(0,b.jsx)(f.default,{className:"mr-2 h-4 w-4"}),"답변 작성"]}),(0,b.jsxs)(p.Button,{onClick:()=>l?.(a.id),variant:"outline",size:"sm",className:"text-red-600",children:[(0,b.jsx)(E.Trash2,{className:"mr-2 h-4 w-4"}),"삭제"]}),(0,b.jsx)(p.Button,{onClick:()=>d(!1),variant:"default",size:"sm",className:"ml-auto",children:"닫기"})]})})]})}):null}var L=a.i(695245),M=a.i(159501),N=a.i(954714),O=a.i(441921),P=a.i(429246);let Q=N.object({reason:N.string().min(10,{message:"신고 사유는 최소 10자 이상 입력해주세요."}).max(500,{message:"신고 사유는 최대 500자까지 입력 가능합니다."})});function R({review:a,open:c,onOpenChange:d,onSubmit:e,isSubmitting:f=!1}){let g=(0,L.useForm)({resolver:(0,M.zodResolver)(Q),defaultValues:{reason:""}}),h=()=>{g.reset(),d(!1)},i=async b=>{if(a)try{await e({reviewId:a.id,reason:b.reason}),h()}catch(a){console.error("Failed to flag review:",a)}};return a?(0,b.jsx)(F.Dialog,{open:c,onOpenChange:d,children:(0,b.jsxs)(F.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(F.DialogHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j,{className:"h-5 w-5 text-red-600"}),(0,b.jsx)(F.DialogTitle,{children:"리뷰 신고"})]}),(0,b.jsx)(F.DialogDescription,{children:"부적절한 리뷰를 신고합니다. 신고 사유를 상세히 입력해주세요."})]}),(0,b.jsx)(O.Form,{...g,children:(0,b.jsxs)("form",{onSubmit:g.handleSubmit(i),className:"space-y-4",children:[(0,b.jsx)("div",{className:"bg-muted/50 rounded-lg p-3",children:(0,b.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"고객:"})," ",(0,b.jsx)("span",{className:"font-medium",children:a.customer.name})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"평점:"})," ",(0,b.jsxs)("span",{className:"font-medium",children:["⭐ ",a.rating]})]}),a.comment&&(0,b.jsxs)("p",{className:"text-muted-foreground line-clamp-2",children:["“",a.comment,"”"]})]})}),(0,b.jsx)(O.FormField,{control:g.control,name:"reason",render:({field:a})=>(0,b.jsxs)(O.FormItem,{children:[(0,b.jsx)(O.FormLabel,{children:"신고 사유 *"}),(0,b.jsx)(O.FormControl,{children:(0,b.jsx)(P.Textarea,{placeholder:"신고 사유를 입력해주세요 (최소 10자)",className:"min-h-[120px] resize-none",disabled:f,...a})}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(O.FormMessage,{}),(0,b.jsxs)("span",{className:"text-muted-foreground text-xs",children:[a.value?.length||0," / 500"]})]})]})}),(0,b.jsxs)(F.DialogFooter,{children:[(0,b.jsx)(p.Button,{type:"button",variant:"outline",onClick:h,disabled:f,children:"취소"}),(0,b.jsx)(p.Button,{type:"submit",variant:"destructive",disabled:f||!g.formState.isValid,children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin",children:"⏳"}),"신고 중..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j,{className:"mr-2 h-4 w-4"}),"신고하기"]})})]})]})})]})}):null}var S=a.i(486192),T=a.i(73570);function U({review:a,open:c,onOpenChange:d,onConfirm:e,isDeleting:f=!1}){let g=async()=>{if(a)try{await e(a.id),d(!1)}catch(a){console.error("Failed to delete review:",a)}};return a?(0,b.jsx)(S.AlertDialog,{open:c,onOpenChange:d,children:(0,b.jsxs)(S.AlertDialogContent,{children:[(0,b.jsxs)(S.AlertDialogHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(T.AlertTriangle,{className:"h-5 w-5 text-red-600"}),(0,b.jsx)(S.AlertDialogTitle,{children:"리뷰 삭제"})]}),(0,b.jsxs)(S.AlertDialogDescription,{className:"space-y-3 pt-2",children:[(0,b.jsx)("p",{children:"정말로 이 리뷰를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."}),(0,b.jsx)("div",{className:"bg-muted/50 rounded-lg p-3 text-left",children:(0,b.jsxs)("div",{className:"space-y-1.5 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"고객:"}),(0,b.jsx)("span",{className:"text-foreground font-medium",children:a.customer.name})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"작성일:"}),(0,b.jsx)("span",{className:"text-foreground font-medium",children:new Date(a.createdAt).toLocaleDateString("ko-KR")})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"평점:"}),(0,b.jsxs)("span",{className:"text-foreground font-medium",children:["⭐ ",a.rating]})]}),a.comment&&(0,b.jsx)("div",{className:"border-border mt-2 border-t pt-2",children:(0,b.jsxs)("p",{className:"text-muted-foreground line-clamp-2 text-xs",children:["“",a.comment,"”"]})})]})}),(0,b.jsx)("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"⚠️ 삭제된 리뷰는 복구할 수 없습니다."})]})]}),(0,b.jsxs)(S.AlertDialogFooter,{children:[(0,b.jsx)(S.AlertDialogCancel,{disabled:f,children:"취소"}),(0,b.jsx)(S.AlertDialogAction,{onClick:g,disabled:f,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin",children:"⏳"}),"삭제 중..."]}):"삭제"})]})]})}):null}var V=a.i(545662);function W(){let{data:a,isPending:f}=(0,d.useSession)(),g=(0,e.useRouter)(),[h,i]=(0,c.useState)({searchQuery:"",ratingFilter:null,statusFilter:"ALL",serviceFilter:"ALL",sortBy:"createdAt",sortOrder:"desc"}),[j,k]=(0,c.useState)(1),[l,m]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),{reviews:v,pagination:w,stats:x,isLoading:y,isFetching:z}=function({filters:a,page:b,limit:d=20,enabled:e=!0}){let{data:f,isLoading:g,isFetching:h,error:i}=(0,V.useGetReviewsQuery)({page:b,limit:d,search:a.searchQuery,rating:a.ratingFilter,status:"ALL"!==a.statusFilter?a.statusFilter:void 0,service:a.serviceFilter,sortBy:a.sortBy,sortOrder:a.sortOrder},{skip:!e}),j=(0,c.useMemo)(()=>f?.reviews??[],[f?.reviews]);return{reviews:j,pagination:(0,c.useMemo)(()=>({currentPage:f?.currentPage??1,totalPages:f?.totalPages??1,totalCount:f?.totalCount??0,hasNext:(f?.currentPage??1)<(f?.totalPages??1),hasPrev:(f?.currentPage??1)>1}),[f]),stats:(0,c.useMemo)(()=>f?.stats,[f?.stats]),isLoading:g,isFetching:h,error:i}}({filters:h,page:j,limit:20,enabled:!!a?.user&&"ADMIN"===a.user.role}),[A]=(0,V.useApproveReviewMutation)(),[B,{isLoading:C}]=(0,V.useFlagReviewMutation)(),[E,{isLoading:F}]=(0,V.useDeleteReviewMutation)(),[G]=(0,V.useHideReviewMutation)();(0,c.useEffect)(()=>{f||a||g.push("/auth/signin"),!f&&a?.user?.role&&"ADMIN"!==a.user.role&&g.push("/admin/dashboard/overview")},[a,f,g]);let H=(0,c.useCallback)(a=>{m(a),p(!0)},[]),I=(0,c.useCallback)(async a=>{try{await A(a).unwrap(),p(!1)}catch(a){console.error("Failed to approve review:",a),alert("리뷰 승인에 실패했습니다.")}},[A]),J=(0,c.useCallback)(async a=>{try{await B(a).unwrap(),r(!1),p(!1)}catch(a){console.error("Failed to flag review:",a),alert("리뷰 신고에 실패했습니다.")}},[B]),L=(0,c.useCallback)(async a=>{try{await G(a).unwrap(),p(!1)}catch(a){console.error("Failed to hide review:",a),alert("리뷰 상태 변경에 실패했습니다.")}},[G]),M=(0,c.useCallback)(async a=>{try{await E(a).unwrap(),u(!1),p(!1),m(null)}catch(a){console.error("Failed to delete review:",a),alert("리뷰 삭제에 실패했습니다.")}},[E]),N=(0,c.useCallback)(a=>{i(b=>({...b,...a})),k(1)},[]),O=(0,c.useCallback)(a=>{k(a)},[]);return f?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,b.jsx)("div",{className:"text-lg",children:"Loading..."})}):a&&a.user?.role==="ADMIN"?(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:"리뷰 관리"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"전체 리뷰를 관리하고 모니터링합니다"})]}),(0,b.jsx)(n,{stats:x??null}),(0,b.jsx)(s,{filters:h,onFiltersChange:N,totalCount:w.totalCount,currentPage:w.currentPage,totalPages:w.totalPages}),(0,b.jsx)(D,{reviews:v,isLoading:y||z,onViewDetails:H,currentPage:w.currentPage,totalPages:w.totalPages,onPageChange:O}),l&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(K,{review:l,open:o,onOpenChange:p,onApprove:I,onFlag:()=>r(!0),onHide:L,onDelete:()=>u(!0)}),(0,b.jsx)(R,{review:l,open:q,onOpenChange:r,onSubmit:J,isSubmitting:C}),(0,b.jsx)(U,{review:l,open:t,onOpenChange:u,onConfirm:M,isDeleting:F})]})]}):null}a.s(["default",()=>W],611978)}];

//# sourceMappingURL=src_app_admin_dashboard_reviews_page_tsx_798be80c._.js.map