module.exports=[626405,a=>{"use strict";let b=(0,a.i(170106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["default",()=>b])},854251,a=>{"use strict";var b=a.i(626405);a.s(["CheckCircleIcon",()=>b.default])},429246,a=>{"use strict";var b=a.i(187924),c=a.i(368114);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input min-h-[100px] w-full min-w-0 rounded-md border bg-transparent px-4 py-3 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 sm:min-h-[96px] sm:px-3 sm:py-2","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","resize-y","touch-manipulation",a),...d})}a.s(["Textarea",()=>d])},275564,a=>{"use strict";var b=a.i(447824);a.s(["ScissorsIcon",()=>b.default])},973365,a=>{"use strict";let b=(0,a.i(170106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["default",()=>b])},988552,a=>{"use strict";var b=a.i(973365);a.s(["ArrowLeftIcon",()=>b.default])},591119,a=>{"use strict";var b=a.i(187924),c=a.i(368114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground rounded-lg border shadow-sm","transition-all hover:shadow-md","p-2 sm:p-3","sm:rounded-xl sm:shadow",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("flex flex-col space-y-2 p-2 sm:p-2",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("text-lg leading-none font-semibold tracking-tight",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("p-2 sm:p-2",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center p-4 pt-0 sm:p-6 sm:pt-0","flex-col gap-2 sm:flex-row sm:gap-0",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},786304,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(400187),e=a.i(368114);let f=(0,d.cva)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 whitespace-nowrap shrink-0",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white shadow hover:bg-green-500/80",warning:"border-transparent bg-yellow-500 text-white shadow hover:bg-yellow-500/80",info:"border-transparent bg-blue-500 text-white shadow hover:bg-blue-500/80"}},defaultVariants:{variant:"default"}}),g=c.forwardRef(({className:a,variant:c,...d},g)=>(0,b.jsx)("div",{ref:g,className:(0,e.cn)(f({variant:c}),a),...d}));g.displayName="Badge",a.s(["Badge",()=>g])},730769,a=>{"use strict";var b=a.i(667937);a.s(["CalendarIcon",()=>b.default])},130748,a=>{"use strict";var b=a.i(39355);a.s(["UserIcon",()=>b.default])},931105,a=>{"use strict";var b=a.i(402173);a.s(["StarIcon",()=>b.default])},317753,a=>{"use strict";let b=(0,a.i(170106).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);a.s(["default",()=>b])},296101,a=>{"use strict";let b=(0,a.i(170106).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);a.s(["FolderOpen",()=>b],296101)},943664,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(433217),f=a.i(370025),g=a.i(571987),h=a.i(591119),i=a.i(699570),j=a.i(429246),k=a.i(786304),l=a.i(205138),m=a.i(931105),n=a.i(317753),n=n,o=a.i(422262),p=a.i(130748),q=a.i(275564),r=a.i(730769),s=a.i(988552),t=a.i(854251),u=a.i(296101);function v(){let a=(0,d.useSearchParams)(),v=(0,d.useRouter)(),w=a.get("bookingId"),[x,y]=(0,c.useState)(0),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)([]),D=(0,c.useRef)(null),E=(0,c.useRef)(null),{data:F,isLoading:G}=(0,e.useQuery)({queryKey:["booking",w],queryFn:async()=>{let a=await fetch(`/api/customer/booking/${w}`);if(!a.ok)throw Error("Failed to fetch booking");let b=await a.json();if("SERVICE_COMPLETED"!==b.status)throw v.push(`/customer/booking/${w}`),Error("Booking not completed");return b},enabled:!!w,retry:!1}),H=(0,f.useMutation)({mutationFn:async()=>{let a=new FormData;a.append("bookingId",w),a.append("rating",x.toString()),a.append("comment",z),B.forEach(b=>{a.append("images",b.file)});let b=await fetch("/api/customer/reviews",{method:"POST",body:a});if(!b.ok)throw Error((await b.json()).error||"Failed to submit review");return b.json()},onSuccess:()=>{v.push(`/customer/booking/${w}?reviewSubmitted=true`)},onError:a=>{console.error("Error submitting review:",a),alert("리뷰 등록에 실패했습니다. 다시 시도해주세요.")}});if(!w)return v.push("/customer/dashboard/overview"),null;let I=a=>{if(!a)return;let b=[],c=["image/jpeg","image/jpg","image/png","image/webp","image/gif"];Array.from(a).forEach(a=>{if(!c.includes(a.type))return void alert(`${a.name}은(는) 지원하지 않는 파일 형식입니다. JPG, PNG, WEBP, GIF만 가능합니다.`);if(a.size>5242880)return void alert(`${a.name}은(는) 파일 크기가 너무 큽니다. 5MB 이하만 가능합니다.`);if(B.length+b.length>=5)return void alert("최대 5장까지만 업로드 가능합니다.");let d=URL.createObjectURL(a);b.push({file:a,preview:d})}),C(a=>[...a,...b]),D.current&&(D.current.value=""),E.current&&(E.current.value="")};return G?(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-4 text-center",children:[(0,b.jsx)(l.LoadingSpinner,{size:"lg"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"정보를 불러오는 중..."})]})})})}):F?(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"mx-auto max-w-3xl space-y-6",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center space-x-4",children:[(0,b.jsx)(i.Button,{variant:"ghost",onClick:()=>v.push(`/customer/booking/${w}`),className:"p-2",children:(0,b.jsx)(s.ArrowLeftIcon,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"리뷰 작성"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"서비스는 어떠셨나요?"})]})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"서비스 정보"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[F.groomer.photoUrl?(0,b.jsx)(g.default,{src:F.groomer.photoUrl,alt:F.groomer.name||"미용사",width:48,height:48,className:"h-12 w-12 rounded-full object-cover",unoptimized:!0}):(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gray-200",children:(0,b.jsx)(p.UserIcon,{className:"h-6 w-6 text-gray-400"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"font-medium",children:[F.groomer.name," 미용사"]}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:F.groomer.salon.name})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,b.jsx)(r.CalendarIcon,{className:"text-muted-foreground h-4 w-4"}),(0,b.jsxs)("span",{children:[F.appointmentDate," ",F.startTime]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,b.jsx)(q.ScissorsIcon,{className:"text-muted-foreground h-4 w-4"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:F.services.map(a=>(0,b.jsx)(k.Badge,{variant:"secondary",children:a.name},a.id))})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,b.jsx)(p.UserIcon,{className:"text-muted-foreground h-4 w-4"}),(0,b.jsxs)("span",{children:[F.pet.name," (",F.pet.breed,")"]})]})]})})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"서비스 만족도"}),(0,b.jsx)(h.CardDescription,{children:"전반적인 서비스는 어떠셨나요?"})]}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsx)("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(a=>(0,b.jsx)("button",{onClick:()=>y(a),className:"p-1 transition-colors",children:(0,b.jsx)(m.StarIcon,{className:`h-10 w-10 ${a<=x?"fill-yellow-400 text-yellow-400":"text-gray-300"} transition-colors hover:fill-yellow-400 hover:text-yellow-400`})},a))}),x>0&&(0,b.jsxs)("p",{className:"mt-4 text-center text-lg font-medium",children:[5===x&&"매우 만족",4===x&&"만족",3===x&&"보통",2===x&&"불만족",1===x&&"매우 불만족"]})]})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"상세 리뷰"}),(0,b.jsx)(h.CardDescription,{children:"어떤 점이 좋았나요? 개선점이 있다면 알려주세요."})]}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsx)(j.Textarea,{placeholder:"미용 서비스에 대한 솔직한 리뷰를 작성해주세요...",value:z,onChange:a=>A(a.target.value),className:"min-h-[120px]"}),(0,b.jsxs)("p",{className:"text-muted-foreground mt-2 text-sm",children:[z.length,"/500자"]})]})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"사진 첨부"}),(0,b.jsx)(h.CardDescription,{children:"미용 전후 사진을 공유해주세요 (최대 5장)"})]}),(0,b.jsxs)(h.CardContent,{children:[B.length>0&&(0,b.jsx)("div",{className:"mb-4 grid grid-cols-3 gap-3",children:B.map((a,c)=>(0,b.jsxs)("div",{className:"relative aspect-square",children:[(0,b.jsx)(g.default,{src:a.preview,alt:`Preview ${c+1}`,fill:!0,className:"rounded-lg object-cover"}),(0,b.jsx)("button",{onClick:()=>{C(a=>{let b=[...a];return URL.revokeObjectURL(b[c].preview),b.splice(c,1),b})},className:"absolute top-1 right-1 rounded-full bg-black/50 p-1 text-white transition-colors hover:bg-black/70",children:(0,b.jsx)(o.XIcon,{className:"h-4 w-4"})})]},c))}),B.length<5&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"text-center",children:(0,b.jsxs)("p",{className:"text-muted-foreground text-sm",children:["JPG, PNG, WEBP (최대 5MB) • ",B.length,"/5 이미지"]})}),(0,b.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,b.jsxs)(i.Button,{type:"button",variant:"outline",size:"lg",onClick:()=>D.current?.click(),className:"h-12 max-w-[160px] flex-1",children:[(0,b.jsx)(u.FolderOpen,{className:"mr-2 h-5 w-5"}),"사진 선택"]}),(0,b.jsxs)(i.Button,{type:"button",variant:"outline",size:"lg",onClick:()=>E.current?.click(),className:"h-12 max-w-[160px] flex-1",children:[(0,b.jsx)(n.default,{className:"mr-2 h-5 w-5"}),"카메라 촬영"]})]}),(0,b.jsx)("input",{ref:D,type:"file",multiple:!0,accept:"image/*",onChange:a=>I(a.target.files),className:"hidden"}),(0,b.jsx)("input",{ref:E,type:"file",accept:"image/*",capture:"environment",onChange:a=>I(a.target.files),className:"hidden"})]})]})]}),(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>v.push(`/customer/booking/${w}`),className:"flex-1",children:"취소"}),(0,b.jsx)(i.Button,{onClick:()=>{0===x?alert("별점을 선택해주세요."):z.trim()?H.mutate():alert("리뷰 내용을 입력해주세요.")},disabled:H.isPending||0===x||!z.trim(),className:"flex-1",children:H.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.LoadingSpinner,{size:"sm",className:"mr-2"}),"등록 중..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.CheckCircleIcon,{className:"mr-2 h-4 w-4"}),"리뷰 등록"]})})]})]})}):null}a.s(["default",()=>v],943664)}];

//# sourceMappingURL=_792e44cf._.js.map