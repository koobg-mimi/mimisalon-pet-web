module.exports=[370025,a=>{"use strict";var b=a.i(572131),c=a.i(612794),d=a.i(118544),e=a.i(533791),f=a.i(442871),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c,d),this.#d.onSettled?.(a.data,null,b,c,d)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c,d),this.#d.onSettled?.(void 0,a.error,b,c,d))}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(937927);function i(a,c){let e=(0,h.useQueryClient)(c),[i]=b.useState(()=>new g(e,a));b.useEffect(()=>{i.setOptions(a)},[i,a]);let j=b.useSyncExternalStore(b.useCallback(a=>i.subscribe(d.notifyManager.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),k=b.useCallback((a,b)=>{i.mutate(a,b).catch(f.noop)},[i]);if(j.error&&(0,f.shouldThrowError)(i.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}a.s(["useMutation",()=>i],370025)},895174,a=>{"use strict";let b=(0,a.i(170106).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["default",()=>b])},292e3,a=>{"use strict";var b=a.i(895174);a.s(["AlertCircle",()=>b.default])},591119,a=>{"use strict";var b=a.i(187924),c=a.i(368114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground rounded-lg border shadow-sm","transition-all hover:shadow-md","p-2 sm:p-3","sm:rounded-xl sm:shadow",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("flex flex-col space-y-2 p-2 sm:p-2",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("text-lg leading-none font-semibold tracking-tight",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("p-2 sm:p-2",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center p-4 pt-0 sm:p-6 sm:pt-0","flex-col gap-2 sm:flex-row sm:gap-0",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},626405,a=>{"use strict";let b=(0,a.i(170106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["default",()=>b])},816201,a=>{"use strict";var b=a.i(626405);a.s(["CheckCircle",()=>b.default])},499548,a=>{"use strict";let b=(0,a.i(170106).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);a.s(["default",()=>b])},797063,a=>{"use strict";var b=a.i(499548);a.s(["Info",()=>b.default])},463052,a=>{"use strict";var b=a.i(433217);async function c(){let a=await fetch("/api/env");if(!a.ok)throw Error("Failed to fetch environment configuration");return a.json()}function d(){return(0,b.useQuery)({queryKey:["public-env"],queryFn:c,staleTime:1/0,gcTime:1/0,retry:3,retryDelay:a=>Math.min(1e3*2**a,3e4)})}a.s(["usePublicEnv",()=>d])},148452,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(591119),e=a.i(699570),f=a.i(205138),g=a.i(292e3),h=a.i(171967),i=a.i(368114);function j({amount:a,orderName:j,orderId:k,customerInfo:l,onSuccess:m,onError:n,termsText:o="결제 약관에 동의합니다",buttonText:p,customData:q,className:r,title:s="카드 결제",description:t="신용/체크카드로 안전하게 결제합니다"}){let[u,v]=(0,c.useState)(!1),{requestPayment:w,isLoading:x,error:y,clearError:z}=(0,h.usePayment)(),A=async b=>{if(b.preventDefault(),!u){n&&n("약관에 동의해주세요.");return}try{let b=await w({amount:a,orderName:j,orderId:k,customerName:l?.name||"",customerEmail:l?.email||"",customerPhone:l?.phone||"",payMethod:"CARD",customData:q});b.success?m&&m(b):n&&n(b.error||"결제에 실패했습니다.")}catch(a){console.error("Payment processing failed:",a),n&&n("결제 처리 중 오류가 발생했습니다.")}},B=p||`${a.toLocaleString("ko-KR")}원 결제하기`;return(0,b.jsxs)(d.Card,{className:(0,i.cn)(r),children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-xl",children:s})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("form",{onSubmit:A,className:"space-y-6",children:(0,b.jsxs)("div",{className:"border-border border-t pt-6",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,b.jsx)("input",{type:"checkbox",id:"payment-terms",checked:u,onChange:a=>v(a.target.checked),className:"mr-2",required:!0}),(0,b.jsx)("label",{htmlFor:"payment-terms",className:"text-foreground text-sm",children:o})]}),(0,b.jsx)(e.Button,{type:"submit",className:"w-full",disabled:x||!u,size:"lg",children:x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.LoadingSpinner,{size:"sm",className:"mr-2"}),"처리 중..."]}):B})]})}),y&&(0,b.jsx)(d.Card,{className:"border-red-200 bg-red-50",children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(g.AlertCircle,{className:"mt-0.5 h-5 w-5 shrink-0 text-red-600"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"mb-1 text-sm font-semibold text-red-800",children:"결제 오류"}),(0,b.jsx)("p",{className:"text-sm text-red-700",children:y}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:z,className:"mt-3 border-red-300 text-red-700 hover:bg-red-100",children:"닫기"})]})]})})})]})})]})}a.s(["PaymentCard",()=>j])},637441,a=>{"use strict";var b=a.i(433217),c=a.i(937927),d=a.i(529139);function e(){let{data:a,isPending:e}=(0,d.useSession)(),f=(0,c.useQueryClient)(),g=(0,b.useQuery)({queryKey:["profile",a?.user?.id],queryFn:async()=>{let a=await fetch("/api/auth/me");if(!a.ok){if(401===a.status)throw Error("Unauthorized");throw Error("Failed to fetch profile")}return a.json()},enabled:!!a?.user,staleTime:6e5,gcTime:18e5,retry:(a,b)=>"Unauthorized"!==b.message&&a<2});return{profile:g.data,isLoading:g.isLoading||e,isError:g.isError,error:g.error,isProfileComplete:()=>{let a=g.data;if(!a)return!1;let b=!!(a.name&&a.phoneNumber),c=a.phoneNumberVerified;if("GROOMER"===a.role){let d=!!(a.groomerProfile?.bankName&&a.groomerProfile?.bankAccountNumber);return b&&c&&d}return b&&c},getProfileCompletionPercentage:()=>{let a=g.data;if(!a)return 0;let b=0,c=5;return a.email&&b++,a.name&&b++,a.phoneNumber&&b++,a.phoneNumberVerified&&b++,a.image&&b++,"GROOMER"===a.role&&(c+=3,a.groomerProfile?.bankName&&b++,a.groomerProfile?.bankAccountNumber&&b++,a.groomerProfile?.settlementCycle&&b++),Math.round(b/c*100)},refreshProfile:()=>g.refetch(),invalidateProfile:()=>f.invalidateQueries({queryKey:["profile",a?.user?.id]}),isAuthenticated:!!a?.user,isCustomer:g.data?.role==="CUSTOMER",isGroomer:g.data?.role==="GROOMER",isAdmin:g.data?.role==="ADMIN"}}a.s(["useProfile",()=>e])}];

//# sourceMappingURL=_e1c6ebac._.js.map