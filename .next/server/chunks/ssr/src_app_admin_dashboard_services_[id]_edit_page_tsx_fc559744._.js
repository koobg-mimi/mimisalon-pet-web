module.exports=[249267,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(529139),e=a.i(50944),f=a.i(433217),g=a.i(370025),h=a.i(937927),i=a.i(695245),j=a.i(159501),k=a.i(156757),l=a.i(400210),m=a.i(114548),n=a.i(808235),o=a.i(322316),p=a.i(591119),q=a.i(699570),r=a.i(866718),s=a.i(429246),t=a.i(205138),u=a.i(441921),v=a.i(580701),w=a.i(315055),x=a.i(764927);let y=k.z.object({name:k.z.string().min(1,"서비스명을 입력해주세요").max(100,"서비스명은 최대 100자까지 입력 가능합니다"),description:k.z.string().min(1,"서비스 설명을 입력해주세요").max(500,"설명은 최대 500자까지 입력 가능합니다"),duration:k.z.string().min(1,"소요시간을 입력해주세요").refine(a=>{let b=parseInt(a);return!isNaN(b)&&b>=30&&b<=480},"30분 ~ 480분 사이의 값을 입력해주세요"),priceRanges:k.z.array(k.z.object({petType:k.z.enum(["DOG","CAT"]),minWeight:k.z.number().min(0).nullable().optional(),maxWeight:k.z.number().nullable().optional(),price:k.z.number().min(5e3),selectedBreedIds:k.z.array(k.z.string()).optional()})).min(1,"최소 하나의 가격 설정이 필요합니다"),requirements:k.z.string().max(300,"요구사항은 최대 300자까지 입력 가능합니다").optional(),afterCareInstructions:k.z.string().max(500,"애프터케어 안내는 최대 500자까지 입력 가능합니다").optional(),isActive:k.z.boolean().optional().default(!0)});function z({params:a}){let k=(0,c.use)(a),{data:z,isPending:A}=(0,d.useSession)(),B=(0,e.useRouter)(),C=(0,h.useQueryClient)(),[D,E]=(0,c.useState)([]),F=(0,i.useForm)({resolver:(0,j.zodResolver)(y),defaultValues:{name:"",description:"",duration:"60",priceRanges:[],requirements:"",afterCareInstructions:"",isActive:!0}}),G=a=>{E(a),F.setValue("priceRanges",a)},{data:H,isLoading:I,error:J}=(0,f.useQuery)({queryKey:["admin","services",k.id],queryFn:async()=>{let a=await fetch(`/api/admin/services/${k.id}`);if(!a.ok)throw Error((await a.json().catch(()=>({}))).error||"서비스를 찾을 수 없습니다");return a.json()},enabled:!!z?.user&&"ADMIN"===z.user.role,staleTime:3e5});(0,c.useEffect)(()=>{if(H){let a=H.priceRanges||[];F.reset({name:H.name,description:H.description,duration:H.duration.toString(),priceRanges:a,requirements:H.requirements||"",afterCareInstructions:H.afterCareInstructions||"",isActive:H.isActive}),E(a)}},[H,F]);let K=(0,g.useMutation)({mutationFn:async a=>{let b=D.map(a=>({petType:a.petType,minWeight:a.minWeight??0,maxWeight:a.maxWeight??null,price:a.price,selectedBreedIds:a.selectedBreedIds||[]})),c={...a,duration:parseInt(a.duration),priceRanges:b},d=await fetch(`/api/admin/services/${k.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok)throw Error((await d.json().catch(()=>({}))).error||`서비스 수정에 실패했습니다 (${d.status})`);return d.json()},onSuccess:()=>{C.invalidateQueries({queryKey:["admin","services"]}),C.invalidateQueries({queryKey:["admin","services",k.id]}),alert("서비스가 성공적으로 수정되었습니다!"),B.push("/admin/dashboard/services")},onError:a=>{console.error("Error updating service:",a),alert(a instanceof Error?a.message:"오류가 발생했습니다")}});return((0,c.useEffect)(()=>{J&&(alert(J instanceof Error?J.message:"서비스를 불러오는데 실패했습니다"),B.push("/admin/dashboard/services"))},[J,B]),A||I)?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,b.jsx)(t.LoadingSpinner,{size:"lg"})}):z?z&&z.user?.role==="ADMIN"?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)(q.Button,{variant:"outline",size:"sm",onClick:()=>B.back(),children:[(0,b.jsx)(l.ArrowLeft,{className:"mr-2 h-4 w-4"}),"뒤로가기"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"서비스 수정"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:H?.name?`"${H.name}" 서비스의 정보를 수정합니다`:"서비스 정보를 수정해주세요"})]})]}),(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(p.CardTitle,{children:"서비스 정보"}),(0,b.jsx)(p.CardDescription,{children:"반려동물 미용 서비스의 기본 정보를 수정합니다"})]}),(0,b.jsx)(p.CardContent,{children:(0,b.jsx)(u.Form,{...F,children:(0,b.jsxs)("form",{onSubmit:F.handleSubmit(a=>{K.mutate(a)}),className:"space-y-6",children:[(0,b.jsx)(u.FormField,{control:F.control,name:"name",render:({field:a})=>(0,b.jsxs)(u.FormItem,{children:[(0,b.jsxs)(u.FormLabel,{children:["서비스명 ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(u.FormControl,{children:(0,b.jsx)(r.Input,{placeholder:"예: 기본 미용 패키지",...a})}),(0,b.jsx)(u.FormMessage,{})]})}),(0,b.jsx)(u.FormField,{control:F.control,name:"description",render:({field:a})=>(0,b.jsxs)(u.FormItem,{children:[(0,b.jsxs)(u.FormLabel,{children:["서비스 설명 ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(u.FormControl,{children:(0,b.jsx)(s.Textarea,{placeholder:"서비스에 대한 자세한 설명을 입력해주세요...",className:"min-h-20",...a})}),(0,b.jsx)(u.FormDescription,{children:"고객이 볼 수 있는 서비스 설명입니다"}),(0,b.jsx)(u.FormMessage,{})]})}),(0,b.jsx)(u.FormField,{control:F.control,name:"duration",render:({field:a})=>(0,b.jsxs)(u.FormItem,{children:[(0,b.jsxs)(u.FormLabel,{children:["소요시간 (분) ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(u.FormControl,{children:(0,b.jsx)(r.Input,{type:"number",min:"30",max:"480",placeholder:"60",...a})}),(0,b.jsx)(u.FormDescription,{children:"30분 ~ 8시간"}),(0,b.jsx)(u.FormMessage,{})]})}),(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(p.CardTitle,{className:"text-lg",children:"가격 설정"}),(0,b.jsxs)(q.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{G([...D,{id:Date.now().toString(),petType:"DOG",minWeight:0,maxWeight:null,price:5e4,selectedBreedIds:[]}])},children:[(0,b.jsx)(n.PlusIcon,{className:"mr-2 h-4 w-4"}),"가격 추가"]})]}),(0,b.jsx)(p.CardDescription,{children:"반려동물 타입과 무게 범위별로 가격을 설정하세요. 모든 무게 범위에 적용하려면 최소 무게를 0으로, 최대 무게를 비워두세요."})]}),(0,b.jsxs)(p.CardContent,{children:[0===D.length&&(0,b.jsxs)("div",{className:"rounded-lg border-2 border-dashed border-gray-300 p-6 text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-2",children:"가격 설정을 추가해주세요"}),(0,b.jsxs)(q.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{G([{id:Date.now().toString(),petType:"DOG",minWeight:0,maxWeight:null,price:5e4,selectedBreedIds:[]}])},children:[(0,b.jsx)(n.PlusIcon,{className:"mr-2 h-4 w-4"}),"가격 추가"]})]}),(0,b.jsx)("div",{className:"space-y-6",children:D.map((a,c)=>(0,b.jsxs)("div",{className:"space-y-4 rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"동물 종류"}),(0,b.jsxs)(v.Select,{value:a.petType,onValueChange:a=>{let b=[...D];b[c].petType=a,b[c].selectedBreedIds=[],G(b)},children:[(0,b.jsx)(v.SelectTrigger,{children:(0,b.jsx)(v.SelectValue,{})}),(0,b.jsxs)(v.SelectContent,{children:[(0,b.jsx)(v.SelectItem,{value:"DOG",children:"강아지"}),(0,b.jsx)(v.SelectItem,{value:"CAT",children:"고양이"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"최소 무게 (kg)"}),(0,b.jsx)(r.Input,{type:"number",min:"0",step:"0.1",value:a.minWeight??0,onChange:a=>{let b=[...D];b[c].minWeight=parseFloat(a.target.value)||0,G(b)}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"최대 무게 (kg)"}),(0,b.jsx)(r.Input,{type:"number",min:"0",step:"0.1",value:a.maxWeight??"",placeholder:"무제한",onChange:a=>{let b=[...D];b[c].maxWeight=a.target.value?parseFloat(a.target.value):null,G(b)}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"가격 (원)"}),(0,b.jsx)(r.Input,{type:"number",min:"5000",value:a.price,onChange:a=>{let b=[...D];b[c].price=parseInt(a.target.value)||0,G(b)}})]}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsx)(q.Button,{type:"button",variant:"destructive",size:"sm",onClick:()=>{G(D.filter((a,b)=>b!==c))},children:(0,b.jsx)(o.MinusIcon,{className:"h-4 w-4"})})})]}),(0,b.jsx)("div",{children:(0,b.jsx)(x.BreedSelector,{selectedBreedIds:a.selectedBreedIds||[],onChange:a=>{let b=[...D];b[c].selectedBreedIds=a,G(b)},petType:a.petType})})]},c))})]})]}),(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(p.CardTitle,{className:"text-lg",children:"추가 정보"}),(0,b.jsx)(p.CardDescription,{children:"서비스 요구사항 및 안내사항 설정"})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-6",children:[(0,b.jsx)(u.FormField,{control:F.control,name:"requirements",render:({field:a})=>(0,b.jsxs)(u.FormItem,{children:[(0,b.jsx)(u.FormLabel,{children:"서비스 요구사항"}),(0,b.jsx)(u.FormControl,{children:(0,b.jsx)(s.Textarea,{placeholder:"예: 예방접종 완료, 특정 건강 상태 필요 등...",className:"min-h-16",...a})}),(0,b.jsx)(u.FormDescription,{children:"서비스 이용을 위한 필수 조건들"}),(0,b.jsx)(u.FormMessage,{})]})}),(0,b.jsx)(u.FormField,{control:F.control,name:"afterCareInstructions",render:({field:a})=>(0,b.jsxs)(u.FormItem,{children:[(0,b.jsx)(u.FormLabel,{children:"애프터케어 안내"}),(0,b.jsx)(u.FormControl,{children:(0,b.jsx)(s.Textarea,{placeholder:"서비스 후 관리 방법이나 주의사항을 입력해주세요...",className:"min-h-16",...a})}),(0,b.jsx)(u.FormDescription,{children:"고객에게 제공할 사후 관리 가이드"}),(0,b.jsx)(u.FormMessage,{})]})}),(0,b.jsx)(u.FormField,{control:F.control,name:"isActive",render:({field:a})=>(0,b.jsxs)(u.FormItem,{className:"flex flex-row items-start space-y-0 space-x-3",children:[(0,b.jsx)(u.FormControl,{children:(0,b.jsx)(w.Checkbox,{checked:a.value,onCheckedChange:a.onChange})}),(0,b.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,b.jsx)(u.FormLabel,{children:"서비스 활성화"}),(0,b.jsx)(u.FormDescription,{children:"체크하면 고객이 예약할 수 있는 서비스가 됩니다"})]})]})})]})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,b.jsx)(q.Button,{type:"button",variant:"outline",onClick:()=>B.back(),disabled:K.isPending,children:"취소"}),(0,b.jsxs)(q.Button,{type:"submit",disabled:K.isPending,children:[K.isPending?(0,b.jsx)(t.LoadingSpinner,{size:"sm",className:"mr-2"}):(0,b.jsx)(m.Save,{className:"mr-2 h-4 w-4"}),"서비스 수정"]})]})]})})})]})]}):(B.push("/admin/dashboard/overview"),null):(B.push("/auth/signin"),null)}a.s(["default",()=>z])}];

//# sourceMappingURL=src_app_admin_dashboard_services_%5Bid%5D_edit_page_tsx_fc559744._.js.map