module.exports=[162089,a=>{a.v({actionButtons:"bookings-table-module__azg25q__actionButtons",cellAvatar:"bookings-table-module__azg25q__cellAvatar",cellContent:"bookings-table-module__azg25q__cellContent",cellIcon:"bookings-table-module__azg25q__cellIcon",cellText:"bookings-table-module__azg25q__cellText",cellTextLong:"bookings-table-module__azg25q__cellTextLong",emptyState:"bookings-table-module__azg25q__emptyState",excelTable:"bookings-table-module__azg25q__excelTable",loadingTrigger:"bookings-table-module__azg25q__loadingTrigger",scrollContainer:"bookings-table-module__azg25q__scrollContainer",statusBadge:"bookings-table-module__azg25q__statusBadge"})},738256,a=>{"use strict";var b=a.i(187924),c=a.i(529139),d=a.i(50944),e=a.i(572131),f=a.i(292e3),g=a.i(699570),h=a.i(205138),i=a.i(591119),j=a.i(941675),k=a.i(816201),l=a.i(641710),m=a.i(790166),n=a.i(724669),o=a.i(862722),p=a.i(256711),q=a.i(302491);function r(a){return new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(a)}function s(a){return(0,p.format)(new Date(a),"yyyy년 MM월 dd일",{locale:q.ko})}function t(a){return a?a.slice(0,5):"시간 미정"}function u({stats:a}){return a?(0,b.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-6",children:[(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{className:"pb-2",children:(0,b.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"전체 예약"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.totalBookings}),(0,b.jsx)(j.Calendar,{className:"text-muted-foreground h-4 w-4"})]})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{className:"pb-2",children:(0,b.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"대기중"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:a.pendingBookings}),(0,b.jsx)(l.Clock,{className:"h-4 w-4 text-yellow-600"})]})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{className:"pb-2",children:(0,b.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"확정"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:a.confirmedBookings}),(0,b.jsx)(n.TrendingUp,{className:"h-4 w-4 text-blue-600"})]})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{className:"pb-2",children:(0,b.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"완료"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.completedBookings}),(0,b.jsx)(k.CheckCircle,{className:"h-4 w-4 text-green-600"})]})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{className:"pb-2",children:(0,b.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"취소"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:a.cancelledBookings}),(0,b.jsx)(o.XCircle,{className:"h-4 w-4 text-red-600"})]})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{className:"pb-2",children:(0,b.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"총 매출"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:r(a.totalRevenue)}),(0,b.jsx)(m.DollarSign,{className:"text-muted-foreground h-4 w-4"})]})})]})]}):null}var v=a.i(369012),w=a.i(578767),x=a.i(866718),y=a.i(580701);function z({searchQuery:a,statusFilter:c,dateFilter:d,onSearchChange:e,onStatusChange:f,onDateChange:h,onApplyFilters:j,totalCount:k,currentPage:l,totalPages:m}){return(0,b.jsx)(i.Card,{className:"mb-6",children:(0,b.jsxs)(i.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)(x.Input,{placeholder:"예약번호, 고객명, 전화번호로 검색...",value:a,onChange:a=>e(a.target.value),onKeyDown:a=>{"Enter"===a.key&&j()},className:"pr-4 pl-4"})})}),(0,b.jsxs)(y.Select,{value:c,onValueChange:f,children:[(0,b.jsx)(y.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(y.SelectValue,{placeholder:"상태 필터"})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"ALL",children:"모든 상태"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.GROOMER_CONFIRM_PENDING,children:"미용사 확인 대기"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.GROOMER_CONFIRM,children:"미용사 확정"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.WORK_IN_PROGRESS,children:"진행중"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.SERVICE_COMPLETED,children:"완료"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.SERVICE_CANCELLED,children:"취소"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.BOOKING_FAILED,children:"예약 실패"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.FIRST_PAYMENT_PENDING,children:"결제 대기"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.FIRST_PAYMENT_COMPLETE,children:"결제 완료"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.FIRST_PAYMENT_VERIFY,children:"결제 확인 중"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.ADDITIONAL_PAYMENT_PENDING,children:"추가 결제 대기"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.ADDITIONAL_PAYMENT_COMPLETE,children:"추가 결제 완료"}),(0,b.jsx)(y.SelectItem,{value:w.BookingStatus.WORK_IN_PROGRESS,children:"진행중"})]})]}),(0,b.jsx)(x.Input,{type:"date",value:d,onChange:a=>h(a.target.value),className:"w-[180px]"}),(0,b.jsxs)(g.Button,{onClick:j,variant:"outline",children:[(0,b.jsx)(v.Filter,{className:"mr-2 h-4 w-4"}),"필터 적용"]})]}),k>0&&(0,b.jsxs)("div",{className:"text-muted-foreground mt-2 text-sm",children:["총 ",k.toLocaleString("ko-KR"),"개의 예약 (페이지 ",l," / ",m,")"]})]})})}var A=a.i(405784),B=a.i(767552),C=a.i(177156),D=a.i(879360),E=a.i(781560),F=a.i(335732),G=a.i(206015),H=a.i(400187),I=a.i(786304),J=a.i(368114);let K=(0,H.cva)("inline-flex items-center gap-1",{variants:{variant:{default:"",compact:"text-xs px-1.5 py-0.5",detailed:"text-sm px-3 py-1.5",highlight:"font-semibold",minimal:"border-0 bg-transparent"},size:{sm:"text-xs",default:"text-sm",lg:"text-base"}},defaultVariants:{variant:"default",size:"default"}}),L=e.forwardRef(({className:a,variant:c,size:d,status:e,showIcon:g=!0,...h},i)=>{let j={[w.BookingStatus.FIRST_PAYMENT_PENDING]:{label:"1차 결제 대기",variant:"secondary",icon:(0,b.jsx)(l.Clock,{className:"h-3 w-3"})},[w.BookingStatus.FIRST_PAYMENT_COMPLETE]:{label:"1차 결제 완료",variant:"outline",icon:(0,b.jsx)(k.CheckCircle,{className:"h-3 w-3"})},[w.BookingStatus.FIRST_PAYMENT_VERIFY]:{label:"1차 결제 확인중",variant:"secondary",icon:(0,b.jsx)(l.Clock,{className:"h-3 w-3"})},[w.BookingStatus.GROOMER_CONFIRM_PENDING]:{label:"미용사 확인 대기",variant:"secondary",icon:(0,b.jsx)(f.AlertCircle,{className:"h-3 w-3"})},[w.BookingStatus.GROOMER_CONFIRM]:{label:"미용사 확정",variant:"default",icon:(0,b.jsx)(k.CheckCircle,{className:"h-3 w-3"})},[w.BookingStatus.ADDITIONAL_PAYMENT_PENDING]:{label:"추가 결제 대기",variant:"secondary",icon:(0,b.jsx)(m.DollarSign,{className:"h-3 w-3"})},[w.BookingStatus.ADDITIONAL_PAYMENT_COMPLETE]:{label:"추가 결제 완료",variant:"outline",icon:(0,b.jsx)(k.CheckCircle,{className:"h-3 w-3"})},[w.BookingStatus.WORK_IN_PROGRESS]:{label:"진행중",variant:"default",icon:(0,b.jsx)(l.Clock,{className:"h-3 w-3"})},[w.BookingStatus.SERVICE_COMPLETED]:{label:"완료",variant:"default",icon:(0,b.jsx)(k.CheckCircle,{className:"h-3 w-3"})},[w.BookingStatus.SERVICE_CANCELLED]:{label:"취소됨",variant:"destructive",icon:(0,b.jsx)(o.XCircle,{className:"h-3 w-3"})},[w.BookingStatus.BOOKING_FAILED]:{label:"예약 실패",variant:"destructive",icon:(0,b.jsx)(o.XCircle,{className:"h-3 w-3"})}}[e]||{label:"알 수 없음",variant:"secondary",icon:(0,b.jsx)(f.AlertCircle,{className:"h-3 w-3"})};return(0,b.jsxs)(I.Badge,{ref:i,variant:j.variant,className:(0,J.cn)(K({variant:c,size:d,className:a})),...h,children:[g&&j.icon,j.label]})});L.displayName="BookingStatusBadge";var M=a.i(162089);function N({bookings:a,isLoading:c,sortBy:d,sortOrder:e,onSort:f,onViewDetails:h,onConfirm:l,onCancel:m,onComplete:n,onDelete:p,scrollContainerRef:q,loadMoreTriggerRef:u,hasMore:v}){return(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"p-0",children:(0,b.jsxs)("div",{ref:q,className:M.default.scrollContainer,children:[(0,b.jsxs)(G.Table,{className:M.default.excelTable,children:[(0,b.jsx)(G.TableHeader,{children:(0,b.jsxs)(G.TableRow,{children:[(0,b.jsx)(G.TableHead,{children:"번호"}),(0,b.jsx)(G.TableHead,{children:"고객명"}),(0,b.jsx)(G.TableHead,{children:"전화번호"}),(0,b.jsx)(G.TableHead,{children:"이메일"}),(0,b.jsx)(G.TableHead,{children:"반려동물"}),(0,b.jsx)(G.TableHead,{children:"서비스"}),(0,b.jsx)(G.TableHead,{children:"미용사"}),(0,b.jsx)(G.TableHead,{children:"미용사 전화번호"}),(0,b.jsx)(G.TableHead,{children:"예약일"}),(0,b.jsx)(G.TableHead,{children:"시작시간"}),(0,b.jsx)(G.TableHead,{className:"cursor-pointer",onClick:()=>f("amount"),children:(0,b.jsxs)("div",{className:"flex items-center",children:["총액","amount"===d&&("desc"===e?(0,b.jsx)(A.ChevronDown,{className:"ml-1 h-4 w-4"}):(0,b.jsx)(B.ChevronUp,{className:"ml-1 h-4 w-4"}))]})}),(0,b.jsx)(G.TableHead,{children:"결제액"}),(0,b.jsx)(G.TableHead,{children:"추가액"}),(0,b.jsx)(G.TableHead,{className:"cursor-pointer text-right",onClick:()=>f("status"),children:(0,b.jsxs)("div",{className:"flex items-center justify-end",children:["상태","status"===d&&("desc"===e?(0,b.jsx)(A.ChevronDown,{className:"ml-1 h-4 w-4"}):(0,b.jsx)(B.ChevronUp,{className:"ml-1 h-4 w-4"}))]})}),(0,b.jsx)(G.TableHead,{className:"text-right",children:"액션"})]})}),(0,b.jsxs)(G.TableBody,{children:[0===a.length&&!c&&(0,b.jsx)(G.TableRow,{children:(0,b.jsx)(G.TableCell,{colSpan:15,children:(0,b.jsxs)("div",{className:M.default.emptyState,children:[(0,b.jsx)(j.Calendar,{className:"mx-auto mb-3 h-12 w-12 text-gray-300"}),(0,b.jsx)("p",{children:"예약이 없습니다"}),(0,b.jsx)("p",{children:"필터 조건을 변경해보세요"})]})})}),a.map(a=>{var c,d;return(0,b.jsxs)(G.TableRow,{children:[(0,b.jsxs)(G.TableCell,{children:["#",a.bookingNumber.slice(-6)]}),(0,b.jsx)(G.TableCell,{children:a.customer?.name||"이름 없음"}),(0,b.jsx)(G.TableCell,{children:a.customer?.phoneNumber||"-"}),(0,b.jsx)(G.TableCell,{children:a.customer?.email||"-"}),(0,b.jsx)(G.TableCell,{children:a.bookingPets.map(a=>a.pet.name).join(", ")}),(0,b.jsx)(G.TableCell,{children:a.bookingPets.flatMap(a=>a.services.map(a=>a.service?.name||"서비스명 없음")).join(", ")}),(0,b.jsx)(G.TableCell,{children:a.groomer?.name||"미지정"}),(0,b.jsx)(G.TableCell,{children:a.groomer?.phoneNumber||"-"}),(0,b.jsx)(G.TableCell,{children:s(a.serviceDate)}),(0,b.jsx)(G.TableCell,{children:t(a.startTime)}),(0,b.jsx)(G.TableCell,{children:r(a.totalAmount)}),(0,b.jsx)(G.TableCell,{children:a.paidAmount>0?r(a.paidAmount):"-"}),(0,b.jsx)(G.TableCell,{children:a.additionalAmount&&a.additionalAmount>0?r(a.additionalAmount):"-"}),(0,b.jsx)(G.TableCell,{className:"text-right",children:(0,b.jsx)(L,{status:a.status})}),(0,b.jsx)(G.TableCell,{className:"text-right",children:(0,b.jsxs)(F.DropdownMenu,{children:[(0,b.jsx)(F.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(D.MoreVertical,{className:"h-4 w-4"})]})}),(0,b.jsxs)(F.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(F.DropdownMenuLabel,{children:"액션"}),(0,b.jsxs)(F.DropdownMenuItem,{onClick:()=>h(a),children:[(0,b.jsx)(C.Eye,{className:"mr-2 h-4 w-4"}),"상세보기"]}),((c=a.status)===w.BookingStatus.GROOMER_CONFIRM_PENDING||c===w.BookingStatus.FIRST_PAYMENT_COMPLETE)&&(0,b.jsxs)(F.DropdownMenuItem,{onClick:()=>l(a.id),children:[(0,b.jsx)(k.CheckCircle,{className:"mr-2 h-4 w-4 text-green-600"}),"예약 확정"]}),a.status===w.BookingStatus.WORK_IN_PROGRESS&&(0,b.jsxs)(F.DropdownMenuItem,{onClick:()=>n(a.id),children:[(0,b.jsx)(k.CheckCircle,{className:"mr-2 h-4 w-4 text-blue-600"}),"서비스 완료"]}),(0,b.jsx)(F.DropdownMenuSeparator,{}),(d=a.status)!==w.BookingStatus.SERVICE_CANCELLED&&d!==w.BookingStatus.SERVICE_COMPLETED&&d!==w.BookingStatus.BOOKING_FAILED&&(0,b.jsxs)(F.DropdownMenuItem,{onClick:()=>m(a.id),className:"text-red-600",children:[(0,b.jsx)(o.XCircle,{className:"mr-2 h-4 w-4"}),a.status===w.BookingStatus.SERVICE_COMPLETED?"환불 처리":"예약 취소"]}),(0,b.jsxs)(F.DropdownMenuItem,{onClick:()=>p(a),className:"text-red-600",children:[(0,b.jsx)(E.Trash2,{className:"mr-2 h-4 w-4"}),"삭제"]})]})]})})]},a.id)})]})]}),v&&(0,b.jsx)("div",{ref:u,className:M.default.loadingTrigger,children:c?"로딩 중...":"스크롤하여 더 보기"}),!v&&a.length>0&&(0,b.jsx)("div",{className:M.default.loadingTrigger,children:"모든 예약을 불러왔습니다"})]})})})}var O=a.i(633508),P=a.i(814574),Q=a.i(269876),R=a.i(505084);function S({booking:a,open:c,onClose:d}){return a?(0,b.jsx)(P.Dialog,{open:c,onOpenChange:d,children:(0,b.jsxs)(P.DialogContent,{className:"max-h-[90vh] max-w-3xl p-0",children:[(0,b.jsx)(P.DialogHeader,{className:"px-6 pt-6 pb-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(P.DialogTitle,{className:"text-2xl",children:"예약 상세 정보"}),(0,b.jsxs)(P.DialogDescription,{className:"mt-1",children:["예약번호: #",a.bookingNumber.slice(-6)]})]}),(0,b.jsx)(L,{status:a.status,variant:"detailed"})]})}),(0,b.jsx)(Q.ScrollArea,{className:"max-h-[calc(90vh-120px)]",children:(0,b.jsxs)("div",{className:"space-y-6 px-6 pb-6",children:[(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"고객 정보"}),(0,b.jsx)("div",{className:"bg-muted/50 space-y-2 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"고객명"}),(0,b.jsx)("p",{className:"font-medium",children:a.customer?.name||"이름 없음"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"전화번호"}),(0,b.jsx)("p",{className:"font-medium",children:a.customer?.phoneNumber||"-"})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"이메일"}),(0,b.jsx)("p",{className:"font-medium",children:a.customer?.email||"-"})]})]})})]}),(0,b.jsx)(R.Separator,{}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"미용사 정보"}),(0,b.jsx)("div",{className:"bg-muted/50 space-y-2 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"미용사명"}),(0,b.jsx)("p",{className:"font-medium",children:a.groomer?.name||"미지정"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"전화번호"}),(0,b.jsx)("p",{className:"font-medium",children:a.groomer?.phoneNumber||"-"})]}),a.groomer?.email&&(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"이메일"}),(0,b.jsx)("p",{className:"font-medium",children:a.groomer.email})]})]})})]}),(0,b.jsx)(R.Separator,{}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"서비스 정보"}),(0,b.jsx)("div",{className:"space-y-3",children:a.bookingPets.map((a,c)=>(0,b.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,b.jsx)("h4",{className:"font-semibold",children:a.pet.name}),(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:a.pet.breed?.name||"품종 미정"})]}),(0,b.jsx)("div",{className:"space-y-2",children:a.services.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{children:a.service?.name||"서비스명 없음"}),(0,b.jsx)("span",{className:"font-medium",children:r(a.price||0)})]},c))})]},c))})]}),(0,b.jsx)(R.Separator,{}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"예약 정보"}),(0,b.jsx)("div",{className:"bg-muted/50 space-y-3 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"예약일"}),(0,b.jsx)("p",{className:"font-medium",children:s(a.serviceDate)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"시작시간"}),(0,b.jsx)("p",{className:"font-medium",children:t(a.startTime)})]}),a.endTime&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"종료시간"}),(0,b.jsx)("p",{className:"font-medium",children:t(a.endTime)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"예약일시"}),(0,b.jsxs)("p",{className:"text-xs font-medium",children:[s(a.createdAt)," ",t(a.createdAt)]})]})]})})]}),(0,b.jsx)(R.Separator,{}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"결제 정보"}),(0,b.jsxs)("div",{className:"bg-muted/50 space-y-2 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"총 예약금액"}),(0,b.jsx)("span",{className:"text-lg font-bold",children:r(a.totalAmount)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"결제액"}),(0,b.jsx)("span",{className:"font-medium",children:a.paidAmount>0?r(a.paidAmount):"-"})]}),a.additionalAmount&&a.additionalAmount>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"추가액"}),(0,b.jsx)("span",{className:"font-medium text-orange-600",children:r(a.additionalAmount)})]}),a.payments&&a.payments.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(R.Separator,{className:"my-2"}),(0,b.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"결제 방법"}),(0,b.jsx)("span",{children:a.payments[0]?.method||"-"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"결제 상태"}),(0,b.jsx)("span",{children:a.payments[0]?.status||"-"})]})]})]})]})]}),a.customerAddress&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(R.Separator,{}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"방문 주소"}),(0,b.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"mb-1 font-medium",children:[a.customerAddress.street,a.customerAddress.city,a.customerAddress.state].filter(Boolean).join(" ")||"-"}),a.customerAddress.zipCode&&(0,b.jsxs)("p",{className:"text-muted-foreground mt-2 text-xs",children:["우편번호: ",a.customerAddress.zipCode]})]})]})]}),a.notes&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(R.Separator,{}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"메모"}),(0,b.jsx)("div",{className:"bg-muted/50 rounded-lg p-4",children:(0,b.jsx)("p",{className:"text-muted-foreground text-sm whitespace-pre-wrap",children:a.notes})})]})]})]})}),(0,b.jsx)("div",{className:"flex justify-end border-t px-6 py-4",children:(0,b.jsxs)(g.Button,{onClick:d,variant:"outline",children:[(0,b.jsx)(O.X,{className:"mr-2 h-4 w-4"}),"닫기"]})})]})}):null}var T=a.i(73570),U=a.i(486192);function V({booking:a,open:c,isDeleting:d,onConfirm:e,onCancel:f}){return a?(0,b.jsx)(U.AlertDialog,{open:c,onOpenChange:a=>!a&&f(),children:(0,b.jsxs)(U.AlertDialogContent,{children:[(0,b.jsxs)(U.AlertDialogHeader,{children:[(0,b.jsxs)(U.AlertDialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(T.AlertTriangle,{className:"text-destructive h-5 w-5"}),"예약 삭제 확인"]}),(0,b.jsxs)(U.AlertDialogDescription,{className:"space-y-3",children:[(0,b.jsx)("p",{children:"정말로 이 예약을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."}),(0,b.jsxs)("div",{className:"bg-muted text-foreground space-y-2 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"예약번호"}),(0,b.jsxs)("span",{className:"text-sm",children:["#",a.bookingNumber.slice(-6)]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"고객명"}),(0,b.jsx)("span",{className:"text-sm",children:a.customer?.name||"이름 없음"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"예약일시"}),(0,b.jsxs)("span",{className:"text-sm",children:[s(a.serviceDate)," ",t(a.startTime)]})]}),a.bookingPets.length>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"반려동물"}),(0,b.jsx)("span",{className:"text-sm",children:a.bookingPets.map(a=>a.pet.name).join(", ")})]})]}),(0,b.jsx)("p",{className:"text-destructive font-medium",children:"⚠️ 이 예약과 관련된 모든 데이터가 영구적으로 삭제됩니다."})]})]}),(0,b.jsxs)(U.AlertDialogFooter,{children:[(0,b.jsx)(U.AlertDialogCancel,{onClick:f,disabled:d,children:"취소"}),(0,b.jsx)(U.AlertDialogAction,{onClick:e,disabled:d,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:d?"삭제 중...":"삭제"})]})]})}):null}var W=a.i(612101);function X(){let{data:a,isPending:j}=(0,c.useSession)(),k=(0,d.useRouter)(),[l,m]=(0,e.useState)(""),[n,o]=(0,e.useState)("ALL"),[p,q]=(0,e.useState)(""),[r,s]=(0,e.useState)("date"),[t,v]=(0,e.useState)("desc"),[x,y]=(0,e.useState)({searchQuery:"",statusFilter:"ALL",dateFilter:"",sortBy:"date",sortOrder:"desc"}),[A,B]=(0,e.useState)(null),[C,D]=(0,e.useState)(!1),[E,F]=(0,e.useState)(!1),[G,H]=(0,e.useState)(1),[I,J]=(0,e.useState)([]),K=(0,e.useRef)(null),L=(0,e.useRef)(null);(0,e.useEffect)(()=>{a||k.push("/auth/signin"),a?.user?.role&&"ADMIN"!==a.user.role&&k.push("/admin/dashboard/overview")},[a,k]);let M=(0,e.useCallback)(()=>{y({searchQuery:l,statusFilter:n,dateFilter:p,sortBy:r,sortOrder:t}),H(1),J([])},[l,n,p,r,t]),{bookings:O,pagination:P,stats:Q,isLoading:R,isFetching:T,isError:U,error:X}=function(a,b=1,c=!0){let{data:d,isLoading:f,isFetching:g,isError:h,error:i}=(0,W.useGetBookingsQuery)({...a,page:b,limit:50},{skip:!c}),j=(0,e.useMemo)(()=>{if(!d?.bookings)return null;let a=d.bookings,b=d.pagination.totalCount,c=a.filter(a=>a.status===w.BookingStatus.FIRST_PAYMENT_PENDING||a.status===w.BookingStatus.FIRST_PAYMENT_VERIFY||a.status===w.BookingStatus.GROOMER_CONFIRM_PENDING||a.status===w.BookingStatus.ADDITIONAL_PAYMENT_PENDING).length,e=a.filter(a=>a.status===w.BookingStatus.GROOMER_CONFIRM||a.status===w.BookingStatus.ADDITIONAL_PAYMENT_COMPLETE).length,f=a.filter(a=>a.status===w.BookingStatus.SERVICE_COMPLETED).length;return{totalBookings:b,pendingBookings:c,confirmedBookings:e,completedBookings:f,cancelledBookings:a.filter(a=>a.status===w.BookingStatus.SERVICE_CANCELLED).length,totalRevenue:a.reduce((a,b)=>a+b.paidAmount,0)}},[d]);return{bookings:d?.bookings??[],pagination:d?.pagination,stats:j,isLoading:f,isFetching:g,isError:h,error:i}}(x,G,!!a?.user&&"ADMIN"===a.user.role),[Y]=(0,W.useConfirmBookingMutation)(),[Z]=(0,W.useCancelBookingMutation)(),[$]=(0,W.useCompleteBookingMutation)(),[_]=(0,W.useDeleteBookingMutation)();(0,e.useEffect)(()=>{O.length>0&&!R&&J(a=>{let b=new Map(a.map(a=>[a.id,a]));return O.forEach(a=>b.set(a.id,a)),Array.from(b.values())})},[O,R]),(0,e.useEffect)(()=>{J([]),H(1)},[x]);let aa=!!P&&G<P.totalPages,ab=P?.totalCount??0,ac=P?.totalPages??1,ad=(0,e.useCallback)(()=>{aa&&!T&&H(a=>a+1)},[aa,T]),ae=(0,e.useRef)(ad);(0,e.useEffect)(()=>{ae.current=ad},[ad]),(0,e.useEffect)(()=>{let a=L.current;if(!a)return;let b=new IntersectionObserver(a=>{a[0]?.isIntersecting&&ae.current()},{root:K.current,rootMargin:"100px",threshold:.1});return b.observe(a),()=>b.disconnect()},[]);let af=async a=>{try{await Y(a).unwrap()}catch(a){alert(a instanceof Error?a.message:"예약 확정 처리에 실패했습니다.")}},ag=async a=>{try{await Z(a).unwrap()}catch(a){alert(a instanceof Error?a.message:"예약 취소 처리에 실패했습니다.")}},ah=async a=>{try{await $(a).unwrap()}catch(a){alert(a instanceof Error?a.message:"예약 완료 처리에 실패했습니다.")}},ai=async()=>{if(A)try{await _(A.id).unwrap(),F(!1),B(null)}catch(a){alert(a instanceof Error?a.message:"예약 삭제 처리에 실패했습니다.")}};return j||R&&0===I.length?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,b.jsx)(h.LoadingSpinner,{size:"lg"})}):a&&a.user?.role==="ADMIN"?(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:"예약 관리"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"전체 예약을 관리하고 처리합니다"})]}),(0,b.jsx)(u,{stats:Q??null}),(0,b.jsx)(z,{searchQuery:l,statusFilter:n,dateFilter:p,onSearchChange:m,onStatusChange:a=>o(a),onDateChange:q,onApplyFilters:M,totalCount:ab,currentPage:G,totalPages:ac}),U&&X&&(0,b.jsx)(i.Card,{className:"border-destructive mb-6",children:(0,b.jsx)(i.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(f.AlertCircle,{className:"text-destructive mt-0.5 h-5 w-5 shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-destructive mb-1 font-semibold",children:"데이터를 불러오는 중 오류가 발생했습니다"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-3 text-sm",children:X instanceof Error?X.message:"잠시 후 다시 시도해주세요"}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>{H(1),J([])},children:"다시 시도"})]})]})})}),(0,b.jsx)(N,{bookings:I,isLoading:T,sortBy:r,sortOrder:t,onSort:a=>{r===a?v("asc"===t?"desc":"asc"):(s(a),v("desc"))},onViewDetails:a=>{B(a),D(!0)},onConfirm:af,onCancel:ag,onComplete:ah,onDelete:a=>{B(a),F(!0)},scrollContainerRef:K,loadMoreTriggerRef:L,hasMore:aa}),(0,b.jsx)(S,{booking:A,open:C,onClose:()=>D(!1)}),(0,b.jsx)(V,{booking:A,open:E,isDeleting:!1,onConfirm:ai,onCancel:()=>F(!1)})]}):null}a.s(["default",()=>X],738256)}];

//# sourceMappingURL=src_7cff5998._.js.map