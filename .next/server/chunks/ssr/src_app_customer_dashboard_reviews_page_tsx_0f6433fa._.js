module.exports=[834469,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(571987),f=a.i(433217),g=a.i(370025),h=a.i(937927),i=a.i(591119),j=a.i(699570),k=a.i(786304),l=a.i(875083),m=a.i(814574),n=a.i(517756),n=n,o=a.i(50522),p=a.i(633508);let q=(0,a.i(170106).default)("expand",[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]]);var r=a.i(368114);function s({images:a,className:d,aspectRatio:f="square",columns:g={mobile:2,tablet:3,desktop:4}}){let[h,i]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1),s={square:"aspect-square",video:"aspect-video",portrait:"aspect-[3/4]"}[f],t=(0,r.cn)("grid gap-2",`grid-cols-${g.mobile||2}`,`sm:grid-cols-${g.tablet||3}`,`lg:grid-cols-${g.desktop||4}`,d);return a&&0!==a.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:t,children:a.map((c,d)=>(0,b.jsxs)("button",{onClick:()=>{i(d),l(!0)},className:(0,r.cn)("bg-muted relative overflow-hidden rounded-lg","transition-all duration-200","hover:scale-105 hover:shadow-lg","focus:ring-primary focus:ring-2 focus:ring-offset-2 focus:outline-none","group",s),"aria-label":`View image ${d+1} of ${a.length}`,children:[(0,b.jsx)(e.default,{src:c.url,alt:c.alt||`Image ${d+1}`,fill:!0,className:"object-cover",sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 25vw",unoptimized:!0}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/0 transition-colors group-hover:bg-black/10",children:(0,b.jsx)("div",{className:"absolute right-2 bottom-2 opacity-0 transition-opacity group-hover:opacity-100",children:(0,b.jsx)("div",{className:"rounded-full bg-white/90 p-1 backdrop-blur-sm",children:(0,b.jsx)(q,{className:"h-4 w-4 text-gray-700"})})})})]},c.id))}),(0,b.jsx)(m.Dialog,{open:k,onOpenChange:l,children:(0,b.jsx)(m.DialogContent,{className:"h-[90vh] w-full max-w-screen-lg overflow-hidden bg-black/95 p-0",children:null!==h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>{l(!1),i(null)},className:"absolute top-4 right-4 z-50 text-white hover:bg-white/20","aria-label":"Close lightbox",children:(0,b.jsx)(p.X,{className:"h-6 w-6"})}),(0,b.jsx)("div",{className:"absolute top-4 left-4 z-50 rounded-full bg-black/50 px-3 py-1 text-white",children:(0,b.jsxs)("span",{className:"text-sm font-medium",children:[h+1," / ",a.length]})}),a.length>1&&(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>{null===h||i(0===h?a.length-1:h-1)},className:"absolute top-1/2 left-4 z-50 -translate-y-1/2 text-white hover:bg-white/20","aria-label":"Previous image",children:(0,b.jsx)(n.default,{className:"h-8 w-8"})}),(0,b.jsx)("div",{className:"relative flex h-full w-full items-center justify-center p-8",children:(0,b.jsx)(e.default,{src:a[h].url,alt:a[h].alt||`Image ${h+1}`,width:1200,height:800,className:"max-h-full max-w-full object-contain",unoptimized:!0,priority:!0})}),a.length>1&&(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>{null===h||i(h===a.length-1?0:h+1)},className:"absolute top-1/2 right-4 z-50 -translate-y-1/2 text-white hover:bg-white/20","aria-label":"Next image",children:(0,b.jsx)(o.ChevronRight,{className:"h-8 w-8"})}),a.length>1&&(0,b.jsx)("div",{className:"absolute right-0 bottom-0 left-0 hidden bg-black/80 p-4 md:block",children:(0,b.jsx)("div",{className:"flex max-w-full justify-center gap-2 overflow-x-auto",children:a.map((a,c)=>(0,b.jsx)("button",{onClick:()=>i(c),className:(0,r.cn)("relative h-16 w-16 flex-shrink-0 overflow-hidden rounded","transition-all duration-200",h===c?"scale-110 ring-2 ring-white":"opacity-60 hover:opacity-100"),"aria-label":`Go to image ${c+1}`,children:(0,b.jsx)(e.default,{src:a.url,alt:`Thumbnail ${c+1}`,fill:!0,className:"object-cover",sizes:"64px",unoptimized:!0})},a.id))})})]})})})]}):null}var t=a.i(486192),u=a.i(73570),v=a.i(797063),w=a.i(816201);let x={default:{icon:v.Info,iconClass:"text-blue-500",bgClass:"bg-blue-50",buttonClass:""},destructive:{icon:u.AlertTriangle,iconClass:"text-red-500",bgClass:"bg-red-50",buttonClass:"bg-red-600 hover:bg-red-700 text-white"},warning:{icon:u.AlertTriangle,iconClass:"text-yellow-500",bgClass:"bg-yellow-50",buttonClass:"bg-yellow-600 hover:bg-yellow-700 text-white"},success:{icon:w.CheckCircle,iconClass:"text-green-500",bgClass:"bg-green-50",buttonClass:"bg-green-600 hover:bg-green-700 text-white"},info:{icon:v.Info,iconClass:"text-blue-500",bgClass:"bg-blue-50",buttonClass:"bg-blue-600 hover:bg-blue-700 text-white"}};function y({open:a,onOpenChange:c,title:d,description:e,confirmText:f="확인",cancelText:g="취소",onConfirm:h,onCancel:i,variant:j="default",showIcon:k=!0,isLoading:l=!1}){let m=x[j],n=m.icon,o=async()=>{await h(),c(!1)};return(0,b.jsx)(t.AlertDialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(t.AlertDialogContent,{className:"max-w-md",children:[(0,b.jsx)(t.AlertDialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[k&&(0,b.jsx)("div",{className:(0,r.cn)("flex-shrink-0 rounded-full p-3",m.bgClass,"hidden sm:flex"),children:(0,b.jsx)(n,{className:(0,r.cn)("h-6 w-6",m.iconClass)})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)(t.AlertDialogTitle,{className:"text-lg sm:text-xl",children:[k&&(0,b.jsx)(n,{className:(0,r.cn)("mr-2 inline h-5 w-5 sm:hidden",m.iconClass)}),d]}),(0,b.jsx)(t.AlertDialogDescription,{className:"mt-2 text-sm sm:text-base",children:e})]})]})}),(0,b.jsxs)(t.AlertDialogFooter,{className:"flex-col gap-2 sm:flex-row sm:gap-0",children:[(0,b.jsx)(t.AlertDialogCancel,{onClick:()=>{i?.(),c(!1)},disabled:l,className:"w-full sm:w-auto",children:g}),(0,b.jsx)(t.AlertDialogAction,{onClick:o,disabled:l,className:(0,r.cn)("w-full sm:w-auto",m.buttonClass,l&&"cursor-not-allowed opacity-50"),children:l?(0,b.jsxs)("span",{className:"flex items-center justify-center",children:[(0,b.jsxs)("svg",{className:"mr-2 -ml-1 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"처리 중..."]}):f})]})]})})}var z=a.i(335732),A=a.i(931105),B=a.i(730769),C=a.i(130748),D=a.i(983290),E=a.i(179165),F=a.i(441094),G=a.i(879360),H=a.i(177156),I=a.i(641710),J=a.i(724669),K=a.i(256711),L=a.i(302491),M=a.i(318826),N=a.i(318868);function O(){return(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"mb-4 flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-gray-200"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-2 h-4 w-24 rounded bg-gray-200"}),(0,b.jsx)("div",{className:"h-3 w-32 rounded bg-gray-200"})]})]})}),(0,b.jsx)("div",{className:"mb-3 flex gap-1",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)("div",{className:"h-5 w-5 rounded bg-gray-200"},c))}),(0,b.jsx)("div",{className:"mb-4 h-16 rounded bg-gray-200"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[void 0,void 0].map((a,c)=>(0,b.jsx)("div",{className:"aspect-square rounded bg-gray-200"},c))})]})})})}function P(){let a=(0,d.useRouter)(),m=(0,h.useQueryClient)(),[n,o]=(0,c.useState)("all"),{ConfirmationDialogComponent:p,showConfirmation:q}=function(){let[a,d]=(0,c.useState)(!1),[e,f]=(0,c.useState)({title:"",description:"",onConfirm:()=>{}});return{ConfirmationDialogComponent:(0,b.jsx)(y,{open:a,onOpenChange:d,...e}),showConfirmation:a=>new Promise(b=>{f({...a,onConfirm:async()=>{await a.onConfirm(),b(!0)},onCancel:()=>{a.onCancel?.(),b(!1)}}),d(!0)})}}(),{data:t=[],isLoading:u,isError:v,error:w}=(0,f.useQuery)({queryKey:["customer","reviews"],queryFn:async()=>{let a=await fetch("/api/customer/reviews");if(!a.ok)throw Error("Failed to fetch reviews");return a.json()}}),x=(0,g.useMutation)({mutationFn:async a=>{let b=await fetch(`/api/customer/reviews/${a}`,{method:"DELETE"});if(!b.ok)throw Error("Failed to delete review");return b.json()},onSuccess:()=>{m.invalidateQueries({queryKey:["customer","reviews"]})}}),P=async a=>{await q({title:"리뷰 삭제",description:"이 리뷰를 삭제하시겠습니까? 삭제된 리뷰는 복구할 수 없습니다.",confirmText:"삭제",cancelText:"취소",variant:"destructive",onConfirm:async()=>{try{await x.mutateAsync(a)}catch(a){console.error("Error deleting review:",a),alert("리뷰 삭제 중 오류가 발생했습니다.")}}})},Q=t.filter(a=>"all"===n||("with-photos"===n?a.images.length>0:"with-response"!==n||null!==a.response)),R=t.length>0?t.reduce((a,b)=>a+b.rating,0)/t.length:0,S={total:t.length,withPhotos:t.filter(a=>a.images.length>0).length,withResponse:t.filter(a=>null!==a.response).length,thisMonth:t.filter(a=>{let b=new Date(a.createdAt),c=new Date;return b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()}).length};return u?(0,b.jsxs)("div",{className:"container mx-auto max-w-6xl px-4 py-6 sm:py-8",children:[(0,b.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,b.jsx)("div",{className:"mb-2 h-8 w-32 animate-pulse rounded bg-gray-200"}),(0,b.jsx)("div",{className:"h-4 w-48 animate-pulse rounded bg-gray-200"})]}),(0,b.jsx)("div",{className:"mb-6 grid grid-cols-2 gap-3 sm:mb-8 sm:gap-4 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(i.Card,{children:(0,b.jsx)(i.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"mb-2 h-3 w-16 rounded bg-gray-200"}),(0,b.jsx)("div",{className:"h-7 w-12 rounded bg-gray-200"})]})})},c))}),(0,b.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(O,{},c))})]}):(0,b.jsxs)(b.Fragment,{children:[p,(0,b.jsxs)("div",{className:"container mx-auto max-w-6xl px-4 py-6 sm:py-8",children:[(0,b.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,b.jsx)("h1",{className:"mb-2 text-2xl font-bold sm:text-3xl",children:"내 리뷰 관리"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:"작성한 리뷰를 확인하고 관리할 수 있습니다"})]}),(0,b.jsxs)(N.StatsGrid,{children:[(0,b.jsx)(M.StatsCard,{title:"전체 리뷰",value:`${S.total}건`,icon:(0,b.jsx)(F.MessageSquareIcon,{className:"h-6 w-6 text-blue-600"}),iconBgColor:"bg-blue-100"}),(0,b.jsx)(M.StatsCard,{title:"평균 별점",value:R.toFixed(1),icon:(0,b.jsx)(A.StarIcon,{className:"h-6 w-6 text-yellow-600"}),iconBgColor:"bg-yellow-100"}),(0,b.jsx)(M.StatsCard,{title:"사진 리뷰",value:`${S.withPhotos}건`,icon:(0,b.jsx)(E.ImageIcon,{className:"h-6 w-6 text-blue-600"}),iconBgColor:"bg-blue-100"}),(0,b.jsx)(M.StatsCard,{title:"이번 달",value:`${S.thisMonth}건`,icon:(0,b.jsx)(J.TrendingUp,{className:"h-6 w-6 text-green-600"}),iconBgColor:"bg-green-100"})]}),(0,b.jsx)(l.Tabs,{value:n,onValueChange:o,className:"mb-6",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(l.TabsList,{className:"inline-flex w-auto min-w-full sm:min-w-0",children:[(0,b.jsx)(l.TabsTrigger,{value:"all",className:"flex-1 sm:flex-initial",children:(0,b.jsxs)("span",{className:"whitespace-nowrap",children:["전체 (",S.total,")"]})}),(0,b.jsx)(l.TabsTrigger,{value:"with-photos",className:"flex-1 sm:flex-initial",children:(0,b.jsxs)("span",{className:"whitespace-nowrap",children:["사진 리뷰 (",S.withPhotos,")"]})}),(0,b.jsx)(l.TabsTrigger,{value:"with-response",className:"flex-1 sm:flex-initial",children:(0,b.jsxs)("span",{className:"whitespace-nowrap",children:["답변 받은 (",S.withResponse,")"]})})]})})}),0===Q.length?(0,b.jsx)(i.Card,{className:"border-dashed",children:(0,b.jsx)(i.CardContent,{className:"py-8 sm:py-12",children:(0,b.jsxs)("div",{className:"space-y-4 text-center",children:[(0,b.jsx)("div",{className:"bg-muted mx-auto flex h-12 w-12 items-center justify-center rounded-full sm:h-16 sm:w-16",children:(0,b.jsx)(F.MessageSquareIcon,{className:"text-muted-foreground h-6 w-6 sm:h-8 sm:w-8"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-base font-semibold sm:text-lg",children:"리뷰가 없습니다"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"with-photos"===n?"사진과 함께 작성한 리뷰가 없습니다.":"with-response"===n?"답변을 받은 리뷰가 없습니다.":"아직 작성한 리뷰가 없습니다."})]}),(0,b.jsx)(j.Button,{onClick:()=>a.push("/customer/dashboard/bookings"),className:"w-full sm:w-auto",children:"예약 내역 보기"})]})})}):(0,b.jsx)("div",{className:"space-y-4",children:Q.map(c=>(0,b.jsx)(i.Card,{className:"transition-all duration-200 hover:shadow-lg",children:(0,b.jsxs)(i.CardContent,{className:"p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"mb-4 flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:c.booking.groomer?.image?(0,b.jsx)(e.default,{src:c.booking.groomer.image,alt:c.booking.groomer.name||"미용사",width:48,height:48,className:"ring-background h-10 w-10 rounded-full object-cover ring-2 sm:h-12 sm:w-12",unoptimized:!0}):(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-gray-200 to-gray-300 sm:h-12 sm:w-12",children:(0,b.jsx)(C.UserIcon,{className:"h-5 w-5 text-gray-500 sm:h-6 sm:w-6"})})}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsxs)("h3",{className:"truncate text-base font-semibold sm:text-lg",children:[c.booking.groomer?.name||"미용사"," 미용사"]}),(0,b.jsxs)("div",{className:"text-muted-foreground flex flex-col gap-1 text-xs sm:flex-row sm:items-center sm:gap-3 sm:text-sm",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(B.CalendarIcon,{className:"h-3 w-3 flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:(0,K.format)(new Date(c.booking.serviceDate),"yy.MM.dd",{locale:L.ko})})]}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"•"}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(I.Clock,{className:"h-3 w-3 flex-shrink-0 sm:hidden"}),(0,b.jsxs)("span",{className:"truncate",children:[(0,K.format)(new Date(c.createdAt),"yy.MM.dd",{locale:L.ko})," 작성"]})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end sm:justify-start",children:[(0,b.jsxs)("div",{className:"hidden items-center gap-2 sm:flex",children:[(0,b.jsxs)(j.Button,{variant:"outline",size:"sm",onClick:()=>a.push(`/customer/booking/${c.bookingId}`),children:[(0,b.jsx)(H.Eye,{className:"mr-1 h-4 w-4"}),"예약 상세"]}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:()=>P(c.id),className:"text-destructive hover:text-destructive",children:(0,b.jsx)(D.TrashIcon,{className:"h-4 w-4"})})]}),(0,b.jsxs)(z.DropdownMenu,{children:[(0,b.jsx)(z.DropdownMenuTrigger,{asChild:!0,className:"sm:hidden",children:(0,b.jsxs)(j.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[(0,b.jsx)(G.MoreVertical,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"더보기"})]})}),(0,b.jsxs)(z.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,b.jsxs)(z.DropdownMenuItem,{onClick:()=>a.push(`/customer/booking/${c.bookingId}`),children:[(0,b.jsx)(H.Eye,{className:"mr-2 h-4 w-4"}),"예약 상세 보기"]}),(0,b.jsxs)(z.DropdownMenuItem,{onClick:()=>P(c.id),className:"text-destructive focus:text-destructive",children:[(0,b.jsx)(D.TrashIcon,{className:"mr-2 h-4 w-4"}),"리뷰 삭제"]})]})]})]})]}),(0,b.jsxs)("div",{className:"mb-4 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(a=>(0,b.jsx)(A.StarIcon,{className:(0,r.cn)("h-4 w-4 transition-colors sm:h-5 sm:w-5",a<=c.rating?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")},a))}),(0,b.jsxs)("span",{className:"text-foreground text-sm font-medium sm:text-base",children:[c.rating,".0"]}),(0,b.jsx)(k.Badge,{variant:"secondary",className:"text-xs",children:c.rating>=4?"최고!":c.rating>=3?"보통":"아쉬워요"})]}),c.comment&&(0,b.jsx)("p",{className:"text-foreground/90 mb-4 text-sm leading-relaxed sm:text-base",children:c.comment}),c.images.length>0&&(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)(s,{images:c.images.map(a=>({id:a.id,url:a.url,alt:"Review image"})),columns:{mobile:2,tablet:3,desktop:4},aspectRatio:"square"})}),c.response&&(0,b.jsxs)("div",{className:"from-primary/5 to-primary/10 border-primary mt-4 rounded-lg border-l-2 bg-gradient-to-r p-3 sm:p-4",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,b.jsxs)(k.Badge,{variant:"outline",className:"border-primary/30 text-xs",children:[(0,b.jsx)(F.MessageSquareIcon,{className:"mr-1 h-3 w-3"}),"미용사 답변"]}),(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:(0,K.format)(new Date(c.response.createdAt),"yy.MM.dd",{locale:L.ko})})]}),(0,b.jsx)("p",{className:"text-foreground/80 text-sm sm:text-base",children:c.response.content})]})]})},c.id))})]})]})}a.s(["default",()=>P],834469)}];

//# sourceMappingURL=src_app_customer_dashboard_reviews_page_tsx_0f6433fa._.js.map