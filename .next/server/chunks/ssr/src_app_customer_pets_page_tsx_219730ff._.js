module.exports=[684713,a=>{"use strict";var b=a.i(187924),c=a.i(529139),d=a.i(50944),e=a.i(572131),f=a.i(699570),g=a.i(205138),h=a.i(737984),i=a.i(256711),j=a.i(302491),k=a.i(941675),l=a.i(713513),m=a.i(384273),n=a.i(559565),o=a.i(510448),p=a.i(976472);let q=(0,a.i(170106).default)("syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);var r=a.i(781560),s=a.i(786304),t=a.i(591119),u=a.i(486192),v=a.i(571987);function w({pet:a,onEdit:c,onDelete:d}){let[g,h]=(0,e.useState)(!1),w=((a,b)=>{if(a){let c;if("string"==typeof a){if(isNaN((c=new Date(a)).getTime()))return b}else c=a;let d=new Date,e=d.getFullYear()-c.getFullYear(),f=d.getMonth()-c.getMonth();return f<0||0===f&&d.getDate()<c.getDate()?e-1:e}return b})(a.birthDate,a.age),x=a.images?.find(a=>a.isPrimary)||a.images?.[0];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(t.Card,{className:"overflow-hidden transition-shadow hover:shadow-lg",children:[(0,b.jsxs)("div",{className:"bg-muted relative h-48",children:[x?(0,b.jsx)(v.default,{src:x.url,alt:a.name,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:["DOG"===a.type?(0,b.jsx)(n.Dog,{className:"text-muted-foreground/50 mx-auto h-16 w-16"}):(0,b.jsx)(m.Cat,{className:"text-muted-foreground/50 mx-auto h-16 w-16"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2 text-xs",children:"ì‚¬ì§„ ì—†ìŒ"})]})}),a.images&&a.images.length>0&&(0,b.jsxs)("div",{className:"absolute right-2 bottom-2 flex items-center gap-1 rounded-md bg-black/70 px-2 py-1 text-xs text-white",children:[(0,b.jsx)(l.Camera,{className:"h-3 w-3"}),a.images.length]}),(0,b.jsx)("div",{className:"absolute top-2 right-2",children:(a=>{switch(a){case"UP_TO_DATE":return(0,b.jsx)(s.Badge,{className:"bg-green-500",children:"ì ‘ì¢… ì™„ë£Œ"});case"OVERDUE":return(0,b.jsx)(s.Badge,{variant:"destructive",children:"ì ‘ì¢… ì§€ì—°"});case"PARTIAL":return(0,b.jsx)(s.Badge,{variant:"secondary",children:"ë¶€ë¶„ ì ‘ì¢…"});default:return(0,b.jsx)(s.Badge,{variant:"outline",children:"ë¯¸í™•ì¸"})}})(a.vaccinationStatus)})]}),(0,b.jsx)(t.CardHeader,{className:"pb-3",children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-primary/10 flex h-10 w-10 items-center justify-center rounded-full",children:"DOG"===a.type?(0,b.jsx)(n.Dog,{className:"text-primary h-5 w-5"}):(0,b.jsx)(m.Cat,{className:"text-primary h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:a.name}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:a.breed?.name||("DOG"===a.type?"ë¯¹ìŠ¤ê²¬":"ë¯¹ìŠ¤ë¬˜")})]})]})})}),(0,b.jsxs)(t.CardContent,{className:"space-y-3 pt-0",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:["DOG"===a.type&&a.breed?.name&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Heart,{className:"text-muted-foreground h-4 w-4"}),(0,b.jsx)("span",{children:a.breed.name})]}),"CAT"===a.type&&a.hairType&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Heart,{className:"text-muted-foreground h-4 w-4"}),(0,b.jsx)("span",{children:(a=>{switch(a){case"SHORT_HAIR":return"ë‹¨ëª¨";case"LONG_HAIR":return"ì¥ëª¨";default:return null}})(a.hairType)})]}),a.gender&&"UNKNOWN"!==a.gender&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"ì„±ë³„:"}),(0,b.jsx)("span",{children:"MALE"===a.gender?"ë‚¨ì":"ì—¬ì"})]}),null!=w&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Calendar,{className:"text-muted-foreground h-4 w-4"}),(0,b.jsxs)("span",{children:[w,"ì‚´"]})]}),a.weight&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"ì²´ì¤‘:"}),(0,b.jsxs)("span",{children:[a.weight,"kg"]})]})]}),a.specialNeeds&&(0,b.jsxs)("div",{className:"bg-muted/50 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"mb-1 text-xs font-medium",children:"íŠ¹ì´ì‚¬í•­"}),(0,b.jsx)("p",{className:"text-muted-foreground line-clamp-2 text-xs",children:a.specialNeeds})]}),a.vaccinationDate&&(0,b.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2 text-xs",children:[(0,b.jsx)(q,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:["ìµœê·¼ ì ‘ì¢…: ",(0,i.format)(a.vaccinationDate,"yyyy-MM-dd",{locale:j.ko})]})]})]}),(0,b.jsxs)(t.CardFooter,{className:"flex flex-row gap-2 pt-3",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>c(a),className:"flex-1",children:[(0,b.jsx)(o.Edit2,{className:"mr-2 h-4 w-4"}),"ìˆ˜ì •"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{h(!0)},className:"text-destructive hover:text-destructive flex-1",children:[(0,b.jsx)(r.Trash2,{className:"mr-2 h-4 w-4"}),"ì‚­ì œ"]})]})]}),(0,b.jsx)(u.AlertDialog,{open:g,onOpenChange:h,children:(0,b.jsxs)(u.AlertDialogContent,{children:[(0,b.jsxs)(u.AlertDialogHeader,{children:[(0,b.jsx)(u.AlertDialogTitle,{children:"ë°˜ë ¤ë™ë¬¼ ì‚­ì œ"}),(0,b.jsxs)(u.AlertDialogDescription,{children:[a.name,"ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."]})]}),(0,b.jsxs)(u.AlertDialogFooter,{children:[(0,b.jsx)(u.AlertDialogCancel,{children:"ì·¨ì†Œ"}),(0,b.jsx)(u.AlertDialogAction,{onClick:()=>{d(a.id),h(!1)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"ì‚­ì œ"})]})]})})]})}var x=a.i(838632),y=a.i(405784),z=a.i(767552),A=a.i(866718),B=a.i(870430),C=a.i(429246),D=a.i(814574),E=a.i(580701),F=a.i(505084),G=a.i(823292),H=a.i(821374),I=a.i(596221),J=a.i(296101),K=a.i(368114);let L=["image/jpeg","image/jpg","image/png","image/webp","image/gif"];function M({images:a=[],onUpload:c,onDelete:d,onSetPrimary:g,maxImages:h=10,isUploading:i=!1,className:j}){let[k,m]=(0,e.useState)(new Set),[n,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(null),s=(0,e.useRef)(null),t=(0,e.useRef)(null),w=(0,e.useCallback)(async b=>{console.log("Processing files for upload:",{count:b.length,files:b.map(a=>({name:a.name,type:a.type||"unknown",size:a.size,sizeMB:(a.size/1048576).toFixed(2)}))});let d=b.filter(a=>a.type?L.includes(a.type)?!(a.size>0xa00000)||(console.error(`File too large: ${a.name} (${(a.size/1048576).toFixed(2)}MB)`),alert(`${a.name}: íŒŒì¼ì´ ë„ˆë¬´ í½ë‹ˆë‹¤ (${(a.size/1048576).toFixed(2)}MB). ìµœëŒ€ 10MBê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤.`),!1):(console.error(`Invalid file type: ${a.type} for ${a.name}`),alert(`${a.name}: ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤ (${a.type}). JPG, PNG, WebP, GIFë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.`),!1):(console.error(`No file type detected for ${a.name}`),alert(`${a.name}: íŒŒì¼ í˜•ì‹ì„ ì¸ì‹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.`),!1));console.log(`Valid files after filtering: ${d.length}`);let e=h-a.length;if(e<=0)return void alert(`ìµœëŒ€ ${h}ê°œì˜ ì´ë¯¸ì§€ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤`);let f=d.slice(0,e);if(f.length>0){console.log(`Uploading ${f.length} files...`);try{await c(f)}catch(a){console.error("Upload failed:",a),a instanceof Error&&a.message.includes("Invalid files data")&&alert("íŒŒì¼ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìŠ¤í¬ë¦°ìƒ· íŒŒì¼ì€ ì§ì ‘ ì—…ë¡œë“œí•  ìˆ˜ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.")}}else console.log("No files to upload after validation");d.length>f.length&&alert(`${d.length-f.length}ê°œ íŒŒì¼ì´ ì œí•œì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤`)},[a.length,h,c]),y=(0,e.useCallback)(async a=>{let b=a.target.files?Array.from(a.target.files):[];(console.log(`File input selected ${b.length} files`),0===b.length)?console.log("No files selected from input"):(await w(b),s.current&&(s.current.value=""),t.current&&(t.current.value=""))},[w]),z=async()=>{p&&(await d(p),q(null)),o(!1)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:(0,K.cn)("space-y-4",j),children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"text-center",children:(0,b.jsxs)("p",{className:"text-muted-foreground mb-3 text-sm",children:["JPG, PNG, WebP, GIF (ìµœëŒ€ 10MB) â€¢ ",a.length,"/",h," ì´ë¯¸ì§€"]})}),(0,b.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"lg",onClick:()=>s.current?.click(),disabled:i||a.length>=h,className:"h-12 max-w-[160px] flex-1",children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(I.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}),"ì—…ë¡œë“œ ì¤‘..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(J.FolderOpen,{className:"mr-2 h-5 w-5"}),"ì´ë¯¸ì§€ ì—´ê¸°"]})}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"lg",onClick:()=>t.current?.click(),disabled:i||a.length>=h,className:"h-12 max-w-[160px] flex-1",children:[(0,b.jsx)(l.Camera,{className:"mr-2 h-5 w-5"}),"ì¹´ë©”ë¼ ì‚¬ìš©"]})]}),(0,b.jsx)("input",{ref:s,type:"file",multiple:!0,accept:"image/*",onChange:y,className:"hidden",disabled:i||a.length>=h}),(0,b.jsx)("input",{ref:t,type:"file",accept:"image/*",capture:"environment",onChange:y,className:"hidden",disabled:i||a.length>=h})]}),a.length>0&&(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:a.map(a=>(0,b.jsxs)("div",{className:(0,K.cn)("group relative overflow-hidden rounded-lg border",k.has(a.id)?"border-primary ring-primary ring-2":"border-border"),children:[(0,b.jsx)("div",{className:"bg-muted relative aspect-square",children:a.url?(0,b.jsx)(v.default,{src:a.url,alt:a.filename,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 50vw, (max-width: 1200px) 33vw, 25vw"}):(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsx)(x.Image,{className:"text-muted-foreground h-8 w-8"})})}),a.isPrimary&&(0,b.jsxs)("div",{className:"bg-primary text-primary-foreground absolute top-2 left-2 flex items-center gap-1 rounded px-2 py-1 text-xs font-medium",children:[(0,b.jsx)(H.Star,{className:"h-3 w-3 fill-current"}),"ëŒ€í‘œ"]}),(0,b.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center gap-2 bg-black/60 opacity-0 transition-opacity group-hover:opacity-100",children:[!a.isPrimary&&(0,b.jsxs)(f.Button,{type:"button",size:"sm",variant:"secondary",onClick:()=>g(a.id),className:"h-8",children:[(0,b.jsx)(H.Star,{className:"mr-1 h-4 w-4"}),"ëŒ€í‘œ"]}),(0,b.jsx)(f.Button,{type:"button",size:"sm",variant:"destructive",onClick:()=>{q(a.id),o(!0)},className:"h-8",children:(0,b.jsx)(r.Trash2,{className:"h-4 w-4"})})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{var b;let c;return b=a.id,void((c=new Set(k)).has(b)?c.delete(b):c.add(b),m(c))},className:"absolute top-2 right-2 flex h-6 w-6 items-center justify-center rounded-md border-2 border-gray-300 bg-white opacity-0 transition-opacity group-hover:opacity-100",children:k.has(a.id)&&(0,b.jsx)("div",{className:"bg-primary h-3 w-3 rounded-sm"})})]},a.id))}),k.size>0&&(0,b.jsxs)("div",{className:"bg-muted flex items-center gap-2 rounded-lg p-3",children:[(0,b.jsxs)("span",{className:"text-sm font-medium",children:[k.size,"ê°œ ì„ íƒë¨"]}),(0,b.jsx)(f.Button,{type:"button",size:"sm",variant:"outline",onClick:()=>m(new Set),children:"ì„ íƒ í•´ì œ"}),(0,b.jsxs)(f.Button,{type:"button",size:"sm",variant:"destructive",onClick:()=>{k.forEach(a=>d(a)),m(new Set)},children:[(0,b.jsx)(r.Trash2,{className:"mr-1 h-4 w-4"}),"ì‚­ì œ"]})]})]}),(0,b.jsx)(u.AlertDialog,{open:n,onOpenChange:o,children:(0,b.jsxs)(u.AlertDialogContent,{children:[(0,b.jsxs)(u.AlertDialogHeader,{children:[(0,b.jsx)(u.AlertDialogTitle,{children:"ì´ë¯¸ì§€ ì‚­ì œ"}),(0,b.jsx)(u.AlertDialogDescription,{children:"ì´ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."})]}),(0,b.jsxs)(u.AlertDialogFooter,{children:[(0,b.jsx)(u.AlertDialogCancel,{onClick:()=>q(null),children:"ì·¨ì†Œ"}),(0,b.jsx)(u.AlertDialogAction,{onClick:z,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"ì‚­ì œ"})]})]})})]})}function N({isOpen:a,onClose:c,onSave:d,pet:h,mode:i,onImagesUpdated:j}){let[k,l]=(0,e.useState)(!1),[o,p]=(0,e.useState)({}),[q,r]=(0,e.useState)([]),[s,t]=(0,e.useState)([]),[u,w]=(0,e.useState)(!1),[H,I]=(0,e.useState)(!1),[J,K]=(0,e.useState)({name:"",type:"DOG",breedId:"",weight:void 0,age:void 0,birthDate:void 0,gender:void 0,hairType:void 0,specialNeeds:"",vaccinationStatus:"UNKNOWN",vaccinationDate:void 0,termsAcception:!1}),{images:L,isLoading:N,isUploading:O,fetchImages:P,uploadImages:Q,deleteImage:R,setPrimaryImage:S}=function(a){let[b,c]=(0,e.useState)([]),[d,f]=(0,e.useState)(!1),[g,h]=(0,e.useState)({}),[i,j]=(0,e.useState)(!1),k=(0,e.useCallback)(async()=>{if(a)try{f(!0);let b=await fetch(`/api/customer/pets/${a}/images`);if(!b.ok)throw Error("Failed to fetch images");let d=await b.json();c(d)}catch(a){console.error("Error fetching pet images:",a),G.toast.error("ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}finally{f(!1)}},[a]),l=(0,e.useCallback)(async b=>{if(!a){console.error("No petId provided for image upload"),G.toast.error("í« ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤. í«ì„ ë¨¼ì € ì €ì¥í•´ì£¼ì„¸ìš”.");return}console.log("Starting pet image upload:",{petId:a,filesCount:b.length,files:b.map(a=>({name:a.name,type:a.type,size:a.size,sizeMB:(a.size/1048576).toFixed(2)}))}),j(!0);let d=[];try{let e=b.filter(a=>a.type&&a.type.startsWith("image/")?!(a.size>0xa00000)||(console.error(`File too large: ${a.name} (${(a.size/1048576).toFixed(2)}MB)`),G.toast.error(`${a.name}: íŒŒì¼ì´ ë„ˆë¬´ í½ë‹ˆë‹¤ (ìµœëŒ€ 10MB)`),d.push(a.name),!1):(console.error(`Invalid file type for ${a.name}: ${a.type||"unknown"}`),G.toast.error(`${a.name}: ì´ë¯¸ì§€ íŒŒì¼ì´ ì•„ë‹™ë‹ˆë‹¤`),d.push(a.name),!1));if(0===e.length)return G.toast.error("ì—…ë¡œë“œí•  ìœ íš¨í•œ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤"),[];let f=new FormData;e.forEach(a=>{f.append("files",a)}),console.log(`Uploading ${e.length} files to server...`);let g=await fetch(`/api/customer/pets/${a}/images`,{method:"POST",body:f});if(!g.ok){let a=await g.json().catch(()=>({error:`HTTP ${g.status}: ${g.statusText}`}));throw console.error("Failed to upload images:",a),Error(a.error||"Failed to upload images")}let h=await g.json();console.log("Upload result:",h);let i=h.images||[];return i.length>0&&(c(a=>[...a,...i]),G.toast.success(`${i.length}ê°œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ`)),d.length>0&&G.toast.warning(`ì¼ë¶€ íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨: ${d.join(", ")}`),i}catch(a){return console.error("Failed to upload images:",a),a instanceof Error?a.message.includes("network")||a.message.includes("fetch")?G.toast.error("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"):G.toast.error(`ì—…ë¡œë“œ ì‹¤íŒ¨: ${a.message}`):G.toast.error("ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),[]}finally{j(!1),h({})}},[a]),m=(0,e.useCallback)(async b=>{if(a)try{if(!(await fetch(`/api/customer/pets/${a}/images/${b}`,{method:"DELETE"})).ok)throw Error("Failed to delete image");c(a=>a.filter(a=>a.id!==b)),G.toast.success("ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤")}catch(a){throw console.error("Error deleting image:",a),G.toast.error("ì´ë¯¸ì§€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),a}},[a]),n=(0,e.useCallback)(async b=>{if(a&&0!==b.length)try{if(!(await fetch(`/api/customer/pets/${a}/images`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageIds:b})})).ok)throw Error("Failed to delete images");c(a=>a.filter(a=>!b.includes(a.id))),G.toast.success("ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤")}catch(a){throw console.error("Error deleting images:",a),G.toast.error("ì´ë¯¸ì§€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),a}},[a]),o=(0,e.useCallback)(async b=>{if(a)try{if(!(await fetch(`/api/customer/pets/${a}/images/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isPrimary:!0})})).ok)throw Error("Failed to set primary image");c(a=>a.map(a=>({...a,isPrimary:a.id===b}))),G.toast.success("ëŒ€í‘œ ì´ë¯¸ì§€ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(a){throw console.error("Error setting primary image:",a),G.toast.error("ëŒ€í‘œ ì´ë¯¸ì§€ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),a}},[a]),p=(0,e.useCallback)(async(b,c)=>{if(a)try{if(!(await fetch(`/api/customer/pets/${a}/images/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayOrder:c})})).ok)throw Error("Failed to reorder image");await k()}catch(a){throw console.error("Error reordering image:",a),G.toast.error("ì´ë¯¸ì§€ ìˆœì„œ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),a}},[a,k]);return{images:b,isLoading:d,isUploading:i,uploadProgress:g,fetchImages:k,uploadImages:l,deleteImage:m,deleteImages:n,setPrimaryImage:o,reorderImages:p}}(h?.id||""),T=async()=>{w(!0);try{let a=await fetch("/api/breeds");if(!a.ok)throw Error("Failed to fetch breeds");let b=await a.json();t(b)}catch(a){console.error("Error fetching breeds:",a),G.toast.error("í’ˆì¢… ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}finally{w(!1)}},U=async a=>{await Q(a),j&&j()},V=async a=>{await R(a),j&&j()},W=async a=>{await S(a),j&&j()};(0,e.useEffect)(()=>{if(a&&T(),h&&"edit"===i){let a,b,c,d,e,f,g,i;K({name:h.name,type:h.type,breedId:h.breedId||"",weight:h.weight||void 0,age:h.age||void 0,birthDate:h.birthDate?(b=(a=new Date(h.birthDate)).getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0"),`${b}-${c}-${d}`):void 0,gender:h.gender||void 0,hairType:h.hairType||void 0,specialNeeds:h.specialNeeds||"",vaccinationStatus:h.vaccinationStatus||"UNKNOWN",vaccinationDate:h.vaccinationDate?(f=(e=new Date(h.vaccinationDate)).getFullYear(),g=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),`${f}-${g}-${i}`):void 0,termsAcception:h.termsAcception||!1}),h.id&&P()}else K({name:"",type:"DOG",breedId:"",weight:void 0,age:void 0,birthDate:void 0,gender:void 0,hairType:void 0,specialNeeds:"",vaccinationStatus:"UNKNOWN",vaccinationDate:void 0,termsAcception:!1}),r([]);p({})},[h,i,a,P]);let X=a=>{let{name:b,value:c}=a.target;"weight"===b||"age"===b?K(a=>({...a,[b]:c?parseFloat(c):void 0})):K(a=>({...a,[b]:c})),o[b]&&p(a=>({...a,[b]:""}))},Y=(a,b)=>{K(c=>({...c,[a]:b})),"type"===a&&K(a=>({...a,breedId:"",hairType:"DOG"===b?void 0:a.hairType}))},Z=async()=>{let a;if(a={},J.name||(a.name="ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤"),J.type||(a.type="ì¢…ë¥˜ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤"),J.termsAcception||(a.termsAcception="ì§€ë³‘Â·ë…¸ë ¹ê²¬ ë¯¸ìš© ë™ì˜ì„œì— ë™ì˜í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤"),p(a),0===Object.keys(a).length){l(!0);try{let a={...J,birthDate:J.birthDate?new Date(J.birthDate).toISOString():void 0,vaccinationDate:J.vaccinationDate?new Date(J.vaccinationDate).toISOString():void 0};"create"===i&&q.length>0?await d({...a,images:q}):await d(a),c()}catch(a){console.error("Failed to save pet:",a),G.toast.error("ë°˜ë ¤ë™ë¬¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}finally{l(!1)}}};return(0,b.jsx)(D.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(D.DialogContent,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[700px]",children:[(0,b.jsx)(D.DialogHeader,{children:(0,b.jsx)(D.DialogTitle,{children:"create"===i?"ë°˜ë ¤ë™ë¬¼ ë“±ë¡":"ë°˜ë ¤ë™ë¬¼ ì •ë³´ ìˆ˜ì •"})}),(0,b.jsxs)("div",{className:"space-y-6",children:["edit"===i&&h?.id?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"ì‚¬ì§„"}),(0,b.jsxs)("span",{className:"text-muted-foreground text-sm",children:[L.length,"/10 ì‚¬ì§„"]})]}),(0,b.jsx)(M,{images:L,onUpload:U,onDelete:V,onSetPrimary:W,maxImages:10,isUploading:O,className:"pb-4"}),0===L.length&&!N&&(0,b.jsxs)("div",{className:"bg-muted/30 rounded-lg py-6 text-center",children:[(0,b.jsx)(x.Image,{className:"mx-auto mb-3 h-12 w-12 opacity-50"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"ì‚¬ì§„ì„ ì¶”ê°€í•˜ì—¬ ë°˜ë ¤ë™ë¬¼ì„ ì†Œê°œí•´ì£¼ì„¸ìš”"})]})]}):"create"===i&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"ì‚¬ì§„ ì¶”ê°€ (ì„ íƒì‚¬í•­)"}),(0,b.jsxs)("span",{className:"text-muted-foreground text-sm",children:[q.length,"/10 ì‚¬ì§„"]})]}),(0,b.jsxs)("div",{className:"border-border rounded-lg border-2 border-dashed p-6",children:[(0,b.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:a=>{var b;let c,d;a.target.files&&(b=Array.from(a.target.files),c=["image/jpeg","image/jpg","image/png","image/gif","image/webp"],d=b.filter(a=>c.includes(a.type)?!(a.size>0xa00000)||(G.toast.error(`${a.name}: íŒŒì¼ í¬ê¸°ê°€ 10MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤`),!1):(G.toast.error(`${a.name}: ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤`),!1)),q.length+d.length>10?G.toast.error("ìµœëŒ€ 10ê°œì˜ ì´ë¯¸ì§€ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"):r(a=>[...a,...d]))},className:"hidden",id:"image-upload"}),(0,b.jsxs)("label",{htmlFor:"image-upload",className:"flex cursor-pointer flex-col items-center justify-center",children:[(0,b.jsx)(x.Image,{className:"mb-3 h-12 w-12 opacity-50"}),(0,b.jsx)("p",{className:"mb-1 text-sm font-medium",children:"ì‚¬ì§„ì„ ì„ íƒí•˜ì„¸ìš”"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"JPG, PNG, GIF, WebP (ìµœëŒ€ 10MB)"})]})]}),q.length>0&&(0,b.jsx)("div",{className:"grid grid-cols-3 gap-2",children:q.map((a,c)=>(0,b.jsxs)("div",{className:"group relative",children:[(0,b.jsx)(v.default,{src:URL.createObjectURL(a),alt:`Preview ${c+1}`,width:120,height:96,className:"h-24 w-full rounded-lg object-cover"}),(0,b.jsx)("button",{type:"button",onClick:()=>{r(a=>a.filter((a,b)=>b!==c))},className:"bg-destructive text-destructive-foreground absolute top-1 right-1 rounded-full p-1 opacity-0 transition-opacity group-hover:opacity-100",children:(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,b.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},c))})]}),(0,b.jsx)(F.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"ê¸°ë³¸ ì •ë³´"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{htmlFor:"type",children:"ë°˜ë ¤ë™ë¬¼ ì¢…ë¥˜ *"}),(0,b.jsxs)(E.Select,{value:J.type,onValueChange:a=>Y("type",a),children:[(0,b.jsx)(E.SelectTrigger,{children:(0,b.jsx)(E.SelectValue,{placeholder:"ì¢…ë¥˜ ì„ íƒ"})}),(0,b.jsxs)(E.SelectContent,{children:[(0,b.jsx)(E.SelectItem,{value:"DOG",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Dog,{className:"h-4 w-4"}),"ê°•ì•„ì§€"]})}),(0,b.jsx)(E.SelectItem,{value:"CAT",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Cat,{className:"h-4 w-4"}),"ê³ ì–‘ì´"]})})]})]}),o.type&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:o.type})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{htmlFor:"name",children:"ì´ë¦„ *"}),(0,b.jsx)(A.Input,{id:"name",name:"name",value:J.name,onChange:X,placeholder:"ë°˜ë ¤ë™ë¬¼ ì´ë¦„",className:o.name?"border-red-500":""}),o.name&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:o.name})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{htmlFor:"breed",children:"í’ˆì¢…"}),u?(0,b.jsx)("div",{className:"flex h-10 items-center justify-center rounded-md border",children:(0,b.jsx)(g.LoadingSpinner,{size:"sm"})}):(0,b.jsxs)(E.Select,{value:J.breedId,onValueChange:a=>Y("breedId",a),children:[(0,b.jsx)(E.SelectTrigger,{children:(0,b.jsx)(E.SelectValue,{placeholder:"í’ˆì¢…ì„ ì„ íƒí•˜ì„¸ìš”"})}),(0,b.jsx)(E.SelectContent,{children:s.filter(a=>a.petType===J.type).map(a=>(0,b.jsx)(E.SelectItem,{value:a.id,children:a.name},a.id))})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:["CAT"===J.type&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{htmlFor:"hairType",children:"í„¸ íƒ€ì…"}),(0,b.jsxs)(E.Select,{value:J.hairType,onValueChange:a=>Y("hairType",a),children:[(0,b.jsx)(E.SelectTrigger,{children:(0,b.jsx)(E.SelectValue,{placeholder:"í„¸ íƒ€ì… ì„ íƒ"})}),(0,b.jsxs)(E.SelectContent,{children:[(0,b.jsx)(E.SelectItem,{value:"SHORT_HAIR",children:"ë‹¨ëª¨"}),(0,b.jsx)(E.SelectItem,{value:"LONG_HAIR",children:"ì¥ëª¨"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{htmlFor:"gender",children:"ì„±ë³„"}),(0,b.jsxs)(E.Select,{value:J.gender,onValueChange:a=>Y("gender",a),children:[(0,b.jsx)(E.SelectTrigger,{children:(0,b.jsx)(E.SelectValue,{placeholder:"ì„±ë³„ ì„ íƒ"})}),(0,b.jsxs)(E.SelectContent,{children:[(0,b.jsx)(E.SelectItem,{value:"MALE",children:"ë‚¨ì"}),(0,b.jsx)(E.SelectItem,{value:"FEMALE",children:"ì—¬ì"}),(0,b.jsx)(E.SelectItem,{value:"UNKNOWN",children:"ëª¨ë¦„"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{htmlFor:"weight",children:"ì²´ì¤‘ (kg)"}),(0,b.jsx)(A.Input,{id:"weight",name:"weight",type:"number",step:"0.1",value:J.weight||"",onChange:X,placeholder:"ì˜ˆ: 5.5"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{htmlFor:"birthDate",children:"ìƒë…„ì›”ì¼"}),(0,b.jsx)(A.Input,{id:"birthDate",name:"birthDate",type:"date",value:J.birthDate||"",onChange:X})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{htmlFor:"vaccinationStatus",children:"ì˜ˆë°©ì ‘ì¢… ìƒíƒœ"}),(0,b.jsxs)(E.Select,{value:J.vaccinationStatus,onValueChange:a=>Y("vaccinationStatus",a),children:[(0,b.jsx)(E.SelectTrigger,{children:(0,b.jsx)(E.SelectValue,{placeholder:"ì ‘ì¢… ìƒíƒœ ì„ íƒ"})}),(0,b.jsxs)(E.SelectContent,{children:[(0,b.jsx)(E.SelectItem,{value:"UP_TO_DATE",children:"ì ‘ì¢… ì™„ë£Œ"}),(0,b.jsx)(E.SelectItem,{value:"OVERDUE",children:"ì ‘ì¢… ì§€ì—°"}),(0,b.jsx)(E.SelectItem,{value:"PARTIAL",children:"ë¶€ë¶„ ì ‘ì¢…"}),(0,b.jsx)(E.SelectItem,{value:"UNKNOWN",children:"ë¯¸í™•ì¸"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{htmlFor:"vaccinationDate",children:"ìµœê·¼ ì ‘ì¢…ì¼"}),(0,b.jsx)(A.Input,{id:"vaccinationDate",name:"vaccinationDate",type:"date",value:J.vaccinationDate||"",onChange:X})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{htmlFor:"specialNeeds",children:"íŠ¹ì´ì‚¬í•­"}),(0,b.jsx)(C.Textarea,{id:"specialNeeds",name:"specialNeeds",value:J.specialNeeds,onChange:X,placeholder:"ì•Œë ˆë¥´ê¸°, ì§€ë³‘, ì£¼ì˜ì‚¬í•­ ë“±ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",rows:3})]})]}),(0,b.jsx)(F.Separator,{}),(0,b.jsxs)("div",{className:"rounded-lg border-2 border-orange-200 bg-orange-50 p-6",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("h3",{className:"mb-2 text-lg font-semibold text-orange-900",children:"ì§€ë³‘Â·ë…¸ë ¹ê²¬ ë¯¸ìš© ë™ì˜ì„œ"}),(0,b.jsx)("p",{className:"text-sm text-orange-700",children:"ë°˜ë ¤ë™ë¬¼ì˜ ì•ˆì „í•œ ë¯¸ìš©ì„ ìœ„í•´ ì•„ë˜ ë™ì˜ì„œë¥¼ í™•ì¸í•˜ê³  ë™ì˜í•´ì£¼ì„¸ìš”."})]}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>I(!H),className:"mb-4 w-full justify-between border-orange-300 bg-white hover:bg-orange-100",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:H?"ë™ì˜ì„œ ë‚´ìš© ì ‘ê¸°":"ë™ì˜ì„œ ë‚´ìš© ë³´ê¸°"}),H?(0,b.jsx)(z.ChevronUp,{className:"h-4 w-4"}):(0,b.jsx)(y.ChevronDown,{className:"h-4 w-4"})]}),H&&(0,b.jsxs)("div",{className:"mb-4 space-y-4 rounded-lg bg-white p-4 text-sm",children:[(0,b.jsxs)("div",{className:"rounded-lg border-l-4 border-orange-500 bg-orange-50 p-3",children:[(0,b.jsx)("p",{className:"mb-1 font-semibold text-orange-800",children:"â€» ì•ˆë‚´ì‚¬í•­ â€»"}),(0,b.jsx)("p",{className:"text-orange-700",children:'ì§€ë³‘(ë‡Œì§ˆí™˜, ì‹¬ì¥ì§ˆí™˜, ë³´í–‰ë¶ˆê°€ ë“±)ì´ ìˆê±°ë‚˜ ë…¸ë ¹ê²¬(ë§Œ 10ì„¸ ì´ìƒ)ì¸ ê²½ìš° ë°˜ë“œì‹œ "ì§€ë³‘Â·ë…¸ë ¹ê²¬ ë¯¸ìš© ë™ì˜ì„œ"ë¥¼ ì‘ì„±í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.'})]}),(0,b.jsxs)("ol",{className:"list-decimal space-y-3 pl-5 text-gray-700",children:[(0,b.jsx)("li",{children:"ë¯¸ë¯¸ì‚´ë¡±í«ì€ ë°˜ë ¤ê²¬ ë¯¸ìš© ì‹œ ë°˜ë ¤ê²¬ì˜ ê±´ê°•ê³¼ ì•ˆì „ì„ ìµœìš°ì„ ìœ¼ë¡œ ê³ ë ¤í•˜ì—¬ ì†Œí™€í•¨ ì—†ì´ ìµœëŒ€í•œ ì£¼ì˜ë¥¼ ê¸°ìš¸ì—¬ ë¯¸ìš©ì„ ì§„í–‰í•  ê²ƒì„ ì•½ì†ë“œë¦½ë‹ˆë‹¤."}),(0,b.jsx)("li",{children:"ë‹¤ë§Œ, ë…¸ë ¹ê²¬ ë° ì§€ë³‘ì´ ìˆëŠ” ë°˜ë ¤ê²¬ì˜ ê²½ìš° ë…¸í™” ë° ê¸°ì¡´ ì§ˆí™˜ìœ¼ë¡œ ì¸í•œ ê°ì¢… ìœ„í—˜ ìš”ì¸ì´ ì¡´ì¬í•  ìˆ˜ ìˆìœ¼ë©° ë¯¸ìš© í›„ ìƒíƒœ ì•…í™” ë˜ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ ìœ ë°œë¡œ ì¸í•œ ì›ì¹˜ ì•ŠëŠ” ìƒí™©ì´ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìˆìŒì„ ì‚¬ì „ ê³ ì§€ë“œë¦½ë‹ˆë‹¤."}),(0,b.jsx)("li",{children:"ë¯¸ë¯¸ì‚´ë¡±í«ì€ ìµœëŒ€í•œ ë³´í˜¸ìì˜ ì…ì¥ì—ì„œ ì•„ì´ë“¤ì˜ ìƒíƒœë¥¼ ì‚´í”¼ë©° ë¯¸ìš©ì„ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ìœ„ì™€ ê°™ì€ ìƒí™©ìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ê±´ê°• ì´ìƒ ë° ì‚¬ê³ ì— ëŒ€í•´ ë¯¸ë¯¸ì‚´ë¡±í«ì€ ë²•ì  ì±…ì„ì„ ì§€ì§€ ì•ŠìŒì— ëŒ€í•´ ë³´í˜¸ìì˜ ì‚¬ì „ ë™ì˜ë¥¼ ìš”ì²­ë“œë¦½ë‹ˆë‹¤."}),(0,b.jsx)("li",{children:"ë˜í•œ, ë³¸ ë™ì˜ì„œëŠ” ë¯¸ìš© ì„œë¹„ìŠ¤ ì§„í–‰ ì‹œë§ˆë‹¤ ë§¤ë²ˆ ì‘ì„±í•˜ì‹¤ í•„ìš” ì—†ì´, 1íšŒ ì„œëª…ìœ¼ë¡œ í–¥í›„ ë™ì¼ ì¡°ê±´ í•˜ì— ë™ì¼í•˜ê²Œ ì ìš©ë©ë‹ˆë‹¤."})]})]}),(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"termsAcception",checked:J.termsAcception,onChange:a=>K(b=>({...b,termsAcception:a.target.checked})),className:"mt-1 h-5 w-5 rounded border-orange-300 text-orange-600 focus:ring-orange-500"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)(B.Label,{htmlFor:"termsAcception",className:"cursor-pointer text-base font-semibold text-orange-900",children:["ìœ„ ë‚´ìš©ì„ í™•ì¸í•˜ì˜€ìœ¼ë©° ì§€ë³‘Â·ë…¸ë ¹ê²¬ ë¯¸ìš© ë™ì˜ì„œì— ë™ì˜í•©ë‹ˆë‹¤"," ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),o.termsAcception&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-500",children:o.termsAcception})]})]})]})]}),(0,b.jsxs)(D.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:c,disabled:k,children:"ì·¨ì†Œ"}),(0,b.jsx)(f.Button,{onClick:Z,disabled:k,children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.LoadingSpinner,{size:"sm",className:"mr-2"}),"ì €ì¥ ì¤‘..."]}):"ì €ì¥"})]})]})})}var O=a.i(251653),P=a.i(915618),Q=a.i(920140);function R(){let{data:a,isPending:i}=(0,c.useSession)(),j=(0,d.useRouter)(),{pets:k,isLoading:l,createPet:m,updatePet:n,deletePet:o,fetchPets:p}=(0,O.usePets)(),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)(),[u,v]=(0,e.useState)("create");(0,e.useEffect)(()=>{a||j.push("/auth/signin"),a?.user?.role&&"CUSTOMER"!==a.user.role&&j.push("/dashboard")},[a,j]);let x=()=>{t(void 0),v("create"),r(!0)},y=a=>{t(a),v("edit"),r(!0)},z=async a=>{if("edit"===u&&s)await n(s.id,a),await p();else{let{images:b,...c}=a,d=await m(c);if(b&&b.length>0&&d?.id)try{let a=new FormData;b.forEach(b=>{a.append("files",b)}),(await fetch(`/api/customer/pets/${d.id}/images`,{method:"POST",body:a})).ok?(G.toast.success(`${b.length}ê°œì˜ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤`),await p()):(console.error("Failed to upload images"),G.toast.error("ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"))}catch(a){console.error("Error uploading images:",a)}}};return i?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,b.jsx)(g.LoadingSpinner,{size:"lg"})}):a&&a.user?.role==="CUSTOMER"?(0,b.jsxs)("div",{className:"bg-background min-h-screen",children:[(0,b.jsx)("header",{className:"border-border border-b",children:(0,b.jsx)(h.PageHeader,{title:"ë‚´ ë°˜ë ¤ë™ë¬¼",description:"ë°˜ë ¤ë™ë¬¼ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê³  ì˜ˆì•½ ì‹œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤",children:(0,b.jsxs)(f.Button,{onClick:x,children:[(0,b.jsx)(P.Plus,{className:"mr-2 h-4 w-4"}),"ë°˜ë ¤ë™ë¬¼ ì¶”ê°€"]})})}),(0,b.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[l?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(g.LoadingSpinner,{size:"lg"})}):0===k.length?(0,b.jsx)("div",{className:"mx-auto max-w-md",children:(0,b.jsxs)("div",{className:"border-border rounded-lg border-2 border-dashed p-12 text-center",children:[(0,b.jsx)(Q.PawPrint,{className:"text-muted-foreground mx-auto mb-4 h-16 w-16"}),(0,b.jsx)("h2",{className:"mb-2 text-xl font-semibold",children:"ë“±ë¡ëœ ë°˜ë ¤ë™ë¬¼ì´ ì—†ìŠµë‹ˆë‹¤"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"ë°˜ë ¤ë™ë¬¼ì„ ë“±ë¡í•˜ê³  ë¯¸ìš© ì„œë¹„ìŠ¤ë¥¼ ì˜ˆì•½í•´ë³´ì„¸ìš”"}),(0,b.jsxs)(f.Button,{onClick:x,size:"lg",children:[(0,b.jsx)(P.Plus,{className:"mr-2 h-5 w-5"}),"ì²« ë°˜ë ¤ë™ë¬¼ ë“±ë¡í•˜ê¸°"]})]})}):(0,b.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:k.map(a=>(0,b.jsx)(w,{pet:a,onEdit:y,onDelete:o},a.id))}),k.length>0&&(0,b.jsxs)("div",{className:"bg-card border-border mt-12 rounded-lg border p-6",children:[(0,b.jsx)("h2",{className:"mb-4 text-lg font-semibold",children:"ë°˜ë ¤ë™ë¬¼ í†µê³„"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"ì´ ë°˜ë ¤ë™ë¬¼"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[k.length,"ë§ˆë¦¬"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"ê°•ì•„ì§€"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[k.filter(a=>"DOG"===a.type).length,"ë§ˆë¦¬"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"ê³ ì–‘ì´"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[k.filter(a=>"CAT"===a.type).length,"ë§ˆë¦¬"]})]})]})]}),(0,b.jsxs)("div",{className:"bg-muted/50 mt-8 rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"mb-3 font-semibold",children:"ğŸ’¡ ì•Œì•„ë‘ì„¸ìš”"}),(0,b.jsxs)("ul",{className:"text-muted-foreground space-y-2 text-sm",children:[(0,b.jsx)("li",{children:"â€¢ ë°˜ë ¤ë™ë¬¼ ì •ë³´ëŠ” ì˜ˆì•½ ì‹œ ë¯¸ìš©ì‚¬ì—ê²Œ ì „ë‹¬ë©ë‹ˆë‹¤"}),(0,b.jsx)("li",{children:"â€¢ ì˜ˆë°©ì ‘ì¢… ì •ë³´ë¥¼ ìµœì‹ ìœ¼ë¡œ ìœ ì§€í•´ì£¼ì„¸ìš”"}),(0,b.jsx)("li",{children:"â€¢ íŠ¹ì´ì‚¬í•­ì€ ë¯¸ìš© ì‹œ ì£¼ì˜ì‚¬í•­ìœ¼ë¡œ í™œìš©ë©ë‹ˆë‹¤"}),(0,b.jsx)("li",{children:"â€¢ ì •í™•í•œ ì²´ì¤‘ ì •ë³´ëŠ” ì„œë¹„ìŠ¤ ìš”ê¸ˆ ì‚°ì •ì— ë„ì›€ì´ ë©ë‹ˆë‹¤"})]})]})]}),(0,b.jsx)(N,{isOpen:q,onClose:()=>{r(!1),t(void 0)},onSave:z,pet:s,mode:u,onImagesUpdated:p})]}):null}a.s(["default",()=>R],684713)}];

//# sourceMappingURL=src_app_customer_pets_page_tsx_219730ff._.js.map