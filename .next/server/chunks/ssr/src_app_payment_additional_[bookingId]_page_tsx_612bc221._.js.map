{"version":3,"sources":["turbopack:///[project]/src/app/payment/additional/[bookingId]/page.tsx","turbopack:///[project]/src/features/additional-payment/components/additional-charges-card.tsx","turbopack:///[project]/src/features/additional-payment/utils/additional-payment.utils.ts","turbopack:///[project]/src/features/additional-payment/components/booking-info-sidebar.tsx","turbopack:///[project]/src/features/additional-payment/components/payment-info-notice.tsx","turbopack:///[project]/src/features/additional-payment/components/additional-payment-layout.tsx","turbopack:///[project]/src/features/additional-payment/hooks/useBookingDetails.ts","turbopack:///[project]/src/features/additional-payment/hooks/usePaymentInitialization.ts","turbopack:///[project]/src/features/additional-payment/hooks/useAdditionalPayment.ts"],"sourcesContent":["'use client'\n\nimport { use } from 'react'\nimport { LoadingSpinner } from '@/components/ui/loading-spinner'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { PaymentCard } from '@/components/card/payment-card'\nimport {\n  AdditionalPaymentLayout,\n  AdditionalPaymentHeader,\n  AdditionalChargesCard,\n  BookingInfoSidebar,\n  PaymentInfoNotice,\n} from '@/features/additional-payment/components'\nimport { useAdditionalPayment } from '@/features/additional-payment/hooks'\nimport type { AdditionalPaymentCustomData } from '@/features/additional-payment/types/additional-payment.types'\n\nexport default function PaymentAdditionalPage({\n  params,\n}: {\n  params: Promise<{ bookingId: string }>\n}) {\n  const resolvedParams = use(params)\n  const bookingId = resolvedParams.bookingId\n\n  const {\n    session,\n    isSessionPending,\n    profile,\n    booking,\n    isBookingLoading,\n    paymentId,\n    isInitializingPayment,\n    totalAdditionalAmount,\n    orderName,\n    handlePaymentRequest,\n    handlePaymentSuccess,\n    handlePaymentError,\n  } = useAdditionalPayment({ bookingId })\n\n  // 로딩 상태\n  if (isSessionPending || isBookingLoading) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <LoadingSpinner size=\"lg\" />\n      </div>\n    )\n  }\n\n  // 인증 확인 (리디렉션은 useAdditionalPayment 훅에서 처리)\n  if (!session || session.user?.role !== 'CUSTOMER' || !booking) {\n    return null\n  }\n\n  return (\n    <AdditionalPaymentLayout\n      header={<AdditionalPaymentHeader />}\n      content={\n        <>\n          {/* 추가 비용 내역 카드 */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-xl\">추가 비용 내역</CardTitle>\n              <p className=\"text-muted-foreground text-sm\">서비스 중 추가로 발생한 비용입니다</p>\n            </CardHeader>\n            <CardContent>\n              <AdditionalChargesCard\n                charges={booking.additionalCharges}\n                variant=\"default\"\n                size=\"default\"\n              />\n\n              <PaymentInfoNotice className=\"mt-6\" />\n            </CardContent>\n          </Card>\n\n          {/* 결제 진행 섹션 */}\n          {!paymentId ? (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-xl\">결제 진행</CardTitle>\n                <p className=\"text-muted-foreground text-sm\">\n                  아래 버튼을 클릭하여 결제를 진행해주세요\n                </p>\n              </CardHeader>\n              <CardContent>\n                <Button\n                  onClick={handlePaymentRequest}\n                  disabled={isInitializingPayment}\n                  size=\"lg\"\n                  className=\"w-full\"\n                >\n                  {isInitializingPayment ? (\n                    <>\n                      <LoadingSpinner size=\"sm\" className=\"mr-2\" />\n                      결제 준비 중...\n                    </>\n                  ) : (\n                    '결제 진행하기'\n                  )}\n                </Button>\n              </CardContent>\n            </Card>\n          ) : (\n            <PaymentCard\n              amount={totalAdditionalAmount}\n              orderName={orderName}\n              orderId={paymentId}\n              customerInfo={{\n                name: profile?.name || session?.user?.name || '',\n                email: profile?.email || session?.user?.email || '',\n                phone: profile?.phoneNumber || '',\n              }}\n              onSuccess={handlePaymentSuccess}\n              onError={handlePaymentError}\n              termsText=\"추가 결제 약관에 동의합니다\"\n              customData={\n                {\n                  type: 'additional',\n                  bookingId: bookingId,\n                  originalAmount: booking.originalAmount,\n                  additionalCharges: booking.additionalCharges,\n                } satisfies AdditionalPaymentCustomData\n              }\n              title=\"결제 방법 선택\"\n              description=\"추가 서비스 결제를 위한 방법을 선택해주세요\"\n            />\n          )}\n        </>\n      }\n      sidebar={\n        <BookingInfoSidebar\n          booking={booking}\n          totalAdditional={totalAdditionalAmount}\n          variant=\"default\"\n          sticky\n        />\n      }\n    />\n  )\n}\n","/**\n * 추가 비용 항목 카드 컴포넌트\n * @module features/additional-payment/components\n */\n\nimport * as React from 'react'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\nimport type { AdditionalCharge } from '../types/additional-payment.types'\nimport { formatAmount, formatChargeDisplay } from '../utils/additional-payment.utils'\n\n/**\n * 추가 비용 카드 variants 정의\n */\nconst additionalChargesCardVariants = cva('rounded-lg border transition-all', {\n  variants: {\n    variant: {\n      default: 'border-border bg-muted/50',\n      compact: 'border-border bg-card shadow-sm',\n      detailed: 'border-border bg-card shadow-md',\n      highlight: 'border-primary/50 bg-gradient-to-br from-primary/5 to-transparent shadow-md',\n      minimal: 'border-border/50 bg-transparent',\n    },\n    size: {\n      sm: 'p-3',\n      default: 'p-4',\n      lg: 'p-5',\n    },\n  },\n  defaultVariants: {\n    variant: 'default',\n    size: 'default',\n  },\n})\n\n/**\n * AdditionalChargesCard 컴포넌트 Props\n */\nexport interface AdditionalChargesCardProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof additionalChargesCardVariants> {\n  /** 추가 비용 항목 배열 */\n  charges: AdditionalCharge[]\n  /** 총액 표시 여부 */\n  showTotal?: boolean\n}\n\n/**\n * 추가 비용 항목 카드\n * @description 서비스 진행 중 발생한 추가 비용 항목을 카드 형태로 표시합니다\n *\n * @example\n * ```tsx\n * <AdditionalChargesCard\n *   charges={booking.additionalCharges}\n *   variant=\"detailed\"\n *   size=\"default\"\n *   showTotal\n * />\n * ```\n */\nconst AdditionalChargesCard = React.forwardRef<HTMLDivElement, AdditionalChargesCardProps>(\n  ({ className, variant, size, charges, showTotal = false, ...props }, ref) => {\n    const totalAmount = charges.reduce((sum, charge) => sum + charge.total, 0)\n\n    return (\n      <div ref={ref} className=\"space-y-4\" {...props}>\n        {charges.map((charge) => (\n          <div\n            key={charge.id}\n            className={cn(\n              additionalChargesCardVariants({ variant, size }),\n              'flex items-center justify-between',\n              className\n            )}\n          >\n            <div className=\"flex-1\">\n              <h3 className=\"font-medium\">{charge.name}</h3>\n              {charge.description && (\n                <p className=\"text-muted-foreground text-sm\">{charge.description}</p>\n              )}\n              <p className=\"text-muted-foreground text-xs\">{formatChargeDisplay(charge)}</p>\n            </div>\n            <div className=\"text-right\">\n              <p className=\"font-semibold\">{formatAmount(charge.total)}</p>\n            </div>\n          </div>\n        ))}\n\n        {showTotal && charges.length > 0 && (\n          <div className=\"border-border flex items-center justify-between border-t pt-4\">\n            <span className=\"font-semibold\">총 추가 비용</span>\n            <span className=\"text-primary text-lg font-bold\">{formatAmount(totalAmount)}</span>\n          </div>\n        )}\n      </div>\n    )\n  }\n)\n\nAdditionalChargesCard.displayName = 'AdditionalChargesCard'\n\nexport { AdditionalChargesCard, additionalChargesCardVariants }\n","/**\n * 추가 결제 유틸리티 함수\n * @module features/additional-payment/utils\n */\n\nimport type { AdditionalCharge, BookingInfo } from '../types/additional-payment.types'\n\n/**\n * 추가 비용 총액 계산\n * @description 모든 추가 비용 항목의 합계를 계산합니다\n * @param charges - 추가 비용 항목 배열\n * @returns 총액 (원)\n * @example\n * ```ts\n * const total = calculateTotalAdditionalAmount([\n *   { id: '1', name: '털 엉킴', amount: 10000, quantity: 1, total: 10000 },\n *   { id: '2', name: '특수 샴푸', amount: 5000, quantity: 2, total: 10000 }\n * ])\n * // total = 20000\n * ```\n */\nexport function calculateTotalAdditionalAmount(charges: AdditionalCharge[]): number {\n  return charges.reduce((sum, charge) => sum + charge.total, 0)\n}\n\n/**\n * 추가 비용 항목 표시 포맷팅\n * @description 추가 비용 항목을 사용자에게 표시할 형식으로 변환합니다\n * @param charge - 추가 비용 항목\n * @returns 포맷된 문자열\n * @example\n * ```ts\n * formatChargeDisplay({ amount: 10000, quantity: 2 })\n * // \"10,000원 × 2개\"\n * ```\n */\nexport function formatChargeDisplay(charge: AdditionalCharge): string {\n  return `${charge.amount.toLocaleString('ko-KR')}원 × ${charge.quantity}개`\n}\n\n/**\n * 금액 한국 형식 포맷팅\n * @description 숫자를 한국 통화 형식으로 변환합니다 (천 단위 구분)\n * @param amount - 금액 (원)\n * @returns 포맷된 금액 문자열\n * @example\n * ```ts\n * formatAmount(123456)\n * // \"123,456원\"\n * ```\n */\nexport function formatAmount(amount: number): string {\n  return `${amount.toLocaleString('ko-KR')}원`\n}\n\n/**\n * 주문명 생성\n * @description 결제 시스템에 전달할 주문명을 생성합니다\n * @param bookingInfo - 예약 정보\n * @returns 주문명 (예: \"추가 서비스 - 뽀삐\")\n * @example\n * ```ts\n * generateOrderName({ pet: { name: '뽀삐' } })\n * // \"추가 서비스 - 뽀삐\"\n * ```\n */\nexport function generateOrderName(bookingInfo: BookingInfo): string {\n  return `추가 서비스 - ${bookingInfo.pet.name}`\n}\n\n/**\n * 추가 비용 항목 검증\n * @description 추가 비용 항목이 유효한지 검증합니다\n * @param charge - 검증할 추가 비용 항목\n * @returns 유효성 여부\n */\nexport function isValidCharge(charge: AdditionalCharge): boolean {\n  return (\n    charge.amount > 0 &&\n    charge.quantity > 0 &&\n    charge.total === charge.amount * charge.quantity &&\n    charge.name.trim().length > 0\n  )\n}\n\n/**\n * 추가 비용 목록 검증\n * @description 추가 비용 목록이 모두 유효한지 검증합니다\n * @param charges - 추가 비용 항목 배열\n * @returns 유효성 여부\n */\nexport function validateCharges(charges: AdditionalCharge[]): boolean {\n  if (!Array.isArray(charges) || charges.length === 0) {\n    return false\n  }\n  return charges.every(isValidCharge)\n}\n\n/**\n * 결제 가능 여부 확인\n * @description 추가 결제를 진행할 수 있는 상태인지 확인합니다\n * @param bookingInfo - 예약 정보\n * @returns 결제 가능 여부와 불가 사유\n */\nexport function canProceedToPayment(bookingInfo: BookingInfo | null | undefined): {\n  canProceed: boolean\n  reason?: string\n} {\n  if (!bookingInfo) {\n    return { canProceed: false, reason: '예약 정보를 찾을 수 없습니다' }\n  }\n\n  if (!bookingInfo.additionalCharges || bookingInfo.additionalCharges.length === 0) {\n    return { canProceed: false, reason: '추가 비용 항목이 없습니다' }\n  }\n\n  if (!validateCharges(bookingInfo.additionalCharges)) {\n    return { canProceed: false, reason: '유효하지 않은 비용 항목이 있습니다' }\n  }\n\n  const totalAmount = calculateTotalAdditionalAmount(bookingInfo.additionalCharges)\n  if (totalAmount <= 0) {\n    return { canProceed: false, reason: '결제 금액이 0원입니다' }\n  }\n\n  return { canProceed: true }\n}\n","/**\n * 예약 정보 사이드바 컴포넌트\n * @module features/additional-payment/components\n */\n\nimport * as React from 'react'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport type { BookingInfo } from '../types/additional-payment.types'\nimport { formatAmount } from '../utils/additional-payment.utils'\n\n/**\n * 예약 정보 사이드바 variants 정의\n */\nconst bookingInfoSidebarVariants = cva('transition-all', {\n  variants: {\n    variant: {\n      default: 'border-border bg-card shadow-sm',\n      compact: 'border-border bg-card shadow-sm',\n      detailed: 'border-border bg-card shadow-md',\n      highlight: 'border-primary/50 bg-gradient-to-br from-primary/5 to-transparent shadow-md',\n      minimal: 'border-border/50 bg-transparent',\n    },\n    size: {\n      sm: '',\n      default: '',\n      lg: '',\n    },\n    sticky: {\n      true: 'sticky top-8',\n      false: '',\n    },\n  },\n  defaultVariants: {\n    variant: 'default',\n    size: 'default',\n    sticky: true,\n  },\n})\n\n/**\n * BookingInfoSidebar 컴포넌트 Props\n */\nexport interface BookingInfoSidebarProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof bookingInfoSidebarVariants> {\n  /** 예약 정보 */\n  booking: BookingInfo\n  /** 추가 결제 금액 */\n  totalAdditional: number\n}\n\n/**\n * 예약 정보 사이드바\n * @description 추가 결제 페이지의 사이드바에 예약 정보와 금액 요약을 표시합니다\n *\n * @example\n * ```tsx\n * <BookingInfoSidebar\n *   booking={booking}\n *   totalAdditional={50000}\n *   variant=\"default\"\n *   sticky\n * />\n * ```\n */\nconst BookingInfoSidebar = React.forwardRef<HTMLDivElement, BookingInfoSidebarProps>(\n  ({ className, variant, size, sticky, booking, totalAdditional, ...props }, ref) => {\n    return (\n      <Card\n        ref={ref}\n        className={cn(bookingInfoSidebarVariants({ variant, size, sticky }), className)}\n        {...props}\n      >\n        <CardHeader>\n          <CardTitle className=\"text-lg\">예약 정보</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {/* 서비스 및 반려동물 정보 */}\n            <div>\n              <h3 className=\"text-foreground font-medium\">{booking.service.name}</h3>\n              <p className=\"text-muted-foreground text-sm\">\n                {booking.pet.name} ({booking.pet.breed})\n              </p>\n            </div>\n\n            {/* 미용사 및 지점 정보 */}\n            <div>\n              <p className=\"text-sm\">\n                <span className=\"font-medium\">미용사:</span> {booking.groomer.name}\n              </p>\n              <p className=\"text-sm\">\n                <span className=\"font-medium\">지점:</span> {booking.location.name}\n              </p>\n            </div>\n\n            {/* 예약 일시 */}\n            <div>\n              <p className=\"text-sm\">\n                <span className=\"font-medium\">예약일시:</span>\n              </p>\n              <p className=\"text-muted-foreground text-sm\">\n                {booking.date} {booking.time}\n              </p>\n            </div>\n\n            {/* 금액 요약 */}\n            <div className=\"border-border border-t pt-4\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm\">기본 서비스</span>\n                <span className=\"text-sm\">{formatAmount(booking.originalAmount)}</span>\n              </div>\n              <div className=\"mt-1 flex items-center justify-between\">\n                <span className=\"text-sm\">추가 비용</span>\n                <span className=\"text-sm\">{formatAmount(totalAdditional)}</span>\n              </div>\n              <div className=\"border-border mt-4 flex items-center justify-between border-t pt-4\">\n                <span className=\"text-lg font-semibold\">추가 결제금액</span>\n                <span className=\"text-primary text-lg font-bold\">\n                  {formatAmount(totalAdditional)}\n                </span>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n)\n\nBookingInfoSidebar.displayName = 'BookingInfoSidebar'\n\nexport { BookingInfoSidebar, bookingInfoSidebarVariants }\n","/**\n * 결제 안내 공지 컴포넌트\n * @module features/additional-payment/components\n */\n\nimport * as React from 'react'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\nimport { AlertCircle, CheckCircle, Info } from 'lucide-react'\n\n/**\n * 결제 안내 공지 variants 정의\n */\nconst paymentInfoNoticeVariants = cva('rounded-lg p-4', {\n  variants: {\n    variant: {\n      warning: 'bg-yellow-50 border border-yellow-200',\n      info: 'bg-blue-50 border border-blue-200',\n      success: 'bg-green-50 border border-green-200',\n    },\n    size: {\n      sm: 'p-3',\n      default: 'p-4',\n      lg: 'p-5',\n    },\n  },\n  defaultVariants: {\n    variant: 'warning',\n    size: 'default',\n  },\n})\n\n/**\n * PaymentInfoNotice 컴포넌트 Props\n */\nexport interface PaymentInfoNoticeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof paymentInfoNoticeVariants> {\n  /** 제목 */\n  title?: string\n  /** 안내 항목 배열 */\n  items?: string[]\n  /** 커스텀 아이콘 */\n  icon?: React.ReactNode\n}\n\n/**\n * 결제 안내 공지\n * @description 추가 결제 관련 중요 정보를 사용자에게 안내합니다\n *\n * @example\n * ```tsx\n * <PaymentInfoNotice\n *   variant=\"warning\"\n *   title=\"추가 비용 안내\"\n *   items={[\n *     \"위 비용은 서비스 진행 중 발생한 추가 항목입니다\",\n *     \"미용사와 사전 협의된 내용에 한해 청구됩니다\"\n *   ]}\n * />\n * ```\n */\nconst PaymentInfoNotice = React.forwardRef<HTMLDivElement, PaymentInfoNoticeProps>(\n  (\n    { className, variant, size, title = '추가 비용 안내', items, icon, children, ...props },\n    ref\n  ) => {\n    // Variant에 따른 아이콘 및 텍스트 색상 결정\n    const variantConfig = {\n      warning: {\n        icon: icon || <AlertCircle className=\"h-5 w-5 text-yellow-600\" />,\n        titleColor: 'text-yellow-900',\n        textColor: 'text-yellow-800',\n      },\n      info: {\n        icon: icon || <Info className=\"h-5 w-5 text-blue-600\" />,\n        titleColor: 'text-blue-900',\n        textColor: 'text-blue-800',\n      },\n      success: {\n        icon: icon || <CheckCircle className=\"h-5 w-5 text-green-600\" />,\n        titleColor: 'text-green-900',\n        textColor: 'text-green-800',\n      },\n    }\n\n    const config = variantConfig[variant || 'warning']\n\n    // 기본 안내 항목 (items가 없을 경우)\n    const defaultItems = [\n      '위 비용은 서비스 진행 중 발생한 추가 항목입니다',\n      '미용사와 사전 협의된 내용에 한해 청구됩니다',\n      '문의사항이 있으시면 고객센터로 연락주세요',\n    ]\n\n    const displayItems = items || defaultItems\n\n    return (\n      <div\n        ref={ref}\n        className={cn(paymentInfoNoticeVariants({ variant, size }), className)}\n        {...props}\n      >\n        <div className=\"flex items-start space-x-3\">\n          <div className=\"mt-0.5 flex-shrink-0\">{config.icon}</div>\n          <div className=\"flex-1\">\n            <h3 className={cn('mb-2 font-semibold', config.titleColor)}>{title}</h3>\n            {children || (\n              <ul className={cn('space-y-1 text-sm', config.textColor)}>\n                {displayItems.map((item, index) => (\n                  <li key={index}>• {item}</li>\n                ))}\n              </ul>\n            )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\n\nPaymentInfoNotice.displayName = 'PaymentInfoNotice'\n\nexport { PaymentInfoNotice, paymentInfoNoticeVariants }\n","/**\n * 추가 결제 페이지 레이아웃 컴포넌트\n * @module features/additional-payment/components\n */\n\nimport * as React from 'react'\nimport { cn } from '@/lib/utils'\n\n/**\n * AdditionalPaymentLayout 컴포넌트 Props\n */\nexport interface AdditionalPaymentLayoutProps\n  extends Omit<React.HTMLAttributes<HTMLDivElement>, 'content'> {\n  /** 헤더 영역 */\n  header?: React.ReactNode\n  /** 메인 콘텐츠 영역 (왼쪽) */\n  content: React.ReactNode\n  /** 사이드바 영역 (오른쪽) */\n  sidebar: React.ReactNode\n}\n\n/**\n * 추가 결제 페이지 레이아웃\n * @description 추가 결제 페이지의 전체 레이아웃을 제공합니다\n * - 헤더 (페이지 제목 및 설명)\n * - 그리드 레이아웃 (콘텐츠 + 사이드바)\n * - 반응형 디자인 (모바일: 세로 스택, 데스크톱: 2:1 그리드)\n *\n * @example\n * ```tsx\n * <AdditionalPaymentLayout\n *   header={<PageHeader />}\n *   content={<ChargesSection />}\n *   sidebar={<BookingInfo />}\n * />\n * ```\n */\nexport function AdditionalPaymentLayout({\n  className,\n  header,\n  content,\n  sidebar,\n  ...props\n}: AdditionalPaymentLayoutProps) {\n  return (\n    <div className={cn('bg-background min-h-screen', className)} {...props}>\n      {/* 헤더 영역 */}\n      {header && (\n        <header className=\"border-border border-b\">\n          <div className=\"container mx-auto px-4 py-4\">{header}</div>\n        </header>\n      )}\n\n      {/* 메인 콘텐츠 영역 */}\n      <main className=\"container mx-auto px-4 py-8\">\n        <div className=\"mx-auto max-w-4xl space-y-8\">\n          {/* 그리드 레이아웃: 모바일 1열, 데스크톱 3열 (2:1 비율) */}\n          <div className=\"grid grid-cols-1 gap-8 lg:grid-cols-3\">\n            {/* 콘텐츠 영역 (2/3) */}\n            <div className=\"space-y-6 lg:col-span-2\">{content}</div>\n\n            {/* 사이드바 영역 (1/3) */}\n            <div className=\"lg:col-span-1\">{sidebar}</div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n\n/**\n * AdditionalPaymentHeader 컴포넌트 Props\n */\nexport interface AdditionalPaymentHeaderProps extends React.HTMLAttributes<HTMLDivElement> {\n  /** 페이지 제목 */\n  title?: string\n  /** 페이지 설명 */\n  description?: string\n}\n\n/**\n * 추가 결제 페이지 헤더\n * @description 추가 결제 페이지의 헤더 (제목 및 설명)를 제공합니다\n *\n * @example\n * ```tsx\n * <AdditionalPaymentHeader\n *   title=\"추가 결제\"\n *   description=\"서비스 중 추가로 발생한 비용을 결제해주세요\"\n * />\n * ```\n */\nexport function AdditionalPaymentHeader({\n  className,\n  title = '추가 결제',\n  description = '서비스 중 추가로 발생한 비용을 결제해주세요',\n  ...props\n}: AdditionalPaymentHeaderProps) {\n  return (\n    <div className={cn(className)} {...props}>\n      <h1 className=\"text-foreground text-2xl font-bold\">{title}</h1>\n      <p className=\"text-muted-foreground text-sm\">{description}</p>\n    </div>\n  )\n}\n\nAdditionalPaymentLayout.displayName = 'AdditionalPaymentLayout'\nAdditionalPaymentHeader.displayName = 'AdditionalPaymentHeader'\n","/**\n * 예약 상세 정보 조회 훅\n * @module features/additional-payment/hooks\n */\n\nimport { useQuery, type UseQueryResult } from '@tanstack/react-query'\nimport type { BookingInfo } from '../types/additional-payment.types'\n\n/**\n * useBookingDetails 훅 파라미터\n */\ninterface UseBookingDetailsParams {\n  /** 예약 ID */\n  bookingId: string\n  /** 사용자 세션 존재 여부 */\n  hasSession: boolean\n  /** 사용자 역할이 CUSTOMER인지 여부 */\n  isCustomer: boolean\n}\n\n/**\n * useBookingDetails 훅 반환 타입\n */\nexport interface UseBookingDetailsReturn {\n  /** 예약 정보 */\n  booking: BookingInfo | undefined\n  /** 로딩 중 여부 */\n  isLoading: boolean\n  /** 오류 */\n  error: Error | null\n  /** React Query 결과 객체 */\n  queryResult: UseQueryResult<BookingInfo, Error>\n}\n\n/**\n * 추가 결제용 예약 상세 정보 조회 훅\n * @description React Query를 사용하여 예약 정보를 조회합니다\n *\n * @param params - 훅 파라미터\n * @returns 예약 정보 조회 결과\n *\n * @example\n * ```tsx\n * const { booking, isLoading, error } = useBookingDetails({\n *   bookingId: '123',\n *   hasSession: true,\n *   isCustomer: true\n * })\n * ```\n */\nexport function useBookingDetails(params: UseBookingDetailsParams): UseBookingDetailsReturn {\n  const { bookingId, hasSession, isCustomer } = params\n\n  const queryResult = useQuery<BookingInfo, Error>({\n    queryKey: ['booking', bookingId, 'additional-payment'],\n    queryFn: async () => {\n      const response = await fetch(`/api/bookings/${bookingId}/additional-payment`)\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}))\n        throw new Error(errorData.error || '예약 정보를 불러오는데 실패했습니다')\n      }\n\n      return response.json()\n    },\n    // 세션이 있고 CUSTOMER 역할일 때만 쿼리 실행\n    enabled: !!bookingId && hasSession && isCustomer,\n    // 실패 시 재시도하지 않음 (인증 오류 가능성)\n    retry: false,\n    // 5분간 캐시 유지\n    staleTime: 5 * 60 * 1000,\n  })\n\n  return {\n    booking: queryResult.data,\n    isLoading: queryResult.isLoading,\n    error: queryResult.error,\n    queryResult,\n  }\n}\n","/**\n * 결제 초기화 훅\n * @module features/additional-payment/hooks\n */\n\nimport { useState } from 'react'\nimport { useMutation, type UseMutationResult } from '@tanstack/react-query'\nimport type { PaymentRequestResult } from '../types/additional-payment.types'\n\n/**\n * usePaymentInitialization 훅 파라미터\n */\ninterface UsePaymentInitializationParams {\n  /** 예약 ID */\n  bookingId: string\n  /** 결제 금액 (원) */\n  amount: number\n  /** 주문명 */\n  orderName: string\n}\n\n/**\n * 결제 초기화 API 응답\n */\ninterface PaymentInitResponse {\n  /** 생성된 결제 ID */\n  paymentId: string\n}\n\n/**\n * usePaymentInitialization 훅 반환 타입\n */\nexport interface UsePaymentInitializationReturn {\n  /** 결제 ID (초기화 성공 후 설정됨) */\n  paymentId: string | null\n  /** 결제 초기화 실행 함수 */\n  initializePayment: () => Promise<PaymentRequestResult | null>\n  /** 초기화 진행 중 여부 */\n  isInitializing: boolean\n  /** 초기화 오류 */\n  error: Error | null\n  /** 결제 초기화 mutation 객체 */\n  mutation: UseMutationResult<string, Error, void, unknown>\n}\n\n/**\n * 결제 초기화 훅\n * @description 추가 결제를 위한 결제 초기화를 처리합니다\n *\n * @param params - 훅 파라미터\n * @returns 결제 초기화 함수 및 상태\n *\n * @example\n * ```tsx\n * const { paymentId, initializePayment, isInitializing } = usePaymentInitialization({\n *   bookingId: '123',\n *   amount: 50000,\n *   orderName: '추가 서비스 - 뽀삐'\n * })\n *\n * // 결제 초기화 실행\n * const result = await initializePayment()\n * if (result) {\n *   console.log('Payment initialized:', result.paymentId)\n * }\n * ```\n */\nexport function usePaymentInitialization(\n  params: UsePaymentInitializationParams\n): UsePaymentInitializationReturn {\n  const { bookingId, amount, orderName } = params\n  const [paymentId, setPaymentId] = useState<string | null>(null)\n\n  const mutation = useMutation<string, Error, void>({\n    mutationFn: async () => {\n      const response = await fetch('/api/payments/initialize', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          bookingId,\n          amount,\n          orderName,\n        }),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}))\n        throw new Error(errorData.error || '결제 초기화에 실패했습니다')\n      }\n\n      const data: PaymentInitResponse = await response.json()\n      return data.paymentId\n    },\n    onSuccess: (newPaymentId) => {\n      setPaymentId(newPaymentId)\n    },\n    onError: (error: Error) => {\n      // 오류 발생 시 paymentId 초기화\n      setPaymentId(null)\n      console.error('[Payment Initialization] Error:', error.message)\n    },\n  })\n\n  /**\n   * 결제 초기화 실행\n   * @description 중복 클릭을 방지하고 결제 초기화를 실행합니다\n   */\n  const initializePayment = async (): Promise<PaymentRequestResult | null> => {\n    // 중복 클릭 방지\n    if (mutation.isPending) {\n      console.log('[Additional Payment] Request already in progress, ignoring duplicate click')\n      return null\n    }\n\n    try {\n      const newPaymentId = await mutation.mutateAsync()\n      return {\n        paymentId: newPaymentId,\n        bookingId,\n        amount,\n        orderName,\n      }\n    } catch (error) {\n      // 오류는 mutation의 onError에서 처리됨\n      console.error('[Payment Initialization] Failed:', error)\n      return null\n    }\n  }\n\n  return {\n    paymentId,\n    initializePayment,\n    isInitializing: mutation.isPending,\n    error: mutation.error,\n    mutation,\n  }\n}\n","/**\n * 추가 결제 통합 훅\n * @module features/additional-payment/hooks\n */\n\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useSession } from '@/lib/auth-client'\nimport { useProfile } from '@/hooks/useProfile'\nimport type { PaymentResult } from '@/hooks/usePayment'\nimport { useBookingDetails } from './useBookingDetails'\nimport { usePaymentInitialization } from './usePaymentInitialization'\nimport {\n  calculateTotalAdditionalAmount,\n  generateOrderName,\n} from '../utils/additional-payment.utils'\nimport type { BookingInfo, PaymentRequestResult } from '../types/additional-payment.types'\n\n/**\n * useAdditionalPayment 훅 파라미터\n */\ninterface UseAdditionalPaymentParams {\n  /** 예약 ID */\n  bookingId: string\n}\n\n/**\n * useAdditionalPayment 훅 반환 타입\n */\nexport interface UseAdditionalPaymentReturn {\n  // 인증 관련\n  /** 세션 정보 */\n  session: ReturnType<typeof useSession>['data']\n  /** 세션 로딩 중 여부 */\n  isSessionPending: boolean\n  /** 사용자 프로필 */\n  profile: ReturnType<typeof useProfile>['profile']\n\n  // 예약 정보 관련\n  /** 예약 정보 */\n  booking: BookingInfo | undefined\n  /** 예약 정보 로딩 중 여부 */\n  isBookingLoading: boolean\n  /** 예약 정보 조회 오류 */\n  bookingError: Error | null\n\n  // 결제 관련\n  /** 결제 ID */\n  paymentId: string | null\n  /** 결제 초기화 진행 중 여부 */\n  isInitializingPayment: boolean\n  /** 총 추가 결제 금액 */\n  totalAdditionalAmount: number\n  /** 주문명 */\n  orderName: string\n\n  // 이벤트 핸들러\n  /** 결제 요청 핸들러 */\n  handlePaymentRequest: () => Promise<PaymentRequestResult | null>\n  /** 결제 성공 핸들러 */\n  handlePaymentSuccess: (result: PaymentResult) => Promise<void>\n  /** 결제 오류 핸들러 */\n  handlePaymentError: (error: string) => void\n}\n\n/**\n * 추가 결제 통합 훅\n * @description 추가 결제에 필요한 모든 로직을 통합하여 제공합니다\n *\n * - 인증 확인 및 리디렉션\n * - 예약 정보 조회\n * - 결제 초기화\n * - 결제 성공/오류 처리\n *\n * @param params - 훅 파라미터\n * @returns 통합된 상태 및 핸들러\n *\n * @example\n * ```tsx\n * const {\n *   session,\n *   booking,\n *   paymentId,\n *   totalAdditionalAmount,\n *   handlePaymentRequest,\n *   handlePaymentSuccess,\n *   handlePaymentError\n * } = useAdditionalPayment({ bookingId: '123' })\n * ```\n */\nexport function useAdditionalPayment(\n  params: UseAdditionalPaymentParams\n): UseAdditionalPaymentReturn {\n  const { bookingId } = params\n  const router = useRouter()\n  const { data: session, isPending: isSessionPending } = useSession()\n  const { profile } = useProfile()\n\n  // 인증 확인\n  const hasSession = !!session?.user\n  const isCustomer = session?.user?.role === 'CUSTOMER'\n\n  // 예약 정보 조회\n  const {\n    booking,\n    isLoading: isBookingLoading,\n    error: bookingError,\n  } = useBookingDetails({\n    bookingId,\n    hasSession,\n    isCustomer,\n  })\n\n  // 계산된 값\n  const totalAdditionalAmount = booking\n    ? calculateTotalAdditionalAmount(booking.additionalCharges)\n    : 0\n\n  const orderName = booking ? generateOrderName(booking) : ''\n\n  // 결제 초기화\n  const { paymentId, initializePayment, isInitializing } = usePaymentInitialization({\n    bookingId,\n    amount: totalAdditionalAmount,\n    orderName,\n  })\n\n  // 인증 리디렉션 처리\n  useEffect(() => {\n    if (isSessionPending) return\n\n    if (!hasSession) {\n      router.push('/auth/signin')\n      return\n    }\n\n    if (!isCustomer) {\n      router.push('/dashboard')\n      return\n    }\n  }, [hasSession, isCustomer, isSessionPending, router])\n\n  // bookingId 검증 리디렉션\n  useEffect(() => {\n    if (!bookingId) {\n      router.push('/customer/bookings')\n    }\n  }, [bookingId, router])\n\n  /**\n   * 결제 요청 핸들러\n   * @description 결제 초기화를 실행하고 결과를 반환합니다\n   */\n  const handlePaymentRequest = async (): Promise<PaymentRequestResult | null> => {\n    return initializePayment()\n  }\n\n  /**\n   * 결제 성공 핸들러\n   * @description 결제 성공 후 성공 페이지로 리디렉션합니다\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const handlePaymentSuccess = async (_result: PaymentResult): Promise<void> => {\n    // Payment successful - booking status will be updated via webhook\n    // Redirect to success page\n    if (paymentId) {\n      try {\n        await router.push(`/payment/success?paymentId=${paymentId}&type=additional`)\n      } catch (error) {\n        console.error('[Payment] Redirect failed:', error)\n        alert('결제는 완료되었으나 페이지 이동에 실패했습니다. 예약 내역에서 확인해주세요.')\n      }\n    } else {\n      console.error('[Payment] Missing paymentId after success')\n      alert('결제가 완료되었으나 정보를 찾을 수 없습니다. 고객센터로 문의해주세요.')\n    }\n  }\n\n  /**\n   * 결제 오류 핸들러\n   * @description 결제 오류 시 호출됩니다 (오류는 PaymentCard에서 표시)\n   */\n  const handlePaymentError = (error: string): void => {\n    console.error('[Payment] Error:', error)\n    // Error is displayed by PaymentCard component\n    // State is managed by usePaymentInitialization (paymentId reset on error)\n  }\n\n  return {\n    // 인증 관련\n    session,\n    isSessionPending,\n    profile,\n\n    // 예약 정보 관련\n    booking,\n    isBookingLoading,\n    bookingError,\n\n    // 결제 관련\n    paymentId,\n    isInitializingPayment: isInitializing,\n    totalAdditionalAmount,\n    orderName,\n\n    // 이벤트 핸들러\n    handlePaymentRequest,\n    handlePaymentSuccess,\n    handlePaymentError,\n  }\n}\n"],"names":[],"mappings":"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"}