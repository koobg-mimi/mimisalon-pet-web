module.exports=[254799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},16874,e=>{"use strict";var t=e.i(747909),r=e.i(174017),o=e.i(996250),a=e.i(759756),n=e.i(561916),i=e.i(114444),s=e.i(837092),l=e.i(869741),d=e.i(316795),c=e.i(487718),u=e.i(995169),m=e.i(47587),p=e.i(666012),h=e.i(570101),g=e.i(626937),v=e.i(10372),f=e.i(193695);e.i(52474);var R=e.i(600220),_=e.i(89171),A=e.i(493458),w=e.i(79832),b=e.i(657446);async function E(e){try{let t=await w.default.api.getSession({headers:await (0,A.headers)()});if(!t||t.user?.role!=="ADMIN")return _.NextResponse.json({error:"Unauthorized"},{status:401});let{searchParams:r}=new URL(e.url),o=parseInt(r.get("page")||"1"),a=parseInt(r.get("limit")||"20"),n=r.get("search")||"",i=r.get("status")||"ALL",s=r.get("location")||"ALL",l={role:"GROOMER"};n&&(l.OR=[{name:{contains:n,mode:"insensitive"}},{email:{contains:n,mode:"insensitive"}},{phoneNumber:{contains:n,mode:"insensitive"}}]),"ALL"!==i&&(l.groomerProfile={isActive:"ACTIVE"===i}),"ALL"!==s&&(l.workAreas={some:{id:s}});let[d,c]=await Promise.all([b.prisma.user.findMany({where:l,include:{groomerProfile:{include:{commissionGrade:!0}},workAreas:!0,groomerBookings:{where:{status:"SERVICE_COMPLETED"},select:{id:!0,totalPrice:!0,createdAt:!0}},reviews:{select:{rating:!0}},_count:{select:{groomerBookings:!0}}},skip:(o-1)*a,take:a,orderBy:{createdAt:"desc"}}),b.prisma.user.count({where:l})]),u=d.map(e=>{let t=e.reviews.map(e=>e.rating),r=t.length>0?t.reduce((e,t)=>e+t,0)/t.length:0,o=new Date;o.setDate(o.getDate()-30);let a=e.groomerBookings.filter(e=>new Date(e.createdAt)>=o).reduce((e,t)=>e+t.totalPrice,0),n=e.groomerBookings.length>0?e.groomerBookings.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())[0].createdAt:null;return{id:e.id,userId:e.id,user:{id:e.id,email:e.email,name:e.name||"",phoneNumber:e.phoneNumber,isActive:e.groomerProfile?.isActive??!0,createdAt:e.createdAt.toISOString(),lastLoginAt:null},bio:null,experience:0,certifications:[],isActive:e.groomerProfile?.isActive??!0,rating:Number(r.toFixed(1)),totalReviews:e.reviews.length,totalBookings:e._count.groomerBookings,monthlyRevenue:a,profileImage:e.image,portfolio:[],birthDate:e.groomerProfile?.birthDate?e.groomerProfile.birthDate.toISOString():null,availableLocations:e.workAreas.map(e=>({id:e.id,name:e.name,address:e.address||"",description:e.description||"",centerLat:e.centerLat,centerLng:e.centerLng,radiusKm:e.radiusKm,isActive:e.isActive})),services:[],bankAccount:e.groomerProfile?{bankName:e.groomerProfile.bankName||"",accountNumber:e.groomerProfile.bankAccountNumber||"",accountHolder:e.groomerProfile.bankAccountHolderName||""}:null,commissionGrade:e.groomerProfile?.commissionGrade?{id:e.groomerProfile.commissionGrade.id,name:e.groomerProfile.commissionGrade.name,commissionRate:e.groomerProfile.commissionGrade.commissionRate}:null,lastActivityAt:n?new Date(n).toISOString():null}}),m=Math.ceil(c/a);return _.NextResponse.json({groomers:u,totalCount:c,totalPages:m,currentPage:o})}catch(e){return console.error("Error fetching groomers:",e),_.NextResponse.json({error:"Internal server error"},{status:500})}}e.s(["GET",()=>E],663103);var P=e.i(663103);let k=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/admin/groomers/route",pathname:"/api/admin/groomers",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/admin/groomers/route.ts",nextConfigOutput:"standalone",userland:P}),{workAsyncStorage:x,workUnitAsyncStorage:C,serverHooks:N}=k;function y(){return(0,o.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:C})}async function T(e,t,o){k.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let _="/api/admin/groomers/route";_=_.replace(/\/index$/,"")||"/";let A=await k.prepare(e,t,{srcPage:_,multiZoneDraftMode:!1});if(!A)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:w,params:b,nextConfig:E,parsedUrl:P,isDraftMode:x,prerenderManifest:C,routerServerContext:N,isOnDemandRevalidate:y,revalidateOnlyGenerated:T,resolvedPathname:O,clientReferenceManifest:S,serverActionsManifest:I}=A,D=(0,l.normalizeAppPath)(_),j=!!(C.dynamicRoutes[D]||C.routes[O]),L=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,P,!1):t.end("This page could not be found"),null);if(j&&!x){let e=!!C.routes[O],t=C.dynamicRoutes[D];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await L();throw new f.NoFallbackError}}let M=null;!j||k.isDev||x||(M="/index"===(M=O)?"/":M);let H=!0===k.isDev||!j,U=j&&!H;I&&S&&(0,i.setReferenceManifestsSingleton)({page:_,clientReferenceManifest:S,serverActionsManifest:I,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:I})});let q=e.method||"GET",B=(0,n.getTracer)(),G=B.getActiveScopeSpan(),K={params:b,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,o)=>k.onRequestError(e,t,o,N)},sharedContext:{buildId:w}},F=new d.NodeNextRequest(e),$=new d.NodeNextResponse(t),V=c.NextRequestAdapter.fromNodeNextRequest(F,(0,c.signalFromNodeResponse)(t));try{let i=async e=>k.handle(V,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=B.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=r.get("next.route");if(o){let t=`${q} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${q} ${_}`)}),s=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var n,l;let d=async({previousCacheEntry:r})=>{try{if(!s&&y&&T&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await i(a);e.fetchMetrics=K.renderOpts.fetchMetrics;let l=K.renderOpts.pendingWaitUntil;l&&o.waitUntil&&(o.waitUntil(l),l=void 0);let d=K.renderOpts.collectedTags;if(!j)return await (0,p.sendResponse)(F,$,n,K.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(n.headers);d&&(t[v.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,o=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:R.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:o}}}}catch(t){throw(null==r?void 0:r.isStale)&&await k.onRequestError(e,t,{routerKind:"App Router",routePath:_,routeType:"route",revalidateReason:(0,m.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:y})},N),t}},c=await k.handleResponse({req:e,nextConfig:E,cacheKey:M,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:y,revalidateOnlyGenerated:T,responseGenerator:d,waitUntil:o.waitUntil,isMinimalMode:s});if(!j)return null;if((null==c||null==(n=c.value)?void 0:n.kind)!==R.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",y?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),x&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let u=(0,h.fromNodeOutgoingHttpHeaders)(c.value.headers);return s&&j||u.delete(v.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||u.get("Cache-Control")||u.set("Cache-Control",(0,g.getCacheControlHeader)(c.cacheControl)),await (0,p.sendResponse)(F,$,new Response(c.value.body,{headers:u,status:c.value.status||200})),null};G?await l(G):await B.withPropagatedContext(e.headers,()=>B.trace(u.BaseServerSpan.handleRequest,{spanName:`${q} ${_}`,kind:n.SpanKind.SERVER,attributes:{"http.method":q,"http.target":e.url}},l))}catch(t){if(t instanceof f.NoFallbackError||await k.onRequestError(e,t,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,m.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:y})}),j)throw t;return await (0,p.sendResponse)(F,$,new Response(null,{status:500})),null}}e.s(["handler",()=>T,"patchFetch",()=>y,"routeModule",()=>k,"serverHooks",()=>N,"workAsyncStorage",()=>x,"workUnitAsyncStorage",()=>C],16874)},308812,e=>{e.v(t=>Promise.all(["server/chunks/node_modules_better-auth_dist_chunks_bun-sqlite-dialect_mjs_ac94bb8b._.js"].map(t=>e.l(t))).then(()=>t(463259)))},922180,e=>{e.v(t=>Promise.all(["server/chunks/node_modules_better-auth_dist_chunks_node-sqlite-dialect_mjs_29019df6._.js"].map(t=>e.l(t))).then(()=>t(8202)))},501603,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__fd3a5b9b._.js"].map(t=>e.l(t))).then(()=>t(492749)))},715957,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__05e349db._.js","server/chunks/_1aa5a6b5._.js"].map(t=>e.l(t))).then(()=>t(309653)))},578406,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__aa8ebafd._.js","server/chunks/[root-of-the-server]__aea4da49._.js","server/chunks/_46980750._.js","server/chunks/node_modules_mime-db_db_json_a85ad9f0._.js","server/chunks/node_modules_0f478c9c._.js"].map(t=>e.l(t))).then(()=>t(315159)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c5654fe7._.js.map