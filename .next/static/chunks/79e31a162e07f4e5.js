(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,172146,e=>{"use strict";var s=e.i(843476),a=e.i(271645),t=e.i(578938),l=e.i(613846),r=e.i(680818),r=r,i=e.i(870273),n=e.i(286536),d=e.i(475254);let c=(0,d.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var o=e.i(895631),o=o;let m=(0,d.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var x=e.i(515288);function h({stats:e}){return e?(0,s.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)(x.Card,{children:[(0,s.jsx)(x.CardHeader,{className:"pb-2",children:(0,s.jsx)(x.CardTitle,{className:"text-sm font-medium",children:"전체 리뷰"})}),(0,s.jsx)(x.CardContent,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:e.totalReviews.toLocaleString("ko-KR")}),(0,s.jsx)(r.default,{className:"text-muted-foreground h-4 w-4"})]})})]}),(0,s.jsxs)(x.Card,{children:[(0,s.jsx)(x.CardHeader,{className:"pb-2",children:(0,s.jsx)(x.CardTitle,{className:"text-sm font-medium",children:"평균 평점"})}),(0,s.jsx)(x.CardContent,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.averageRating.toFixed(1)}),(0,s.jsx)(i.Star,{className:"h-4 w-4 fill-yellow-600 text-yellow-600"})]})})]}),(0,s.jsxs)(x.Card,{children:[(0,s.jsx)(x.CardHeader,{className:"pb-2",children:(0,s.jsx)(x.CardTitle,{className:"text-sm font-medium",children:"공개된 리뷰"})}),(0,s.jsxs)(x.CardContent,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.publicReviews.toLocaleString("ko-KR")}),(0,s.jsx)(n.Eye,{className:"h-4 w-4 text-green-600"})]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:e.totalReviews>0?`${(e.publicReviews/e.totalReviews*100).toFixed(0)}% 공개`:"리뷰 없음"})]})]}),(0,s.jsxs)(x.Card,{children:[(0,s.jsx)(x.CardHeader,{className:"pb-2",children:(0,s.jsx)(x.CardTitle,{className:"text-sm font-medium",children:"신고된 리뷰"})}),(0,s.jsxs)(x.CardContent,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.flaggedReviews.toLocaleString("ko-KR")}),(0,s.jsx)(c,{className:"h-4 w-4 text-red-600"})]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1 text-xs",children:e.flaggedReviews>0?"확인 필요":"정상"})]})]}),(0,s.jsxs)(x.Card,{className:"md:col-span-2",children:[(0,s.jsx)(x.CardHeader,{className:"pb-2",children:(0,s.jsx)(x.CardTitle,{className:"text-sm font-medium",children:"평점 분포"})}),(0,s.jsx)(x.CardContent,{children:(0,s.jsx)("div",{className:"space-y-2",children:[5,4,3,2,1].map(a=>{let t=e.ratingDistribution[a.toString()],l=e.totalReviews>0?t/e.totalReviews*100:0;return(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex w-12 items-center justify-end gap-1 text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:a}),(0,s.jsx)(i.Star,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"})]}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("div",{className:"bg-secondary h-2 overflow-hidden rounded-full",children:(0,s.jsx)("div",{className:"h-full rounded-full bg-yellow-500 transition-all",style:{width:`${l}%`}})})}),(0,s.jsxs)("div",{className:"text-muted-foreground w-16 text-right text-sm tabular-nums",children:[t," (",l.toFixed(0),"%)"]})]},a)})})})]}),(0,s.jsxs)(x.Card,{className:"md:col-span-2",children:[(0,s.jsx)(x.CardHeader,{className:"pb-2",children:(0,s.jsx)(x.CardTitle,{className:"text-sm font-medium",children:"답변율"})}),(0,s.jsxs)(x.CardContent,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[(100*e.responseRate).toFixed(0),"%"]}),(0,s.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs",children:[Math.round(e.totalReviews*e.responseRate).toLocaleString("ko-KR"),"개 /"," ",e.totalReviews.toLocaleString("ko-KR"),"개 리뷰에 답변"]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.default,{className:"h-8 w-8 text-blue-600"}),(0,s.jsx)(m,{className:"text-muted-foreground h-8 w-8"})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("div",{className:"bg-secondary h-3 overflow-hidden rounded-full",children:(0,s.jsx)("div",{className:"h-full rounded-full bg-blue-500 transition-all",style:{width:`${100*e.responseRate}%`}})})})]})]})]}):null}var u=e.i(687130),g=e.i(519455),j=e.i(793479),p=e.i(967489);function f({filters:e,onFiltersChange:a,onApplyFilters:t,totalCount:l,currentPage:r,totalPages:n,services:d=[]}){return(0,s.jsx)(x.Card,{className:"mb-6",children:(0,s.jsxs)(x.CardContent,{className:"pt-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(j.Input,{placeholder:"고객명, 리뷰 내용, 서비스명으로 검색...",value:e.searchQuery,onChange:e=>{a({searchQuery:e.target.value})},onKeyDown:e=>{"Enter"===e.key&&t&&t()},className:"w-full"})}),(0,s.jsxs)(p.Select,{value:e.ratingFilter?.toString()||"ALL",onValueChange:e=>{a({ratingFilter:"ALL"===e?null:parseInt(e,10)})},children:[(0,s.jsx)(p.SelectTrigger,{className:"w-[140px]",children:(0,s.jsx)(p.SelectValue,{placeholder:"평점"})}),(0,s.jsxs)(p.SelectContent,{children:[(0,s.jsx)(p.SelectItem,{value:"ALL",children:"전체 평점"}),[5,4,3,2,1].map(e=>(0,s.jsx)(p.SelectItem,{value:e.toString(),children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{children:e}),(0,s.jsx)(i.Star,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"})]})},e))]})]}),(0,s.jsxs)(p.Select,{value:e.statusFilter,onValueChange:e=>{a({statusFilter:e})},children:[(0,s.jsx)(p.SelectTrigger,{className:"w-[160px]",children:(0,s.jsx)(p.SelectValue,{placeholder:"상태"})}),(0,s.jsxs)(p.SelectContent,{children:[(0,s.jsx)(p.SelectItem,{value:"ALL",children:"전체 상태"}),(0,s.jsx)(p.SelectItem,{value:"PUBLIC",children:"공개"}),(0,s.jsx)(p.SelectItem,{value:"PRIVATE",children:"비공개"}),(0,s.jsx)(p.SelectItem,{value:"FLAGGED",children:"신고됨"}),(0,s.jsx)(p.SelectItem,{value:"WITH_RESPONSE",children:"답변 완료"}),(0,s.jsx)(p.SelectItem,{value:"NO_RESPONSE",children:"답변 대기"})]})]}),t&&(0,s.jsxs)(g.Button,{onClick:t,variant:"outline",className:"w-full sm:w-auto",children:[(0,s.jsx)(u.Filter,{className:"mr-2 h-4 w-4"}),"필터 적용"]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[d.length>0&&(0,s.jsxs)(p.Select,{value:e.serviceFilter,onValueChange:e=>{a({serviceFilter:e})},children:[(0,s.jsx)(p.SelectTrigger,{className:"w-full sm:w-[180px]",children:(0,s.jsx)(p.SelectValue,{placeholder:"서비스"})}),(0,s.jsxs)(p.SelectContent,{children:[(0,s.jsx)(p.SelectItem,{value:"ALL",children:"전체 서비스"}),d.map(e=>(0,s.jsx)(p.SelectItem,{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)(p.Select,{value:e.sortBy,onValueChange:e=>{a({sortBy:e})},children:[(0,s.jsx)(p.SelectTrigger,{className:"w-full sm:w-[160px]",children:(0,s.jsx)(p.SelectValue,{placeholder:"정렬 기준"})}),(0,s.jsxs)(p.SelectContent,{children:[(0,s.jsx)(p.SelectItem,{value:"createdAt",children:"작성일"}),(0,s.jsx)(p.SelectItem,{value:"rating",children:"평점"}),(0,s.jsx)(p.SelectItem,{value:"customerName",children:"고객명"})]})]}),(0,s.jsxs)(p.Select,{value:e.sortOrder,onValueChange:e=>{a({sortOrder:e})},children:[(0,s.jsx)(p.SelectTrigger,{className:"w-full sm:w-[140px]",children:(0,s.jsx)(p.SelectValue,{placeholder:"순서"})}),(0,s.jsxs)(p.SelectContent,{children:[(0,s.jsx)(p.SelectItem,{value:"desc",children:"최신순"}),(0,s.jsx)(p.SelectItem,{value:"asc",children:"오래된순"})]})]})]})]}),void 0!==l&&l>0&&(0,s.jsxs)("div",{className:"text-muted-foreground mt-4 text-sm",children:["총 ",l.toLocaleString("ko-KR"),"개의 리뷰",void 0!==r&&void 0!==n&&(0,s.jsxs)("span",{children:[" ","(페이지 ",r," / ",n,")"]})]})]})})}var r=r,v=e.i(531278),N=e.i(225913),b=e.i(975157),w=e.i(77705);let y=(0,N.cva)("inline-flex items-center gap-1.5 rounded-full font-medium transition-colors border",{variants:{variant:{default:"border-transparent px-2.5 py-0.5",compact:"text-xs px-2 py-0.5 border-transparent",detailed:"text-sm px-3 py-1.5 border-transparent shadow-sm",highlight:"px-3 py-1 border-current ring-2 ring-offset-2 ring-current/20",minimal:"border-0 bg-transparent px-0 py-0"},size:{sm:"text-xs",default:"text-sm",lg:"text-base"},status:{public:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",private:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",flagged:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}},defaultVariants:{variant:"default",size:"default",status:"public"}}),C=a.forwardRef(({className:e,variant:a,size:t,isPublic:l,isFlagged:r,showIcon:i=!0,...d},o)=>{let m=r?c:l?n.Eye:w.EyeOff,x=r?"Flagged":l?"Public":"Private";return(0,s.jsxs)("div",{ref:o,className:(0,b.cn)(y({variant:a,size:t,status:r?"flagged":l?"public":"private",className:e})),role:"status","aria-label":`Review status: ${x}`,...d,children:[i&&(0,s.jsx)(m,{className:"sm"===t?"h-3 w-3":"lg"===t?"h-4 w-4":"h-3.5 w-3.5","aria-hidden":"true"}),(0,s.jsx)("span",{children:x})]})});C.displayName="ReviewStatusBadge";let S=(0,N.cva)("inline-flex items-center gap-0.5",{variants:{size:{sm:"text-sm",default:"text-base",lg:"text-lg"}},defaultVariants:{size:"default"}}),k=a.forwardRef(({className:e,size:a,rating:t,showNumeric:l=!1,...r},n)=>{let d=Math.max(1,Math.min(5,Math.round(t))),c="sm"===a?"h-4 w-4":"lg"===a?"h-6 w-6":"h-5 w-5",o=Array.from({length:5},(e,a)=>{let t=a+1,l=t<=d;return(0,s.jsx)(i.Star,{className:(0,b.cn)(c,"transition-colors",l?"fill-yellow-400 text-yellow-400 dark:fill-yellow-500 dark:text-yellow-500":"fill-none text-gray-300 dark:text-gray-600"),"aria-hidden":"true"},t)});return(0,s.jsxs)("div",{ref:n,className:(0,b.cn)(S({size:a,className:e})),role:"img","aria-label":`Rating: ${d} out of 5 stars`,...r,children:[o,l&&(0,s.jsx)("span",{className:(0,b.cn)("text-muted-foreground ml-1.5 font-medium","sm"===a?"text-xs":"lg"===a?"text-base":"text-sm"),children:d})]})});k.displayName="ReviewRatingStars";let F=(0,N.cva)("cursor-pointer transition-all hover:shadow-md",{variants:{variant:{default:"border-border bg-card shadow-sm",compact:"border-border bg-card shadow-sm",detailed:"border-border bg-card shadow-md",highlight:"border-primary/50 bg-gradient-to-br from-primary/5 to-transparent shadow-md",minimal:"border-border/50 bg-transparent shadow-none"},size:{sm:"p-4",default:"p-5",lg:"p-6"}},defaultVariants:{variant:"default",size:"default"}}),R=a.forwardRef(({className:e,variant:a,size:t,review:l,onViewDetails:r,...i},n)=>{let d=new Date(l.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"});return(0,s.jsxs)(x.Card,{ref:n,className:(0,b.cn)(F({variant:a,size:t,className:e})),onClick:()=>{r?.(l)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),r?.(l))},tabIndex:r?0:void 0,role:r?"button":void 0,"aria-label":r?`View details for review by ${l.customer.name}`:void 0,...i,children:[(0,s.jsx)(x.CardHeader,{className:"space-y-2 p-0 pb-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,s.jsx)(k,{rating:l.rating,size:t}),(0,s.jsxs)("p",{className:"text-muted-foreground text-sm",children:[(0,s.jsx)("span",{className:"text-foreground font-medium",children:l.customer.name}),(0,s.jsx)("span",{className:"mx-1.5",children:"•"}),(0,s.jsx)("span",{children:d})]})]}),(0,s.jsx)(C,{isPublic:l.isPublic,isFlagged:l.isFlagged,size:t,variant:"minimal"===a?"minimal":"compact"})]})}),l.comment&&(0,s.jsx)(x.CardContent,{className:"p-0 pb-3",children:(0,s.jsx)("p",{className:"text-muted-foreground line-clamp-3 text-sm leading-relaxed",children:l.comment})}),(0,s.jsxs)(x.CardFooter,{className:"text-muted-foreground flex items-center justify-between p-0 text-xs",children:[(0,s.jsx)("span",{children:l.booking.service.name}),l.response&&(0,s.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:"Response"})]})]})});function A({reviews:e,isLoading:a,onViewDetails:t,currentPage:l,totalPages:i,onPageChange:n,cardVariant:d="default",cardSize:c="default"}){return a&&0===e.length?(0,s.jsx)(x.Card,{children:(0,s.jsx)(x.CardContent,{className:"flex min-h-[400px] items-center justify-center",children:(0,s.jsxs)("div",{className:"text-muted-foreground flex flex-col items-center gap-3",children:[(0,s.jsx)(v.Loader2,{className:"h-8 w-8 animate-spin"}),(0,s.jsx)("p",{className:"text-sm",children:"리뷰 불러오는 중..."})]})})}):a||0!==e.length?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsx)(R,{review:e,onViewDetails:t,variant:e.isFlagged?"highlight":d,size:c},e.id))}),a&&e.length>0&&(0,s.jsx)(x.Card,{children:(0,s.jsx)(x.CardContent,{className:"flex items-center justify-center py-8",children:(0,s.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2 text-sm",children:[(0,s.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{children:"추가 리뷰 불러오는 중..."})]})})}),n&&void 0!==l&&void 0!==i&&i>1&&(0,s.jsx)(x.Card,{children:(0,s.jsxs)(x.CardContent,{className:"flex items-center justify-between py-4",children:[(0,s.jsxs)("div",{className:"text-muted-foreground text-sm",children:["페이지 ",l," / ",i]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>n(l-1),disabled:l<=1||a,children:"이전"}),(0,s.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>n(l+1),disabled:l>=i||a,children:"다음"})]})]})}),!n&&!a&&e.length>0&&(0,s.jsx)(x.Card,{children:(0,s.jsx)(x.CardContent,{className:"text-muted-foreground py-4 text-center text-sm",children:"모든 리뷰를 불러왔습니다"})})]}):(0,s.jsx)(x.Card,{children:(0,s.jsx)(x.CardContent,{className:"flex min-h-[400px] items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3 text-center",children:[(0,s.jsx)(r.default,{className:"text-muted-foreground/50 h-12 w-12"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-medium",children:"리뷰를 찾을 수 없습니다"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"필터나 검색어를 변경해보세요"})]})]})})})}R.displayName="ReviewCard";var r=r,D=e.i(727612),L=e.i(776639),P=e.i(759684),I=e.i(772436),T=e.i(799676),z=e.i(657688);function V({review:e,open:a,onOpenChange:t,onApprove:l,onFlag:i,onHide:d,onRespond:o,onDelete:m}){return e?(0,s.jsx)(L.Dialog,{open:a,onOpenChange:t,children:(0,s.jsxs)(L.DialogContent,{className:"max-h-[90vh] max-w-4xl p-0",children:[(0,s.jsx)(L.DialogHeader,{className:"px-6 pt-6 pb-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(T.Avatar,{className:"h-16 w-16",children:[(0,s.jsx)(T.AvatarImage,{src:e.customer.image||void 0,alt:e.customer.name}),(0,s.jsx)(T.AvatarFallback,{className:"text-2xl",children:e.customer.name.charAt(0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(L.DialogTitle,{className:"text-2xl",children:e.customer.name}),(0,s.jsx)(L.DialogDescription,{className:"mt-1",children:e.customer.email})]})]}),(0,s.jsx)(C,{isPublic:e.isPublic,isFlagged:e.isFlagged,variant:"detailed"})]})}),(0,s.jsx)(P.ScrollArea,{className:"max-h-[calc(90vh-180px)]",children:(0,s.jsxs)("div",{className:"space-y-6 px-6 pb-6",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"리뷰 내용"}),(0,s.jsxs)("div",{className:"bg-muted/50 space-y-3 rounded-lg p-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"평점"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)(k,{rating:e.rating,size:"lg",showNumeric:!0})})]}),e.comment&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"리뷰 내용"}),(0,s.jsx)("p",{className:"mt-1 text-sm whitespace-pre-wrap",children:e.comment})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"작성일"}),(0,s.jsx)("p",{className:"font-medium",children:new Date(e.createdAt).toLocaleString("ko-KR")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"수정일"}),(0,s.jsx)("p",{className:"font-medium",children:new Date(e.updatedAt).toLocaleString("ko-KR")})]})]})]})]}),e.images&&e.images.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.Separator,{}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"리뷰 사진"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4",children:e.images.map(e=>(0,s.jsx)("div",{className:"border-border relative aspect-square overflow-hidden rounded-lg border",children:(0,s.jsx)(z.default,{src:e.url,alt:`Review image ${e.order}`,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw"})},e.id))})]})]}),(0,s.jsx)(I.Separator,{}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"예약 정보"}),(0,s.jsxs)("div",{className:"bg-muted/50 space-y-3 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"예약일"}),(0,s.jsx)("p",{className:"font-medium",children:e.booking.date})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"서비스"}),(0,s.jsx)("p",{className:"font-medium",children:e.booking.service.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"미용사"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,s.jsxs)(T.Avatar,{className:"h-6 w-6",children:[(0,s.jsx)(T.AvatarImage,{src:e.booking.groomer.image||void 0,alt:e.booking.groomer.name}),(0,s.jsx)(T.AvatarFallback,{className:"text-xs",children:e.booking.groomer.name.charAt(0)})]}),(0,s.jsx)("span",{className:"font-medium",children:e.booking.groomer.name})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"지점"}),(0,s.jsx)("p",{className:"font-medium",children:e.booking.location.name})]})]}),e.booking.pets&&e.booking.pets.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"반려동물"}),(0,s.jsx)("div",{className:"mt-1 flex flex-wrap gap-2",children:e.booking.pets.map(e=>(0,s.jsxs)("span",{className:"bg-primary/10 text-primary inline-flex items-center rounded-full px-3 py-1 text-sm font-medium",children:[e.name," (",e.breed?.name||"알 수 없음",")"]},e.id))})]})]})]}),e.response&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.Separator,{}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"mb-3 text-lg font-semibold",children:"미용사 답변"}),(0,s.jsxs)("div",{className:"bg-muted/50 space-y-2 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"답변자:"}),(0,s.jsx)("span",{className:"font-medium",children:e.response.groomer.name}),(0,s.jsxs)("span",{className:"text-muted-foreground text-xs",children:["• ",new Date(e.response.createdAt).toLocaleString("ko-KR")]})]}),(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.response.content})]})]})]}),e.isFlagged&&e.flagReason&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.Separator,{}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"mb-3 text-lg font-semibold text-red-600",children:"신고 정보"}),(0,s.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-900 dark:bg-red-950/20",children:(0,s.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:e.flagReason})})]})]})]})}),(0,s.jsx)(L.DialogFooter,{className:"px-6 pb-6",children:(0,s.jsxs)("div",{className:"flex w-full flex-wrap gap-2",children:[e.isPublic?(0,s.jsxs)(g.Button,{onClick:()=>d?.(e.id),variant:"outline",size:"sm",className:"text-orange-600",children:[(0,s.jsx)(w.EyeOff,{className:"mr-2 h-4 w-4"}),"숨기기"]}):(0,s.jsxs)(g.Button,{onClick:()=>l?.(e.id),variant:"outline",size:"sm",className:"text-green-600",children:[(0,s.jsx)(n.Eye,{className:"mr-2 h-4 w-4"}),"공개"]}),!e.isFlagged&&(0,s.jsxs)(g.Button,{onClick:()=>i?.(e.id),variant:"outline",size:"sm",className:"text-red-600",children:[(0,s.jsx)(c,{className:"mr-2 h-4 w-4"}),"신고"]}),!e.response&&(0,s.jsxs)(g.Button,{onClick:()=>o?.(e.id),variant:"outline",size:"sm",children:[(0,s.jsx)(r.default,{className:"mr-2 h-4 w-4"}),"답변 작성"]}),(0,s.jsxs)(g.Button,{onClick:()=>m?.(e.id),variant:"outline",size:"sm",className:"text-red-600",children:[(0,s.jsx)(D.Trash2,{className:"mr-2 h-4 w-4"}),"삭제"]}),(0,s.jsx)(g.Button,{onClick:()=>t(!1),variant:"default",size:"sm",className:"ml-auto",children:"닫기"})]})})]})}):null}var B=e.i(653145),M=e.i(994814),O=e.i(362201),K=e.i(903133),E=e.i(624687);let H=O.object({reason:O.string().min(10,{message:"신고 사유는 최소 10자 이상 입력해주세요."}).max(500,{message:"신고 사유는 최대 500자까지 입력 가능합니다."})});function $({review:e,open:a,onOpenChange:t,onSubmit:l,isSubmitting:r=!1}){let i=(0,B.useForm)({resolver:(0,M.zodResolver)(H),defaultValues:{reason:""}}),n=()=>{i.reset(),t(!1)},d=async s=>{if(e)try{await l({reviewId:e.id,reason:s.reason}),n()}catch(e){console.error("Failed to flag review:",e)}};return e?(0,s.jsx)(L.Dialog,{open:a,onOpenChange:t,children:(0,s.jsxs)(L.DialogContent,{className:"sm:max-w-[500px]",children:[(0,s.jsxs)(L.DialogHeader,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c,{className:"h-5 w-5 text-red-600"}),(0,s.jsx)(L.DialogTitle,{children:"리뷰 신고"})]}),(0,s.jsx)(L.DialogDescription,{children:"부적절한 리뷰를 신고합니다. 신고 사유를 상세히 입력해주세요."})]}),(0,s.jsx)(K.Form,{...i,children:(0,s.jsxs)("form",{onSubmit:i.handleSubmit(d),className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-muted/50 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"고객:"})," ",(0,s.jsx)("span",{className:"font-medium",children:e.customer.name})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"평점:"})," ",(0,s.jsxs)("span",{className:"font-medium",children:["⭐ ",e.rating]})]}),e.comment&&(0,s.jsxs)("p",{className:"text-muted-foreground line-clamp-2",children:["“",e.comment,"”"]})]})}),(0,s.jsx)(K.FormField,{control:i.control,name:"reason",render:({field:e})=>(0,s.jsxs)(K.FormItem,{children:[(0,s.jsx)(K.FormLabel,{children:"신고 사유 *"}),(0,s.jsx)(K.FormControl,{children:(0,s.jsx)(E.Textarea,{placeholder:"신고 사유를 입력해주세요 (최소 10자)",className:"min-h-[120px] resize-none",disabled:r,...e})}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(K.FormMessage,{}),(0,s.jsxs)("span",{className:"text-muted-foreground text-xs",children:[e.value?.length||0," / 500"]})]})]})}),(0,s.jsxs)(L.DialogFooter,{children:[(0,s.jsx)(g.Button,{type:"button",variant:"outline",onClick:n,disabled:r,children:"취소"}),(0,s.jsx)(g.Button,{type:"submit",variant:"destructive",disabled:r||!i.formState.isValid,children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin",children:"⏳"}),"신고 중..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{className:"mr-2 h-4 w-4"}),"신고하기"]})})]})]})})]})}):null}var Q=e.i(868499),q=e.i(878894);function G({review:e,open:a,onOpenChange:t,onConfirm:l,isDeleting:r=!1}){let i=async()=>{if(e)try{await l(e.id),t(!1)}catch(e){console.error("Failed to delete review:",e)}};return e?(0,s.jsx)(Q.AlertDialog,{open:a,onOpenChange:t,children:(0,s.jsxs)(Q.AlertDialogContent,{children:[(0,s.jsxs)(Q.AlertDialogHeader,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(q.AlertTriangle,{className:"h-5 w-5 text-red-600"}),(0,s.jsx)(Q.AlertDialogTitle,{children:"리뷰 삭제"})]}),(0,s.jsxs)(Q.AlertDialogDescription,{className:"space-y-3 pt-2",children:[(0,s.jsx)("p",{children:"정말로 이 리뷰를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."}),(0,s.jsx)("div",{className:"bg-muted/50 rounded-lg p-3 text-left",children:(0,s.jsxs)("div",{className:"space-y-1.5 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"고객:"}),(0,s.jsx)("span",{className:"text-foreground font-medium",children:e.customer.name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"작성일:"}),(0,s.jsx)("span",{className:"text-foreground font-medium",children:new Date(e.createdAt).toLocaleDateString("ko-KR")})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"평점:"}),(0,s.jsxs)("span",{className:"text-foreground font-medium",children:["⭐ ",e.rating]})]}),e.comment&&(0,s.jsx)("div",{className:"border-border mt-2 border-t pt-2",children:(0,s.jsxs)("p",{className:"text-muted-foreground line-clamp-2 text-xs",children:["“",e.comment,"”"]})})]})}),(0,s.jsx)("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"⚠️ 삭제된 리뷰는 복구할 수 없습니다."})]})]}),(0,s.jsxs)(Q.AlertDialogFooter,{children:[(0,s.jsx)(Q.AlertDialogCancel,{disabled:r,children:"취소"}),(0,s.jsx)(Q.AlertDialogAction,{onClick:i,disabled:r,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin",children:"⏳"}),"삭제 중..."]}):"삭제"})]})]})}):null}var U=e.i(80218);function _(){let{data:e,isPending:r}=(0,t.useSession)(),i=(0,l.useRouter)(),[n,d]=(0,a.useState)({searchQuery:"",ratingFilter:null,statusFilter:"ALL",serviceFilter:"ALL",sortBy:"createdAt",sortOrder:"desc"}),[c,o]=(0,a.useState)(1),[m,x]=(0,a.useState)(null),[u,g]=(0,a.useState)(!1),[j,p]=(0,a.useState)(!1),[v,N]=(0,a.useState)(!1),{reviews:b,pagination:w,stats:y,isLoading:C,isFetching:S}=function({filters:e,page:s,limit:t=20,enabled:l=!0}){let{data:r,isLoading:i,isFetching:n,error:d}=(0,U.useGetReviewsQuery)({page:s,limit:t,search:e.searchQuery,rating:e.ratingFilter,status:"ALL"!==e.statusFilter?e.statusFilter:void 0,service:e.serviceFilter,sortBy:e.sortBy,sortOrder:e.sortOrder},{skip:!l}),c=(0,a.useMemo)(()=>r?.reviews??[],[r?.reviews]);return{reviews:c,pagination:(0,a.useMemo)(()=>({currentPage:r?.currentPage??1,totalPages:r?.totalPages??1,totalCount:r?.totalCount??0,hasNext:(r?.currentPage??1)<(r?.totalPages??1),hasPrev:(r?.currentPage??1)>1}),[r]),stats:(0,a.useMemo)(()=>r?.stats,[r?.stats]),isLoading:i,isFetching:n,error:d}}({filters:n,page:c,limit:20,enabled:!!e?.user&&"ADMIN"===e.user.role}),[k]=(0,U.useApproveReviewMutation)(),[F,{isLoading:R}]=(0,U.useFlagReviewMutation)(),[D,{isLoading:L}]=(0,U.useDeleteReviewMutation)(),[P]=(0,U.useHideReviewMutation)();(0,a.useEffect)(()=>{r||e||i.push("/auth/signin"),!r&&e?.user?.role&&"ADMIN"!==e.user.role&&i.push("/admin/dashboard/overview")},[e,r,i]);let I=(0,a.useCallback)(e=>{x(e),g(!0)},[]),T=(0,a.useCallback)(async e=>{try{await k(e).unwrap(),g(!1)}catch(e){console.error("Failed to approve review:",e),alert("리뷰 승인에 실패했습니다.")}},[k]),z=(0,a.useCallback)(async e=>{try{await F(e).unwrap(),p(!1),g(!1)}catch(e){console.error("Failed to flag review:",e),alert("리뷰 신고에 실패했습니다.")}},[F]),B=(0,a.useCallback)(async e=>{try{await P(e).unwrap(),g(!1)}catch(e){console.error("Failed to hide review:",e),alert("리뷰 상태 변경에 실패했습니다.")}},[P]),M=(0,a.useCallback)(async e=>{try{await D(e).unwrap(),N(!1),g(!1),x(null)}catch(e){console.error("Failed to delete review:",e),alert("리뷰 삭제에 실패했습니다.")}},[D]),O=(0,a.useCallback)(e=>{d(s=>({...s,...e})),o(1)},[]),K=(0,a.useCallback)(e=>{o(e)},[]);return r?(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,s.jsx)("div",{className:"text-lg",children:"Loading..."})}):e&&e.user?.role==="ADMIN"?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:"리뷰 관리"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"전체 리뷰를 관리하고 모니터링합니다"})]}),(0,s.jsx)(h,{stats:y??null}),(0,s.jsx)(f,{filters:n,onFiltersChange:O,totalCount:w.totalCount,currentPage:w.currentPage,totalPages:w.totalPages}),(0,s.jsx)(A,{reviews:b,isLoading:C||S,onViewDetails:I,currentPage:w.currentPage,totalPages:w.totalPages,onPageChange:K}),m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(V,{review:m,open:u,onOpenChange:g,onApprove:T,onFlag:()=>p(!0),onHide:B,onDelete:()=>N(!0)}),(0,s.jsx)($,{review:m,open:j,onOpenChange:p,onSubmit:z,isSubmitting:R}),(0,s.jsx)(G,{review:m,open:v,onOpenChange:N,onConfirm:M,isDeleting:L})]})]}):null}e.s(["default",()=>_],172146)}]);