(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,519455,225913,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(991918),s=e.i(207670);let i=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=s.clsx,o=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:s,defaultVariants:o}=t,l=Object.keys(s).map(e=>{let t=null==r?void 0:r[e],a=null==o?void 0:o[e];if(null===t)return null;let n=i(t)||i(a);return s[e][n]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return n(e,l,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...o,...c}[t]):({...o,...c})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)};e.s(["cva",0,o],225913);var l=e.i(975157);let c=o("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 touch-manipulation active:scale-[0.98] active:opacity-90 relative overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md active:shadow-sm before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/10 before:to-transparent before:translate-x-[-200%] hover:before:translate-x-[200%] before:transition-transform before:duration-700",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 active:bg-destructive/95 shadow-sm hover:shadow-md",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground active:bg-accent/90 shadow-sm hover:shadow-md hover:border-primary/30",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:bg-secondary/90 shadow-sm hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/90",link:"text-primary underline-offset-4 hover:underline active:text-primary/80",cta:"bg-gradient-to-r from-primary to-primary/90 text-primary-foreground hover:from-primary/90 hover:to-primary/80 shadow-lg hover:shadow-xl active:shadow-md transform hover:scale-[1.02] active:scale-[0.98] before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/20 before:to-transparent before:translate-x-[-200%] hover:before:translate-x-[200%] before:transition-transform before:duration-700","cta-outline":"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground shadow-sm hover:shadow-lg transform hover:scale-[1.02] active:scale-[0.98] transition-all duration-300","mobile-primary":"bg-primary text-primary-foreground hover:bg-primary/90 shadow-lg hover:shadow-xl active:shadow-md min-h-[48px] sm:min-h-[44px] rounded-lg font-semibold"},size:{default:"min-h-[44px] px-4 py-3 sm:min-h-[40px] sm:py-2",sm:"min-h-[40px] rounded-md px-3 py-2 sm:min-h-[36px] text-sm",lg:"min-h-[48px] rounded-md px-6 py-3 sm:min-h-[44px] sm:px-8 text-base",xl:"min-h-[52px] rounded-lg px-8 py-4 sm:min-h-[48px] sm:px-10 text-lg font-semibold",icon:"min-h-[44px] min-w-[44px] sm:min-h-[40px] sm:min-w-[40px]","icon-sm":"min-h-[36px] min-w-[36px] sm:min-h-[32px] sm:min-w-[32px]","icon-lg":"min-h-[48px] min-w-[48px] sm:min-h-[44px] sm:min-w-[44px]"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:r,size:s,asChild:i=!1,...n},o)=>{let d=i?a.Slot:"button";return(0,t.jsx)(d,{className:(0,l.cn)(c({variant:r,size:s,className:e})),ref:o,...n})});d.displayName="Button",e.s(["Button",()=>d,"buttonVariants",()=>c],519455)},475254,e=>{"use strict";var t=e.i(271645);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:o="",children:l,iconNode:c,...d},m)=>(0,t.createElement)("svg",{ref:m,...s,width:r,height:r,stroke:e,strokeWidth:n?24*Number(i)/Number(r):i,className:a("lucide",o),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(l)?l:[l]])),n=(e,s)=>{let n=(0,t.forwardRef)(({className:n,...o},l)=>(0,t.createElement)(i,{ref:l,iconNode:s,className:a(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...o}));return n.displayName=r(e),n};e.s(["default",()=>n],475254)},37457,e=>{"use strict";var t,r=e.i(271645),a=e.i(578938);class s{static isReactNativeWebView(){return!!(window.ReactNativeWebView||navigator.userAgent.includes("ReactNative")||navigator.userAgent.includes("MimiSalon"))}static async registerTokenViaAPI(e){try{let t=await fetch("/api/notifications/register-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}static async getTokenStatus(){try{let e=await fetch("/api/notifications/token/status");return await e.json()}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}}function i(){let{data:e,isPending:t}=(0,a.useSession)(),i=s.isReactNativeWebView(),n=(0,r.useCallback)(e=>{if(i&&window.ReactNativeWebView)try{let t=JSON.stringify(e);window.ReactNativeWebView.postMessage(t),console.log("ðŸ“¤ Sent message to React Native:",e)}catch{return}},[i]),o=(0,r.useCallback)(e=>{n({type:"USER_LOGGED_IN",data:e})},[n]),l=(0,r.useCallback)(()=>{n({type:"USER_LOGGED_OUT"})},[n]),c=(0,r.useCallback)(()=>{n({type:"IMAGE_UPLOAD_REQUEST"})},[n]),d=(0,r.useCallback)(()=>{n({type:"CAMERA_REQUEST"})},[n]);return(0,r.useEffect)(()=>{try{!t&&e?.user&&i&&(console.log("ðŸ”„ Sending user data to React Native from bridge hook"),o({userId:e.user.id,email:e.user.email||"",name:e.user.name||"",phoneNumber:e.user.phoneNumber||"",role:e.user.role}))}catch{return}},[e,t,i,o]),{isWebView:i,sendMessage:n,sendUserLogin:o,sendUserLogout:l,requestImageUpload:c,requestCamera:d}}(t={}).USER_LOGGED_IN="USER_LOGGED_IN",t.USER_LOGGED_OUT="USER_LOGGED_OUT",t.EXPO_TOKEN_REGISTERED="EXPO_TOKEN_REGISTERED",t.IMAGE_UPLOAD_REQUEST="IMAGE_UPLOAD_REQUEST",t.CAMERA_REQUEST="CAMERA_REQUEST",t.IMAGE_UPLOAD_RESPONSE="IMAGE_UPLOAD_RESPONSE",e.s(["useWebViewBridge",()=>i],37457)},17603,e=>{"use strict";let t=(0,e.i(475254).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["default",()=>t])},968553,e=>{"use strict";var t=e.i(17603);e.s(["Camera",()=>t.default])},569074,e=>{"use strict";let t=(0,e.i(475254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],569074)},28928,e=>{"use strict";function t(e,r="image/jpeg"){let a=atob(e),s=Array(a.length);for(let e=0;e<a.length;e++)s[e]=a.charCodeAt(e);return new Blob([new Uint8Array(s)],{type:r})}async function r(e,r){try{let a=function(e,r="image.jpg"){let a=t(e.replace(/^data:image\/[a-z]+;base64,/,"")),s=new FormData;return s.append("file",a,r),s}(e),s=await fetch(r,{method:"POST",body:a});if(!s.ok)throw Error(`Upload failed: ${s.status}`);let i=await s.json();return{success:!0,url:i.url||i.data?.url}}catch(e){return console.error("Image upload failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}function a(e){return/^data:image\/(jpeg|jpg|png|gif|webp);base64,/.test(e)}function s(){let e=window.navigator.userAgent.toLowerCase();return/android|iphone|ipad|ipod|ios/.test(e)}e.s(["base64ToBlob",()=>t,"isMobileDevice",()=>s,"isValidBase64Image",()=>a,"uploadImageToServer",()=>r])},429440,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(519455),s=e.i(37457),i=e.i(28928),n=e.i(968553),o=e.i(569074),l=e.i(975157);function c({onImageSelect:e,onImageUpload:c,uploadUrl:d,className:m,accept:u="image/*",multiple:h=!1,disabled:p=!1,placeholder:f="ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”"}){let[x,g]=(0,r.useState)(!1),[b,v]=(0,r.useState)(null),{isWebView:y,requestImageUpload:w,requestCamera:j}=(0,s.useWebViewBridge)(),N=(0,i.isMobileDevice)()&&y,E=(0,r.useCallback)(async t=>{if(t.data?.type==="IMAGE_UPLOAD_RESPONSE"){let{imageData:r}=t.data;if(!r||!(0,i.isValidBase64Image)(r))return void v("ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë¯¸ì§€ ë°ì´í„°ìž…ë‹ˆë‹¤.");if(v(null),d){g(!0);try{let e=await (0,i.uploadImageToServer)(r,d);e.success&&e.url?c?.(e.url):v(e.error||"ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch{v("ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{g(!1)}}else e?.(r)}},[d,e,c]);(0,r.useEffect)(()=>{if(N)return window.addEventListener("message",E),()=>{window.removeEventListener("message",E)}},[N,E]);let R=(0,r.useCallback)(t=>{let r=t.target.files;if(!r||0===r.length)return;let a=r[0];if(d){g(!0);let e=new FormData;e.append("file",a),fetch(d,{method:"POST",body:e}).then(e=>e.json()).then(e=>{if(e.url)c?.(e.url);else throw Error("ì—…ë¡œë“œ ì‘ë‹µì— URLì´ ì—†ìŠµë‹ˆë‹¤.")}).catch(e=>{v("ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+e.message)}).finally(()=>{g(!1)})}else e?.(a);t.target.value=""},[d,e,c]);return N?(0,t.jsxs)("div",{className:(0,l.cn)("flex gap-2",m),children:[(0,t.jsxs)(a.Button,{type:"button",variant:"outline",onClick:w,disabled:p||x,className:"flex items-center gap-2",children:[(0,t.jsx)(o.Upload,{size:16}),"ê°¤ëŸ¬ë¦¬"]}),(0,t.jsxs)(a.Button,{type:"button",variant:"outline",onClick:j,disabled:p||x,className:"flex items-center gap-2",children:[(0,t.jsx)(n.Camera,{size:16}),"ì¹´ë©”ë¼"]}),x&&(0,t.jsx)("div",{className:"text-muted-foreground text-sm",children:"ì—…ë¡œë“œ ì¤‘..."}),b&&(0,t.jsx)("div",{className:"text-sm text-red-500",children:b})]}):(0,t.jsxs)("div",{className:(0,l.cn)("w-full",m),children:[(0,t.jsx)("input",{type:"file",id:"image-input",accept:u,multiple:h,onChange:R,disabled:p||x,className:"hidden"}),(0,t.jsx)("label",{htmlFor:"image-input",className:(0,l.cn)("flex h-32 w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 hover:bg-gray-100",p&&"cursor-not-allowed opacity-50","transition-colors"),children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,t.jsx)(o.Upload,{className:"mb-4 h-8 w-8 text-gray-500"}),(0,t.jsx)("p",{className:"mb-2 text-sm text-gray-500",children:(0,t.jsx)("span",{className:"font-semibold",children:"í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ"})}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:f})]})}),x&&(0,t.jsx)("div",{className:"text-muted-foreground mt-2 text-sm",children:"ì—…ë¡œë“œ ì¤‘..."}),b&&(0,t.jsx)("div",{className:"mt-2 text-sm text-red-500",children:b})]})}function d(){let[e,a]=(0,r.useState)(null),[s,i]=(0,r.useState)(null);return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"mb-8 text-3xl font-bold",children:"ì´ë¯¸ì§€ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸"}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:"íŒŒì¼ ì„ íƒë§Œ (ì—…ë¡œë“œ ì—†ìŒ)"}),(0,t.jsx)(c,{onImageSelect:e=>{if(console.log("Image selected:",e),"string"==typeof e)a(e);else{let t=new FileReader;t.onload=e=>{e.target?.result&&a(e.target.result)},t.readAsDataURL(e)}},placeholder:"ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš” (ì—…ë¡œë“œí•˜ì§€ ì•ŠìŒ)"}),e&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"mb-2 text-sm text-gray-600",children:"ì„ íƒëœ ì´ë¯¸ì§€:"}),(0,t.jsx)("img",{src:e,alt:"Selected",className:"max-h-48 max-w-xs rounded border object-contain"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:"ì„œë²„ ì—…ë¡œë“œ"}),(0,t.jsx)(c,{onImageUpload:e=>{console.log("Image uploaded:",e),i(e)},uploadUrl:"/api/upload",placeholder:"ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì—¬ ì„œë²„ì— ì—…ë¡œë“œ"}),s&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"mb-2 text-sm text-gray-600",children:"ì—…ë¡œë“œëœ ì´ë¯¸ì§€ URL:"}),(0,t.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"break-all text-blue-600 hover:underline",children:s})]})]}),(0,t.jsxs)("div",{className:"rounded-lg bg-gray-50 p-4",children:[(0,t.jsx)("h3",{className:"mb-2 font-semibold",children:"í…ŒìŠ¤íŠ¸ ë°©ë²•:"}),(0,t.jsxs)("ol",{className:"list-inside list-decimal space-y-1 text-sm",children:[(0,t.jsx)("li",{children:"ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ: íŒŒì¼ ì„ íƒ UIê°€ í‘œì‹œë©ë‹ˆë‹¤"}),(0,t.jsx)("li",{children:"React Native WebViewì—ì„œ: ê°¤ëŸ¬ë¦¬/ì¹´ë©”ë¼ ë²„íŠ¼ì´ í‘œì‹œë©ë‹ˆë‹¤"}),(0,t.jsx)("li",{children:"Android/iOSì—ì„œ UserAgent ìžë™ ê°ì§€í•˜ì—¬ ì ì ˆí•œ UIë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤"}),(0,t.jsx)("li",{children:"ì´ë¯¸ì§€ ì„ íƒ/ì´¬ì˜ í›„ ìžë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤"})]})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-4",children:[(0,t.jsx)("h3",{className:"mb-2 font-semibold text-yellow-800",children:"ì°¸ê³ ì‚¬í•­:"}),(0,t.jsxs)("ul",{className:"list-inside list-disc space-y-1 text-sm text-yellow-700",children:[(0,t.jsx)("li",{children:"ì„œë²„ ì—…ë¡œë“œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ /api/upload ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ì´ í•„ìš”í•©ë‹ˆë‹¤"}),(0,t.jsx)("li",{children:"React Nativeì—ì„œ í…ŒìŠ¤íŠ¸í•  ë•ŒëŠ” ì¹´ë©”ë¼/ê°¤ëŸ¬ë¦¬ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤"}),(0,t.jsx)("li",{children:"Base64 ì´ë¯¸ì§€ëŠ” í¬ê¸°ê°€ í° íŒŒì¼ì˜ ê²½ìš° ì„±ëŠ¥ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤"})]})]})]})]})}e.s(["default",()=>d],429440)}]);