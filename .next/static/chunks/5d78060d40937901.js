(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,776639,e=>{"use strict";var s=e.i(843476),t=e.i(326999),a=e.i(995926),l=e.i(975157);let r=t.Root,n=t.Trigger,i=t.Portal;function c({className:e,...r}){return(0,s.jsxs)(t.Close,{className:(0,l.cn)("ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-none disabled:pointer-events-none","flex min-h-[44px] min-w-[44px] items-center justify-center sm:min-h-0 sm:min-w-0",e),...r,children:[(0,s.jsx)(a.XIcon,{className:"h-5 w-5 sm:h-4 sm:w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})}function d({className:e,...a}){return(0,s.jsx)(t.Overlay,{className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",e),...a})}function o({className:e,children:a,...r}){return(0,s.jsxs)(i,{children:[(0,s.jsx)(d,{}),(0,s.jsxs)(t.Content,{className:(0,l.cn)("bg-background fixed z-50 grid gap-4 p-6 shadow-lg duration-300","bottom-0 left-[50%] w-[95vw] max-w-lg translate-x-[-50%]","max-h-[90vh] rounded-t-2xl","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom","sm:top-[50%] sm:bottom-auto sm:w-full","sm:translate-y-[-50%] sm:rounded-lg sm:border","sm:data-[state=closed]:fade-out-0 sm:data-[state=open]:fade-in-0","sm:data-[state=closed]:zoom-out-95 sm:data-[state=open]:zoom-in-95","sm:data-[state=closed]:slide-out-to-left-1/2 sm:data-[state=closed]:slide-out-to-top-[48%]","sm:data-[state=open]:slide-in-from-left-1/2 sm:data-[state=open]:slide-in-from-top-[48%]",e),...r,children:[(0,s.jsx)("div",{className:"absolute top-3 left-1/2 h-1 w-12 -translate-x-1/2 rounded-full bg-gray-300 sm:hidden"}),(0,s.jsx)("div",{className:"max-h-[calc(90vh-4rem)] overflow-y-auto sm:max-h-none",children:a}),(0,s.jsx)(c,{})]})]})}function m({className:e,...t}){return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t})}function x({className:e,...t}){return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col gap-2 sm:flex-row sm:justify-end sm:gap-0 sm:space-x-2","bg-background sticky bottom-0 pt-4 sm:relative sm:pt-0",e),...t})}function u({className:e,...a}){return(0,s.jsx)(t.Title,{className:(0,l.cn)("text-lg leading-none font-semibold tracking-tight",e),...a})}function h({className:e,...a}){return(0,s.jsx)(t.Description,{className:(0,l.cn)("text-muted-foreground text-sm",e),...a})}e.s(["Dialog",()=>r,"DialogContent",()=>o,"DialogDescription",()=>h,"DialogFooter",()=>x,"DialogHeader",()=>m,"DialogTitle",()=>u,"DialogTrigger",()=>n])},515288,e=>{"use strict";var s=e.i(843476),t=e.i(975157);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground rounded-lg border shadow-sm","transition-all hover:shadow-md","p-2 sm:p-3","sm:rounded-xl sm:shadow",e),...a})}function l({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("flex flex-col space-y-2 p-2 sm:p-2",e),...a})}function r({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("text-lg leading-none font-semibold tracking-tight",e),...a})}function n({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...a})}function i({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("p-2 sm:p-2",e),...a})}function c({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,t.cn)("flex items-center p-4 pt-0 sm:p-6 sm:pt-0","flex-col gap-2 sm:flex-row sm:gap-0",e),...a})}e.s(["Card",()=>a,"CardContent",()=>i,"CardDescription",()=>n,"CardFooter",()=>c,"CardHeader",()=>l,"CardTitle",()=>r])},470152,e=>{"use strict";function s(e,[s,t]){return Math.min(t,Math.max(s,e))}e.s(["clamp",()=>s])},999682,e=>{"use strict";var s=e.i(271645);function t(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}e.s(["usePrevious",()=>t])},453705,e=>{"use strict";let s=(0,e.i(475254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["default",()=>s])},409797,e=>{"use strict";var s=e.i(453705);e.s(["ChevronDownIcon",()=>s.default])},522706,e=>{"use strict";var s=e.i(843476),t=e.i(975157);function a({title:e,description:a,children:l,className:r}){return(0,s.jsxs)("div",{className:(0,t.cn)("container mx-auto flex flex-col gap-4 px-4 py-4 sm:flex-row sm:items-center sm:justify-between",r),children:[(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("h1",{className:"text-foreground text-2xl font-bold",children:e}),a&&(0,s.jsx)("p",{className:"text-muted-foreground mt-1 text-sm",children:a})]}),l&&(0,s.jsx)("div",{className:"flex shrink-0 flex-col items-stretch gap-2 sm:flex-row sm:items-center sm:gap-0 sm:space-x-4",children:l})]})}e.s(["PageHeader",()=>a])},784774,e=>{"use strict";var s=e.i(843476),t=e.i(975157);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative -mx-4 w-full overflow-x-auto px-4 sm:mx-0 sm:px-0",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,t.cn)("w-full caption-bottom text-sm",e),...a})})}function l({className:e,...a}){return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,t.cn)("[&_tr]:border-b",e),...a})}function r({className:e,...a}){return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,t.cn)("[&_tr:last-child]:border-0",e),...a})}function n({className:e,...a}){return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,t.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...a})}function i({className:e,...a}){return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,t.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function c({className:e,...a}){return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,t.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}e.s(["Table",()=>a,"TableBody",()=>r,"TableCell",()=>c,"TableHead",()=>i,"TableHeader",()=>l,"TableRow",()=>n])},687130,e=>{"use strict";let s=(0,e.i(475254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>s],687130)},365452,e=>{"use strict";let s=(0,e.i(475254).default)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);e.s(["default",()=>s])},826707,e=>{"use strict";var s=e.i(365452);e.s(["Smartphone",()=>s.default])},546467,e=>{"use strict";let s=(0,e.i(475254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["default",()=>s])},778917,e=>{"use strict";var s=e.i(546467);e.s(["ExternalLink",()=>s.default])},935832,e=>{"use strict";let s=(0,e.i(475254).default)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);e.s(["default",()=>s])},427323,e=>{"use strict";var s=e.i(843476),t=e.i(578938),a=e.i(613846),l=e.i(271645),r=e.i(561659),n=e.i(93814),i=e.i(522706),c=e.i(687130),d=e.i(519455),o=e.i(515288),m=e.i(793479),x=e.i(967489);function u({filters:e,onFiltersChange:t,totalCount:a}){let l=()=>{};return(0,s.jsx)(o.Card,{className:"mb-6",children:(0,s.jsxs)(o.CardContent,{className:"pt-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[(0,s.jsx)("div",{className:"relative flex-1",children:(0,s.jsx)(m.Input,{type:"search",placeholder:"결제 ID, 주문 ID, 주문명, 예약번호로 검색...",value:e.searchQuery,onChange:e=>{t({searchQuery:e.target.value})},onKeyDown:e=>"Enter"===e.key&&l()})}),(0,s.jsxs)(x.Select,{value:e.statusFilter,onValueChange:e=>{t({statusFilter:e})},children:[(0,s.jsx)(x.SelectTrigger,{className:"h-10 w-full sm:w-[180px]",children:(0,s.jsx)(x.SelectValue,{placeholder:"상태 필터"})}),(0,s.jsxs)(x.SelectContent,{children:[(0,s.jsx)(x.SelectItem,{value:"ALL",children:"모든 상태"}),(0,s.jsx)(x.SelectItem,{value:"PENDING",children:"대기중"}),(0,s.jsx)(x.SelectItem,{value:"PAID",children:"결제완료"}),(0,s.jsx)(x.SelectItem,{value:"AUTHORIZED",children:"승인됨"}),(0,s.jsx)(x.SelectItem,{value:"CAPTURED",children:"확정됨"}),(0,s.jsx)(x.SelectItem,{value:"COMPLETED",children:"완료"}),(0,s.jsx)(x.SelectItem,{value:"FAILED",children:"실패"}),(0,s.jsx)(x.SelectItem,{value:"CANCELLED",children:"취소됨"}),(0,s.jsx)(x.SelectItem,{value:"PARTIAL_CANCELLED",children:"부분취소"}),(0,s.jsx)(x.SelectItem,{value:"REFUNDED",children:"환불완료"}),(0,s.jsx)(x.SelectItem,{value:"PARTIALLY_REFUNDED",children:"부분환불"}),(0,s.jsx)(x.SelectItem,{value:"EXPIRED",children:"만료"})]})]}),(0,s.jsxs)(d.Button,{onClick:l,variant:"outline",className:"h-10 w-full sm:w-auto",children:[(0,s.jsx)(c.Filter,{className:"mr-2 h-4 w-4"}),"필터 적용"]})]}),a>0&&(0,s.jsxs)("div",{className:"text-muted-foreground mt-4 text-sm",children:["총 ",a.toLocaleString(),"건의 결제 내역"]})]})})}var h=e.i(778917),f=e.i(784774);let j={PAID:{label:"결제완료",color:"text-green-700",bgColor:"bg-green-100",description:"결제가 정상적으로 완료되었습니다"},PENDING:{label:"대기중",color:"text-yellow-700",bgColor:"bg-yellow-100",description:"결제 처리 대기 중입니다"},FAILED:{label:"실패",color:"text-red-700",bgColor:"bg-red-100",description:"결제가 실패했습니다"},CANCELLED:{label:"취소됨",color:"text-gray-700",bgColor:"bg-gray-100",description:"결제가 취소되었습니다"},REFUNDED:{label:"환불완료",color:"text-purple-700",bgColor:"bg-purple-100",description:"전액 환불 처리되었습니다"},PARTIALLY_REFUNDED:{label:"부분환불",color:"text-orange-700",bgColor:"bg-orange-100",description:"부분 환불 처리되었습니다"},AUTHORIZED:{label:"승인됨",color:"text-blue-700",bgColor:"bg-blue-100",description:"결제 승인되었습니다"},CAPTURED:{label:"확정됨",color:"text-indigo-700",bgColor:"bg-indigo-100",description:"결제 확정되었습니다"},COMPLETED:{label:"완료",color:"text-emerald-700",bgColor:"bg-emerald-100",description:"결제가 완료되었습니다"},PARTIAL_CANCELLED:{label:"부분취소",color:"text-amber-700",bgColor:"bg-amber-100",description:"부분 취소되었습니다"},EXPIRED:{label:"만료",color:"text-slate-700",bgColor:"bg-slate-100",description:"결제 유효기간이 만료되었습니다"}};var p=e.i(975157);function g({status:e,className:t}){let a=j[e];return(0,s.jsx)("span",{className:(0,p.cn)("inline-flex items-center rounded-full px-2 py-1 text-xs font-medium",a.bgColor,a.color,t),title:a.description,children:a.label})}var N=e.i(826707),b=e.i(475254);let v=(0,b.default)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var y=e.i(935832),y=y;let C=(0,b.default)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);function w({method:e,className:t="h-5 w-5"}){let a={CARD:(0,s.jsx)(r.CreditCard,{className:t}),PHONE:(0,s.jsx)(N.Smartphone,{className:t}),VIRTUAL_ACCOUNT:(0,s.jsx)(v,{className:t}),GIFT_CERTIFICATE:(0,s.jsx)(y.default,{className:t}),EASY_PAY:(0,s.jsx)(C,{className:t}),TRANSFER:(0,s.jsx)(v,{className:t})};return(0,s.jsx)(s.Fragment,{children:a[e]||(0,s.jsx)(r.CreditCard,{className:t})})}var A=e.i(401851),k=e.i(116550);function T(e,s="KRW"){return new Intl.NumberFormat("ko-KR",{style:"currency",currency:s}).format(e)}function D(e){return e?(0,A.format)(new Date(e),"yyyy-MM-dd HH:mm",{locale:k.ko}):"-"}function I({payments:e,isLoading:t,onViewDetails:a,currentPage:l,totalPages:r,onPageChange:n}){return t?(0,s.jsx)(o.Card,{children:(0,s.jsx)(o.CardContent,{className:"py-12",children:(0,s.jsx)("div",{className:"text-muted-foreground flex items-center justify-center text-sm",children:"결제 내역을 불러오는 중..."})})}):(0,s.jsx)(o.Card,{children:(0,s.jsxs)(o.CardContent,{className:"p-0",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(f.Table,{children:[(0,s.jsx)(f.TableHeader,{children:(0,s.jsxs)(f.TableRow,{children:[(0,s.jsx)(f.TableHead,{children:"결제 정보"}),(0,s.jsx)(f.TableHead,{children:"고객"}),(0,s.jsx)(f.TableHead,{children:"금액"}),(0,s.jsx)(f.TableHead,{children:"상태"}),(0,s.jsx)(f.TableHead,{children:"결제일시"}),(0,s.jsx)(f.TableHead,{className:"text-right",children:"작업"})]})}),(0,s.jsx)(f.TableBody,{children:0===e.length?(0,s.jsx)(f.TableRow,{children:(0,s.jsx)(f.TableCell,{colSpan:6,className:"text-muted-foreground py-8 text-center",children:"결제 내역이 없습니다"})}):e.map(e=>(0,s.jsxs)(f.TableRow,{className:"hover:bg-muted/50 cursor-pointer",onClick:()=>a?.(e),children:[(0,s.jsx)(f.TableCell,{children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"bg-primary/10 flex h-10 w-10 items-center justify-center rounded-full",children:(0,s.jsx)(w,{method:e.method})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.orderName||"주문명 없음"}),(0,s.jsxs)("div",{className:"text-muted-foreground space-y-0.5 text-xs",children:[e.booking?.bookingNumber&&(0,s.jsxs)("div",{children:["예약번호: ",e.booking.bookingNumber]}),(0,s.jsxs)("div",{children:["결제 ID: ",e.paymentId]}),e.orderId&&(0,s.jsxs)("div",{children:["주문 ID: ",e.orderId]})]})]})]})}),(0,s.jsx)(f.TableCell,{children:e.customer?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e.customer.name||"이름 없음"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:e.customer.email})]}):e.booking?.customer?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e.booking.customer.name||"이름 없음"}),(0,s.jsx)("p",{className:"text-muted-foreground text-xs",children:e.booking.customer.email})]}):(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}),(0,s.jsx)(f.TableCell,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:T(e.amount,e.currency)}),e.cancelledAmount&&e.cancelledAmount>0&&(0,s.jsxs)("p",{className:"text-xs text-orange-600",children:["환불: ",T(e.cancelledAmount,e.currency)]})]})}),(0,s.jsx)(f.TableCell,{children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(g,{status:e.status}),"FAILED"===e.status&&e.failReason&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-600",children:e.failReason}),("CANCELLED"===e.status||"PARTIAL_CANCELLED"===e.status)&&e.cancelReason&&(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-600",children:e.cancelReason})]})}),(0,s.jsx)(f.TableCell,{children:(0,s.jsxs)("div",{className:"space-y-0.5 text-sm",children:[(0,s.jsx)("div",{children:e.paidAt?D(e.paidAt):e.failedAt?D(e.failedAt):D(e.createdAt)}),e.cancelledAt&&(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["취소: ",D(e.cancelledAt)]}),e.refundedAt&&(0,s.jsxs)("div",{className:"text-xs text-purple-600",children:["환불: ",D(e.refundedAt)]})]})}),(0,s.jsx)(f.TableCell,{className:"text-right",children:e.receiptUrl&&(0,s.jsxs)(d.Button,{size:"sm",variant:"outline",onClick:s=>{s.stopPropagation(),window.open(e.receiptUrl,"_blank")},children:[(0,s.jsx)(h.ExternalLink,{className:"mr-1 h-3 w-3"}),"영수증"]})})]},e.id))})]})}),r>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between border-t px-6 py-4",children:[(0,s.jsxs)("div",{className:"text-muted-foreground text-sm",children:["페이지 ",l," / ",r]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>n(Math.max(1,l-1)),disabled:1===l,children:"이전"}),(0,s.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>n(Math.min(r,l+1)),disabled:l===r,children:"다음"})]})]})]})})}var E=e.i(776639);function R({payment:e,open:t,onOpenChange:a}){var l;return e?(0,s.jsx)(E.Dialog,{open:t,onOpenChange:a,children:(0,s.jsxs)(E.DialogContent,{className:"max-h-[80vh] max-w-2xl overflow-y-auto",children:[(0,s.jsx)(E.DialogHeader,{children:(0,s.jsxs)(E.DialogTitle,{className:"flex items-center gap-2",children:["결제 상세 정보",(0,s.jsx)(g,{status:e.status})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-3 text-sm font-semibold",children:"결제 정보"}),(0,s.jsxs)("div",{className:"bg-muted/50 space-y-2 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"결제 수단"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w,{method:e.method,className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:{CARD:"신용/체크카드",VIRTUAL_ACCOUNT:"가상계좌",TRANSFER:"계좌이체",PHONE:"휴대폰",GIFT_CERTIFICATE:"상품권",EASY_PAY:"간편결제"}[l=e.method]||l})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"결제 금액"}),(0,s.jsx)("span",{className:"text-base font-semibold",children:T(e.amount,e.currency)})]}),e.cancelledAmount&&e.cancelledAmount>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"환불 금액"}),(0,s.jsx)("span",{className:"text-sm font-medium text-orange-600",children:T(e.cancelledAmount,e.currency)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"주문명"}),(0,s.jsx)("span",{className:"text-sm",children:e.orderName||"-"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-3 text-sm font-semibold",children:"거래 식별자"}),(0,s.jsxs)("div",{className:"bg-muted/50 space-y-2 rounded-lg p-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"결제 ID"}),(0,s.jsx)("code",{className:"text-xs",children:e.paymentId})]}),e.orderId&&(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"주문 ID"}),(0,s.jsx)("code",{className:"text-xs",children:e.orderId})]}),e.pgTxId&&(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"PG 거래 ID"}),(0,s.jsx)("code",{className:"text-xs",children:e.pgTxId})]})]})]}),e.customer&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-3 text-sm font-semibold",children:"고객 정보"}),(0,s.jsxs)("div",{className:"bg-muted/50 space-y-2 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"이름"}),(0,s.jsx)("span",{className:"text-sm",children:e.customer.name||"-"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"이메일"}),(0,s.jsx)("span",{className:"text-sm",children:e.customer.email})]})]})]}),e.booking&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-3 text-sm font-semibold",children:"예약 정보"}),(0,s.jsxs)("div",{className:"bg-muted/50 space-y-2 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"예약 번호"}),(0,s.jsx)("span",{className:"font-mono text-sm",children:e.booking.bookingNumber})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"서비스 일시"}),(0,s.jsxs)("span",{className:"text-sm",children:[D(e.booking.serviceDate)," ",e.booking.serviceTime]})]}),e.booking.groomer&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"담당 미용사"}),(0,s.jsx)("span",{className:"text-sm",children:e.booking.groomer.name||"-"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-3 text-sm font-semibold",children:"거래 내역"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"bg-primary/10 text-primary mt-0.5 flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full p-1 text-xs font-medium",children:"1"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"결제 생성"}),(0,s.jsx)("div",{className:"text-muted-foreground text-xs",children:D(e.createdAt)})]})]}),e.paidAt&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"mt-0.5 flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-green-100 p-1 text-xs font-medium text-green-700",children:"✓"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"결제 완료"}),(0,s.jsx)("div",{className:"text-muted-foreground text-xs",children:D(e.paidAt)})]})]}),e.failedAt&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"mt-0.5 flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-red-100 p-1 text-xs font-medium text-red-700",children:"✕"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"결제 실패"}),(0,s.jsx)("div",{className:"text-muted-foreground text-xs",children:D(e.failedAt)}),e.failReason&&(0,s.jsx)("div",{className:"mt-1 text-xs text-red-600",children:e.failReason})]})]}),e.cancelledAt&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"mt-0.5 flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-gray-100 p-1 text-xs font-medium text-gray-700",children:"−"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"결제 취소"}),(0,s.jsx)("div",{className:"text-muted-foreground text-xs",children:D(e.cancelledAt)}),e.cancelReason&&(0,s.jsx)("div",{className:"mt-1 text-xs text-gray-600",children:e.cancelReason})]})]}),e.refundedAt&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"mt-0.5 flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-purple-100 p-1 text-xs font-medium text-purple-700",children:"↺"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"환불 처리"}),(0,s.jsx)("div",{className:"text-muted-foreground text-xs",children:D(e.refundedAt)})]})]})]})]}),e.receiptUrl&&(0,s.jsx)("div",{children:(0,s.jsx)("a",{href:e.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary text-sm hover:underline",children:"영수증 보기 →"})})]})]})}):null}var P=e.i(454271);function L(){let{data:e,isPending:c}=(0,t.useSession)(),d=(0,a.useRouter)(),[o,m]=(0,l.useState)({searchQuery:"",statusFilter:"ALL"}),[x,h]=(0,l.useState)(1),[f,j]=(0,l.useState)(null),[p,g]=(0,l.useState)(!1),{payments:N,pagination:b,isLoading:v,isFetching:y,isError:C,error:w}=function({filters:e,page:s,limit:t=20,enabled:a=!0}){let{data:l,isLoading:r,isFetching:n,isError:i,error:c,refetch:d}=(0,P.useGetPaymentsQuery)({page:s,limit:t,searchQuery:e.searchQuery,statusFilter:e.statusFilter},{skip:!a});return{payments:l?.payments??[],pagination:{currentPage:l?.currentPage??s,totalPages:l?.totalPages??1,totalCount:l?.totalCount??0},isLoading:r,isFetching:n,isError:i,error:c,refetch:d,isEmpty:!r&&(l?.payments?.length??0)===0,hasNextPage:(l?.currentPage??1)<(l?.totalPages??1),hasPreviousPage:(l?.currentPage??1)>1}}({filters:o,page:x,limit:20,enabled:!!e?.user&&"ADMIN"===e.user.role});(0,l.useEffect)(()=>{c||e||d.push("/auth/signin"),!c&&e?.user?.role&&"ADMIN"!==e.user.role&&d.push("/admin/dashboard/overview")},[e,c,d]);let A=(0,l.useCallback)(e=>{j(e),g(!0)},[]),k=(0,l.useCallback)(e=>{m(s=>({...s,...e})),h(1)},[]),T=(0,l.useCallback)(e=>{h(e)},[]);return c?(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,s.jsx)(n.LoadingSpinner,{size:"lg"})}):e&&e.user?.role==="ADMIN"?C?(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"mb-4 text-red-600",children:"데이터를 불러오는데 실패했습니다"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:w?.message||"잠시 후 다시 시도해주세요"})]})}):(0,s.jsxs)("div",{className:"bg-background min-h-screen",children:[(0,s.jsx)("header",{className:"border-border border-b",children:(0,s.jsx)(i.PageHeader,{title:"결제 이력",description:"플랫폼의 모든 결제 내역을 조회하고 관리하세요",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(r.CreditCard,{className:"text-primary h-5 w-5"})})})}),(0,s.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(u,{filters:o,onFiltersChange:k,totalCount:b.totalCount}),(0,s.jsx)(I,{payments:N,isLoading:v||y,onViewDetails:A,currentPage:b.currentPage,totalPages:b.totalPages,onPageChange:T}),f&&(0,s.jsx)(R,{payment:f,open:p,onOpenChange:g})]})})]}):null}e.s(["default",()=>L],427323)}]);