(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,869230,e=>{"use strict";var t=e.i(175555),s=e.i(540143),r=e.i(286491),l=e.i(915823),a=e.i(793803),i=e.i(619273),n=e.i(180166),o=class extends l.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#s=(0,a.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#r=void 0;#l=void 0;#a=void 0;#i;#n;#s;#t;#o;#c;#u;#d;#h;#m;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#r.addObserver(this),c(this.#r,this.options)?this.#f():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return u(this.#r,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return u(this.#r,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#g(),this.#r.removeObserver(this)}setOptions(e){let t=this.options,s=this.#r;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,i.resolveEnabled)(this.options.enabled,this.#r))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#v(),this.#r.setOptions(this.options),t._defaulted&&!(0,i.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#r,observer:this});let r=this.hasListeners();r&&d(this.#r,s,this.options,t)&&this.#f(),this.updateResult(),r&&(this.#r!==s||(0,i.resolveEnabled)(this.options.enabled,this.#r)!==(0,i.resolveEnabled)(t.enabled,this.#r)||(0,i.resolveStaleTime)(this.options.staleTime,this.#r)!==(0,i.resolveStaleTime)(t.staleTime,this.#r))&&this.#y();let l=this.#j();r&&(this.#r!==s||(0,i.resolveEnabled)(this.options.enabled,this.#r)!==(0,i.resolveEnabled)(t.enabled,this.#r)||l!==this.#m)&&this.#R(l)}getOptimisticResult(e){var t,s;let r=this.#e.getQueryCache().build(this.#e,e),l=this.createResult(r,e);return t=this,s=l,(0,i.shallowEqualObjects)(t.getCurrentResult(),s)||(this.#a=l,this.#n=this.options,this.#i=this.#r.state),l}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),t?.(s),"promise"===s&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#s.status||this.#s.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,s))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#r}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#f(e){this.#v();let t=this.#r.fetch(this.options,e);return e?.throwOnError||(t=t.catch(i.noop)),t}#y(){this.#x();let e=(0,i.resolveStaleTime)(this.options.staleTime,this.#r);if(i.isServer||this.#a.isStale||!(0,i.isValidTimeout)(e))return;let t=(0,i.timeUntilStale)(this.#a.dataUpdatedAt,e);this.#d=n.timeoutManager.setTimeout(()=>{this.#a.isStale||this.updateResult()},t+1)}#j(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#r):this.options.refetchInterval)??!1}#R(e){this.#g(),this.#m=e,!i.isServer&&!1!==(0,i.resolveEnabled)(this.options.enabled,this.#r)&&(0,i.isValidTimeout)(this.#m)&&0!==this.#m&&(this.#h=n.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||t.focusManager.isFocused())&&this.#f()},this.#m))}#b(){this.#y(),this.#R(this.#j())}#x(){this.#d&&(n.timeoutManager.clearTimeout(this.#d),this.#d=void 0)}#g(){this.#h&&(n.timeoutManager.clearInterval(this.#h),this.#h=void 0)}createResult(e,t){let s,l=this.#r,n=this.options,o=this.#a,u=this.#i,m=this.#n,p=e!==l?e.state:this.#l,{state:f}=e,b={...f},x=!1;if(t._optimisticResults){let s=this.hasListeners(),a=!s&&c(e,t),i=s&&d(e,l,t,n);(a||i)&&(b={...b,...(0,r.fetchState)(f.data,e.options)}),"isRestoring"===t._optimisticResults&&(b.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:y}=b;s=b.data;let j=!1;if(void 0!==t.placeholderData&&void 0===s&&"pending"===y){let e;o?.isPlaceholderData&&t.placeholderData===m?.placeholderData?(e=o.data,j=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#u?.state.data,this.#u):t.placeholderData,void 0!==e&&(y="success",s=(0,i.replaceData)(o?.data,e,t),x=!0)}if(t.select&&void 0!==s&&!j)if(o&&s===u?.data&&t.select===this.#o)s=this.#c;else try{this.#o=t.select,s=t.select(s),s=(0,i.replaceData)(o?.data,s,t),this.#c=s,this.#t=null}catch(e){this.#t=e}this.#t&&(g=this.#t,s=this.#c,v=Date.now(),y="error");let R="fetching"===b.fetchStatus,w="pending"===y,T="error"===y,C=w&&R,N=void 0!==s,S={status:y,fetchStatus:b.fetchStatus,isPending:w,isSuccess:"success"===y,isError:T,isInitialLoading:C,isLoading:C,data:s,dataUpdatedAt:b.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>p.dataUpdateCount||b.errorUpdateCount>p.errorUpdateCount,isFetching:R,isRefetching:R&&!w,isLoadingError:T&&!N,isPaused:"paused"===b.fetchStatus,isPlaceholderData:x,isRefetchError:T&&N,isStale:h(e,t),refetch:this.refetch,promise:this.#s,isEnabled:!1!==(0,i.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===S.status?e.reject(S.error):void 0!==S.data&&e.resolve(S.data)},s=()=>{t(this.#s=S.promise=(0,a.pendingThenable)())},r=this.#s;switch(r.status){case"pending":e.queryHash===l.queryHash&&t(r);break;case"fulfilled":("error"===S.status||S.data!==r.value)&&s();break;case"rejected":("error"!==S.status||S.error!==r.reason)&&s()}}return S}updateResult(){let e=this.#a,t=this.createResult(this.#r,this.options);if(this.#i=this.#r.state,this.#n=this.options,void 0!==this.#i.data&&(this.#u=this.#r),(0,i.shallowEqualObjects)(t,e))return;this.#a=t;let s=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!this.#p.size)return!0;let r=new Set(s??this.#p);return this.options.throwOnError&&r.add("error"),Object.keys(this.#a).some(t=>this.#a[t]!==e[t]&&r.has(t))};this.#w({listeners:s()})}#v(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#r)return;let t=this.#r;this.#r=e,this.#l=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#w(e){s.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#a)}),this.#e.getQueryCache().notify({query:this.#r,type:"observerResultsUpdated"})})}};function c(e,t){return!1!==(0,i.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&u(e,t,t.refetchOnMount)}function u(e,t,s){if(!1!==(0,i.resolveEnabled)(t.enabled,e)&&"static"!==(0,i.resolveStaleTime)(t.staleTime,e)){let r="function"==typeof s?s(e):s;return"always"===r||!1!==r&&h(e,t)}return!1}function d(e,t,s,r){return(e!==t||!1===(0,i.resolveEnabled)(r.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&h(e,s)}function h(e,t){return!1!==(0,i.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,i.resolveStaleTime)(t.staleTime,e))}e.s(["QueryObserver",()=>o])},381384,e=>{"use strict";var t=e.i(271645),s=t.createContext(!1),r=()=>t.useContext(s);s.Provider,e.s(["useIsRestoring",()=>r])},673664,427001,e=>{"use strict";let t;var s=e.i(271645);e.i(843476);var r=s.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),l=()=>s.useContext(r);e.s(["useQueryErrorResetBoundary",()=>l],673664);var a=e.i(619273),i=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&!t.isReset()&&(e.retryOnMount=!1)},n=e=>{s.useEffect(()=>{e.clearReset()},[e])},o=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:l})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(l&&void 0===e.data||(0,a.shouldThrowError)(s,[e.error,r]));e.s(["ensurePreventErrorBoundaryRetry",()=>i,"getHasError",()=>o,"useClearResetErrorBoundary",()=>n],427001)},254440,e=>{"use strict";var t=e=>{if(e.suspense){let t=e=>"static"===e?e:Math.max(e??1e3,1e3),s=e.staleTime;e.staleTime="function"==typeof s?(...e)=>t(s(...e)):t(s),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}},s=(e,t)=>e.isLoading&&e.isFetching&&!t,r=(e,t)=>e?.suspense&&t.isPending,l=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});e.s(["ensureSuspenseTimers",()=>t,"fetchOptimistic",()=>l,"shouldSuspend",()=>r,"willFetch",()=>s])},470152,e=>{"use strict";function t(e,[t,s]){return Math.min(s,Math.max(t,e))}e.s(["clamp",()=>t])},999682,e=>{"use strict";var t=e.i(271645);function s(e){let s=t.useRef({value:e,previous:e});return t.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}e.s(["usePrevious",()=>s])},453705,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["default",()=>t])},409797,e=>{"use strict";var t=e.i(453705);e.s(["ChevronDownIcon",()=>t.default])},522706,e=>{"use strict";var t=e.i(843476),s=e.i(975157);function r({title:e,description:r,children:l,className:a}){return(0,t.jsxs)("div",{className:(0,s.cn)("container mx-auto flex flex-col gap-4 px-4 py-4 sm:flex-row sm:items-center sm:justify-between",a),children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h1",{className:"text-foreground text-2xl font-bold",children:e}),r&&(0,t.jsx)("p",{className:"text-muted-foreground mt-1 text-sm",children:r})]}),l&&(0,t.jsx)("div",{className:"flex shrink-0 flex-col items-stretch gap-2 sm:flex-row sm:items-center sm:gap-0 sm:space-x-4",children:l})]})}e.s(["PageHeader",()=>r])},863620,e=>{"use strict";let t=(0,e.i(475254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["default",()=>t])},515288,e=>{"use strict";var t=e.i(843476),s=e.i(975157);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground rounded-lg border shadow-sm","transition-all hover:shadow-md","p-2 sm:p-3","sm:rounded-xl sm:shadow",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("flex flex-col space-y-2 p-2 sm:p-2",e),...r})}function a({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("text-lg leading-none font-semibold tracking-tight",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("p-2 sm:p-2",e),...r})}function o({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center p-4 pt-0 sm:p-6 sm:pt-0","flex-col gap-2 sm:flex-row sm:gap-0",e),...r})}e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>i,"CardFooter",()=>o,"CardHeader",()=>l,"CardTitle",()=>a])},406321,e=>{"use strict";let t=(0,e.i(475254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>t])},269638,e=>{"use strict";var t=e.i(406321);e.s(["CheckCircle",()=>t.default])},263488,e=>{"use strict";let t=(0,e.i(475254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],263488)},343432,e=>{"use strict";var t=e.i(863620);e.s(["Phone",()=>t.default])},784774,e=>{"use strict";var t=e.i(843476),s=e.i(975157);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative -mx-4 w-full overflow-x-auto px-4 sm:mx-0 sm:px-0",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",e),...r})})}function l({className:e,...r}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("[&_tr]:border-b",e),...r})}function a({className:e,...r}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",e),...r})}function i({className:e,...r}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function n({className:e,...r}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function o({className:e,...r}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}e.s(["Table",()=>r,"TableBody",()=>a,"TableCell",()=>o,"TableHead",()=>n,"TableHeader",()=>l,"TableRow",()=>i])},687130,e=>{"use strict";let t=(0,e.i(475254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],687130)},925444,973380,e=>{"use strict";var t=e.i(843476);function s({title:e,value:s,icon:r,iconBgColor:l,subtitle:a}){return(0,t.jsx)("div",{className:"border-border bg-card rounded-lg border p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("p",{className:"text-muted-foreground truncate text-sm",children:e}),(0,t.jsx)("p",{className:"text-foreground text-2xl font-bold whitespace-nowrap",children:"number"==typeof s?s.toLocaleString("ko-KR"):s}),a&&(0,t.jsx)("p",{className:"text-muted-foreground mt-1 truncate text-xs",children:a})]}),(0,t.jsx)("div",{className:`flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full ${l}`,children:r})]})})}function r({children:e,compact:s=!1}){return(0,t.jsx)("div",{className:s?"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4":"mb-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:e})}e.s(["StatsCard",()=>s],925444),e.s(["StatsGrid",()=>r],973380)},25652,e=>{"use strict";let t=(0,e.i(475254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},798031,e=>{"use strict";let t=(0,e.i(475254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["default",()=>t])},373884,e=>{"use strict";var t=e.i(798031);e.s(["XCircle",()=>t.default])},882293,e=>{"use strict";let t=(0,e.i(475254).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["UserCheck",()=>t],882293)},451642,e=>{"use strict";var t=e.i(843476),s=e.i(271645),r=e.i(761911),l=e.i(87316),a=e.i(212426),i=e.i(870273),n=e.i(882293),o=e.i(632811),c=e.i(503116),u=e.i(269638),d=e.i(373884),h=e.i(25652),m=e.i(925444),p=e.i(973380);function f({variant:e="overview"}){let[f,b]=(0,s.useState)(null),[x,g]=(0,s.useState)(!0);if((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/stats");if(e.ok){let t=await e.json();b(t)}}catch(e){console.error("Failed to fetch admin stats:",e)}finally{g(!1)}})()},[]),x)return(0,t.jsx)(p.StatsGrid,{children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"border-border bg-card animate-pulse rounded-lg border p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"bg-muted h-4 w-20 rounded"}),(0,t.jsx)("div",{className:"bg-muted h-8 w-16 rounded"})]}),(0,t.jsx)("div",{className:"bg-muted h-12 w-12 rounded-full"})]})},s))});if(!f)return null;let v=(()=>{switch(e){case"users":return[{title:"총 사용자",value:f.totalUsers,icon:(0,t.jsx)(r.Users,{className:"h-6 w-6 text-blue-600"}),color:"bg-blue-100"},{title:"고객",value:f.totalCustomers,icon:(0,t.jsx)(n.UserCheck,{className:"h-6 w-6 text-green-600"}),color:"bg-green-100"},{title:"미용사",value:f.totalGroomers,icon:(0,t.jsx)(o.UserCog,{className:"h-6 w-6 text-purple-600"}),color:"bg-purple-100"},{title:"관리자",value:f.totalAdmins,icon:(0,t.jsx)(r.Users,{className:"h-6 w-6 text-red-600"}),color:"bg-red-100"}];case"bookings":return[{title:"총 예약",value:f.totalBookings,icon:(0,t.jsx)(l.Calendar,{className:"h-6 w-6 text-blue-600"}),color:"bg-blue-100"},{title:"대기중",value:f.pendingBookings,icon:(0,t.jsx)(c.Clock,{className:"h-6 w-6 text-yellow-600"}),color:"bg-yellow-100"},{title:"완료",value:f.completedBookings,icon:(0,t.jsx)(u.CheckCircle,{className:"h-6 w-6 text-green-600"}),color:"bg-green-100"},{title:"취소",value:f.cancelledBookings,icon:(0,t.jsx)(d.XCircle,{className:"h-6 w-6 text-red-600"}),color:"bg-red-100"}];case"groomers":return[{title:"등록 미용사",value:f.totalGroomers,icon:(0,t.jsx)(o.UserCog,{className:"h-6 w-6 text-purple-600"}),color:"bg-purple-100"},{title:"완료 예약",value:f.completedBookings,icon:(0,t.jsx)(u.CheckCircle,{className:"h-6 w-6 text-green-600"}),color:"bg-green-100"},{title:"평균 별점",value:f.averageRating.toFixed(1),icon:(0,t.jsx)(i.Star,{className:"h-6 w-6 text-yellow-600"}),color:"bg-yellow-100"},{title:"총 리뷰",value:f.totalReviews,icon:(0,t.jsx)(i.Star,{className:"h-6 w-6 text-orange-600"}),color:"bg-orange-100"}];case"reviews":return[{title:"총 리뷰",value:f.totalReviews,icon:(0,t.jsx)(i.Star,{className:"h-6 w-6 text-yellow-600"}),color:"bg-yellow-100"},{title:"평균 별점",value:f.averageRating.toFixed(1),icon:(0,t.jsx)(i.Star,{className:"h-6 w-6 text-orange-600"}),color:"bg-orange-100"},{title:"완료 예약",value:f.completedBookings,icon:(0,t.jsx)(u.CheckCircle,{className:"h-6 w-6 text-green-600"}),color:"bg-green-100"},{title:"총 고객",value:f.totalCustomers,icon:(0,t.jsx)(r.Users,{className:"h-6 w-6 text-blue-600"}),color:"bg-blue-100"}];case"settlements":return[{title:"월 매출",value:`${f.monthlyRevenue.toLocaleString("ko-KR")}원`,icon:(0,t.jsx)(a.DollarSign,{className:"h-6 w-6 text-green-600"}),color:"bg-green-100"},{title:"총 매출",value:`${f.totalRevenue.toLocaleString("ko-KR")}원`,icon:(0,t.jsx)(h.TrendingUp,{className:"h-6 w-6 text-blue-600"}),color:"bg-blue-100"},{title:"등록 미용사",value:f.totalGroomers,icon:(0,t.jsx)(o.UserCog,{className:"h-6 w-6 text-purple-600"}),color:"bg-purple-100"},{title:"완료 예약",value:f.completedBookings,icon:(0,t.jsx)(u.CheckCircle,{className:"h-6 w-6 text-green-600"}),color:"bg-green-100"}];default:return[{title:"총 사용자",value:f.totalUsers,icon:(0,t.jsx)(r.Users,{className:"h-6 w-6 text-blue-600"}),color:"bg-blue-100"},{title:"총 예약",value:f.totalBookings,icon:(0,t.jsx)(l.Calendar,{className:"h-6 w-6 text-green-600"}),color:"bg-green-100"},{title:"월 매출",value:`${f.monthlyRevenue.toLocaleString("ko-KR")}원`,icon:(0,t.jsx)(a.DollarSign,{className:"text-primary h-6 w-6"}),color:"bg-primary/10"},{title:"등록 미용사",value:f.totalGroomers,icon:(0,t.jsx)(o.UserCog,{className:"h-6 w-6 text-purple-600"}),color:"bg-purple-100"}]}})();return(0,t.jsx)(p.StatsGrid,{children:v.map((e,s)=>(0,t.jsx)(m.StatsCard,{title:e.title,value:e.value,icon:e.icon,iconBgColor:e.color},s))})}e.s(["AdminStatsCards",()=>f])},485422,e=>{e.v({actionButtons:"AdminUserTable-module__yp4PzG__actionButtons",cellAvatar:"AdminUserTable-module__yp4PzG__cellAvatar",cellContent:"AdminUserTable-module__yp4PzG__cellContent",cellIcon:"AdminUserTable-module__yp4PzG__cellIcon",cellText:"AdminUserTable-module__yp4PzG__cellText",cellTextLong:"AdminUserTable-module__yp4PzG__cellTextLong",colActions:"AdminUserTable-module__yp4PzG__colActions",colCreated:"AdminUserTable-module__yp4PzG__colCreated",colEmail:"AdminUserTable-module__yp4PzG__colEmail",colLastLogin:"AdminUserTable-module__yp4PzG__colLastLogin",colName:"AdminUserTable-module__yp4PzG__colName",colPhone:"AdminUserTable-module__yp4PzG__colPhone",colRole:"AdminUserTable-module__yp4PzG__colRole",colStatus:"AdminUserTable-module__yp4PzG__colStatus",emptyState:"AdminUserTable-module__yp4PzG__emptyState",excelTable:"AdminUserTable-module__yp4PzG__excelTable",loadingTrigger:"AdminUserTable-module__yp4PzG__loadingTrigger",roleBadge:"AdminUserTable-module__yp4PzG__roleBadge",scrollContainer:"AdminUserTable-module__yp4PzG__scrollContainer",statusBadge:"AdminUserTable-module__yp4PzG__statusBadge"})},170551,e=>{"use strict";var t=e.i(843476),s=e.i(578938),r=e.i(613846),l=e.i(271645),a=e.i(761911),i=e.i(93814),n=e.i(522706),o=e.i(451642),c=e.i(116550),u=e.i(401851),d=e.i(284614),h=e.i(343432),m=e.i(263488),p=e.i(687130),f=e.i(519455),b=e.i(515288),x=e.i(793479),g=e.i(967489),v=e.i(784774);e.i(247167);var y=e.i(540143),j=e.i(869230),R=e.i(915823),w=e.i(619273);function T(e,t){let s=new Set(t);return e.filter(e=>!s.has(e))}var C=class extends R.Subscribable{#e;#T;#C;#N;#S;#_;#E;#k;#Q=[];constructor(e,t,s){super(),this.#e=e,this.#N=s,this.#C=[],this.#S=[],this.#T=[],this.setQueries(t)}onSubscribe(){1===this.listeners.size&&this.#S.forEach(e=>{e.subscribe(t=>{this.#I(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#S.forEach(e=>{e.destroy()})}setQueries(e,t){this.#C=e,this.#N=t,y.notifyManager.batch(()=>{let e=this.#S,t=this.#O(this.#C);this.#Q=t,t.forEach(e=>e.observer.setOptions(e.defaultedQueryOptions));let s=t.map(e=>e.observer),r=s.map(e=>e.getCurrentResult()),l=e.length!==s.length,a=s.some((t,s)=>t!==e[s]),i=l||a,n=!!i||r.some((e,t)=>{let s=this.#T[t];return!s||!(0,w.shallowEqualObjects)(e,s)});(i||n)&&(i&&(this.#S=s),this.#T=r,this.hasListeners()&&(i&&(T(e,s).forEach(e=>{e.destroy()}),T(s,e).forEach(e=>{e.subscribe(t=>{this.#I(e,t)})})),this.#w()))})}getCurrentResult(){return this.#T}getQueries(){return this.#S.map(e=>e.getCurrentQuery())}getObservers(){return this.#S}getOptimisticResult(e,t){let s=this.#O(e),r=s.map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions));return[r,e=>this.#U(e??r,t),()=>this.#A(r,s)]}#A(e,t){return t.map((s,r)=>{let l=e[r];return s.defaultedQueryOptions.notifyOnChangeProps?l:s.observer.trackResult(l,e=>{t.forEach(t=>{t.observer.trackProp(e)})})})}#U(e,t){return t?(this.#_&&this.#T===this.#k&&t===this.#E||(this.#E=t,this.#k=this.#T,this.#_=(0,w.replaceEqualDeep)(this.#_,t(e))),this.#_):e}#O(e){let t=new Map(this.#S.map(e=>[e.options.queryHash,e])),s=[];return e.forEach(e=>{let r=this.#e.defaultQueryOptions(e),l=t.get(r.queryHash);l?s.push({defaultedQueryOptions:r,observer:l}):s.push({defaultedQueryOptions:r,observer:new j.QueryObserver(this.#e,r)})}),s}#I(e,t){let s=this.#S.indexOf(e);if(-1!==s){var r;let e;this.#T=(r=this.#T,(e=r.slice(0))[s]=t,e),this.#w()}}#w(){if(this.hasListeners()){let e=this.#_,t=this.#A(this.#T,this.#Q);e!==this.#U(t,this.#N?.combine)&&y.notifyManager.batch(()=>{this.listeners.forEach(e=>{e(this.#T)})})}}},N=e.i(912598),S=e.i(381384),_=e.i(673664),E=e.i(427001),k=e.i(254440),Q=e.i(485422);function I(){let{data:e}=(0,s.useSession)(),r=(0,N.useQueryClient)(),[a,i]=(0,l.useState)(""),[n,o]=(0,l.useState)("ALL"),[R,T]=(0,l.useState)("ALL"),[I,O]=(0,l.useState)(""),[U,A]=(0,l.useState)("ALL"),[M,P]=(0,l.useState)("ALL"),[L,F]=(0,l.useState)([1]),z=(0,l.useRef)(null),D=(0,l.useRef)(null),G=(0,l.useRef)(null),q=(0,l.useRef)(1),B=(0,l.useCallback)(()=>{O(a),A(n),P(R),F([1])},[a,n,R]),H=(0,l.useCallback)(async e=>{let t=new URLSearchParams({page:e.toString(),limit:"50",search:I,role:U,status:M}),s=await fetch(`/api/admin/users?${t}`,{headers:{"Content-Type":"application/json"}});if(!s.ok){if(401===s.status)throw Error("Unauthorized: Admin access required");if(403===s.status)throw Error("Forbidden: Insufficient permissions");throw Error(`Failed to fetch users: ${s.statusText}`)}return s.json()},[I,U,M,50]),K=function({queries:e,...t},s){let r=(0,N.useQueryClient)(void 0),a=(0,S.useIsRestoring)(),i=(0,_.useQueryErrorResetBoundary)(),n=l.useMemo(()=>e.map(e=>{let t=r.defaultQueryOptions(e);return t._optimisticResults=a?"isRestoring":"optimistic",t}),[e,r,a]);n.forEach(e=>{(0,k.ensureSuspenseTimers)(e),(0,E.ensurePreventErrorBoundaryRetry)(e,i)}),(0,E.useClearResetErrorBoundary)(i);let[o]=l.useState(()=>new C(r,n,t)),[c,u,d]=o.getOptimisticResult(n,t.combine),h=!a&&!1!==t.subscribed;l.useSyncExternalStore(l.useCallback(e=>h?o.subscribe(y.notifyManager.batchCalls(e)):w.noop,[o,h]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),l.useEffect(()=>{o.setQueries(n,t)},[n,t,o]);let m=c.some((e,t)=>(0,k.shouldSuspend)(n[t],e))?c.flatMap((e,t)=>{let s=n[t];if(s){let t=new j.QueryObserver(r,s);if((0,k.shouldSuspend)(s,e))return(0,k.fetchOptimistic)(s,t,i);(0,k.willFetch)(e,a)&&(0,k.fetchOptimistic)(s,t,i)}return[]}):[];if(m.length>0)throw Promise.all(m);let p=c.find((e,t)=>{let s=n[t];return s&&(0,E.getHasError)({result:e,errorResetBoundary:i,throwOnError:s.throwOnError,query:r.getQueryCache().get(s.queryHash),suspense:s.suspense})});if(p?.error)throw p.error;return u(d())}({queries:L.map(t=>({queryKey:["admin","users","infinite",{page:t,searchQuery:I,roleFilter:U,statusFilter:M,limit:50}],queryFn:()=>H(t),enabled:!!e?.user&&"ADMIN"===e.user.role,staleTime:3e5,gcTime:18e5,retry:(e,t)=>!(t.message.includes("Unauthorized")||t.message.includes("Forbidden"))&&e<2,refetchOnWindowFocus:!1}))}),$=K.map(e=>e.data),V=K.map(e=>({isLoading:e.isLoading,isError:e.isError,error:e.error})),{allUsers:W,totalCount:X,totalPages:J,isLoading:Y,isError:Z,error:ee}=(0,l.useMemo)(()=>{let e=new Map,t=0,s=1,r=!1,l=!1,a=null;return $.forEach((r,l)=>{r&&(r.users.forEach(t=>e.set(t.id,t)),l===$.length-1&&(t=r.totalCount,s=r.totalPages))}),V.forEach(e=>{e.isLoading&&(r=!0),e.isError&&(l=!0,a=e.error)}),{allUsers:Array.from(e.values()),totalCount:t,totalPages:s,isLoading:r,isError:l,error:a}},[$,V]);(0,l.useEffect)(()=>{q.current=J},[J]);let et=L[L.length-1]<J,es=(0,l.useCallback)(()=>{et&&!Y&&F(e=>{let t=e[e.length-1]+1,s=t+1;return s<=q.current&&r.prefetchQuery({queryKey:["admin","users","infinite",{page:s,searchQuery:I,roleFilter:U,statusFilter:M,limit:50}],queryFn:()=>H(s),staleTime:3e5}),[...e,t]})},[et,Y,r,I,U,M,H,50]);return((0,l.useEffect)(()=>{F([1])},[I,U,M]),(0,l.useEffect)(()=>{let e=G.current;if(e)return D.current=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&et&&!Y&&es()},{root:z.current,rootMargin:"100px",threshold:.1}),D.current.observe(e),()=>{D.current&&D.current.disconnect()}},[et,Y,es]),Y&&0===W.length)?(0,t.jsx)("div",{className:"flex min-h-[400px] items-center justify-center",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:"로딩 중..."})}):Z&&0===W.length?(0,t.jsx)("div",{className:"flex min-h-[400px] items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"mb-2 text-red-600",children:"데이터를 불러오는데 실패했습니다"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:ee instanceof Error?ee.message:"잠시 후 다시 시도해주세요"})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.Card,{className:"mb-6",children:(0,t.jsxs)(b.CardContent,{className:"pt-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[(0,t.jsx)("div",{className:"relative flex-1",children:(0,t.jsx)(x.Input,{type:"search",placeholder:"이름, 이메일, 전화번호로 검색...",value:a,onChange:e=>i(e.target.value),onKeyDown:e=>"Enter"===e.key&&B()})}),(0,t.jsxs)(g.Select,{value:n,onValueChange:e=>o(e),children:[(0,t.jsx)(g.SelectTrigger,{className:"h-10 w-full sm:w-[180px]",children:(0,t.jsx)(g.SelectValue,{placeholder:"역할 필터"})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"ALL",children:"모든 역할"}),(0,t.jsx)(g.SelectItem,{value:"CUSTOMER",children:"고객"}),(0,t.jsx)(g.SelectItem,{value:"GROOMER",children:"미용사"}),(0,t.jsx)(g.SelectItem,{value:"ADMIN",children:"관리자"})]})]}),(0,t.jsxs)(g.Select,{value:R,onValueChange:e=>T(e),children:[(0,t.jsx)(g.SelectTrigger,{className:"h-10 w-full sm:w-[180px]",children:(0,t.jsx)(g.SelectValue,{placeholder:"상태 필터"})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"ALL",children:"모든 상태"}),(0,t.jsx)(g.SelectItem,{value:"ACTIVE",children:"활성"}),(0,t.jsx)(g.SelectItem,{value:"INACTIVE",children:"비활성"})]})]}),(0,t.jsxs)(f.Button,{onClick:B,variant:"outline",className:"h-10 w-full sm:w-auto",children:[(0,t.jsx)(p.Filter,{className:"mr-2 h-4 w-4"}),"필터 적용"]})]}),X>0&&(0,t.jsxs)("div",{className:"text-muted-foreground mt-2 text-sm",children:["총 ",X.toLocaleString("ko-KR"),"명의 사용자 (페이지 ",L.length," /"," ",J,")"]})]})}),(0,t.jsx)(b.Card,{children:(0,t.jsx)(b.CardContent,{className:"p-0",children:(0,t.jsxs)("div",{ref:z,className:Q.default.scrollContainer,children:[(0,t.jsxs)(v.Table,{className:Q.default.excelTable,role:"table","aria-label":"사용자 목록",children:[(0,t.jsx)(v.TableHeader,{role:"rowgroup",children:(0,t.jsxs)(v.TableRow,{role:"row",children:[(0,t.jsx)(v.TableHead,{className:Q.default.colName,role:"columnheader",children:"이름"}),(0,t.jsx)(v.TableHead,{className:Q.default.colEmail,role:"columnheader",children:"이메일"}),(0,t.jsx)(v.TableHead,{className:Q.default.colPhone,role:"columnheader",children:"전화번호"}),(0,t.jsx)(v.TableHead,{className:Q.default.colRole,role:"columnheader",children:"역할"}),(0,t.jsx)(v.TableHead,{className:Q.default.colStatus,role:"columnheader",children:"상태"}),(0,t.jsx)(v.TableHead,{className:Q.default.colCreated,role:"columnheader",children:"가입일"})]})}),(0,t.jsxs)(v.TableBody,{children:[0===W.length&&!Y&&(0,t.jsx)(v.TableRow,{children:(0,t.jsx)(v.TableCell,{colSpan:6,children:(0,t.jsxs)("div",{className:Q.default.emptyState,children:[(0,t.jsx)("p",{children:"사용자가 없습니다"}),(0,t.jsx)("p",{children:"필터 조건을 변경해보세요"})]})})}),W.map(e=>{let s;return(0,t.jsxs)(v.TableRow,{children:[(0,t.jsx)(v.TableCell,{children:(0,t.jsxs)("div",{className:Q.default.cellContent,children:[(0,t.jsx)("div",{className:Q.default.cellAvatar,children:(0,t.jsx)(d.User,{})}),(0,t.jsx)("span",{className:Q.default.cellText,children:e.name||"이름 없음"})]})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsxs)("div",{className:Q.default.cellContent,children:[(0,t.jsx)(m.Mail,{className:Q.default.cellIcon}),(0,t.jsx)("span",{className:Q.default.cellTextLong,children:e.email})]})}),(0,t.jsx)(v.TableCell,{children:e.phone&&(0,t.jsxs)("div",{className:Q.default.cellContent,children:[(0,t.jsx)(h.Phone,{className:Q.default.cellIcon}),(0,t.jsx)("span",{children:e.phone})]})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsx)("div",{className:Q.default.cellContent,children:(0,t.jsxs)("span",{className:`${Q.default.roleBadge} ${(e=>{switch(e){case"ADMIN":return"bg-red-100 text-red-700";case"GROOMER":return"bg-blue-100 text-blue-700";case"CUSTOMER":return"bg-green-100 text-green-700"}})(e.role)}`,children:[(e=>{switch(e){case"ADMIN":return"관리자";case"GROOMER":return"미용사";case"CUSTOMER":return"고객"}})(e.role),"GROOMER"===e.role&&e.groomerProfile?.isActive&&" ✓"]})})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsx)("span",{className:`${Q.default.statusBadge} ${!1!==e.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:!1!==e.isActive?"활성":"비활성"})}),(0,t.jsx)(v.TableCell,{children:(s=e.createdAt,(0,u.format)(new Date(s),"yyyy-MM-dd",{locale:c.ko}))})]},e.id)})]})]}),et&&(0,t.jsx)("div",{ref:G,className:Q.default.loadingTrigger,children:Y?"로딩 중...":"스크롤하여 더 보기"}),!et&&W.length>0&&(0,t.jsx)("div",{className:Q.default.loadingTrigger,children:"모든 사용자를 불러왔습니다"})]})})})]})}function O(){let{data:e,isPending:c}=(0,s.useSession)(),u=(0,r.useRouter)();return((0,l.useEffect)(()=>{e||u.push("/auth/signin"),e?.user?.role&&"ADMIN"!==e.user.role&&u.push("/admin/dashboard/overview")},[e,u]),c)?(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,t.jsx)(i.LoadingSpinner,{size:"lg"})}):e&&e.user?.role==="ADMIN"?(0,t.jsxs)("div",{className:"bg-background min-h-screen",children:[(0,t.jsx)("header",{className:"border-border border-b",children:(0,t.jsx)(n.PageHeader,{title:"사용자 관리",description:"플랫폼 사용자를 관리하고 모니터링하세요",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(a.Users,{className:"text-primary h-5 w-5"})})})}),(0,t.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(o.AdminStatsCards,{variant:"users"}),(0,t.jsx)(I,{})]})})]}):null}e.s(["default",()=>O],170551)}]);