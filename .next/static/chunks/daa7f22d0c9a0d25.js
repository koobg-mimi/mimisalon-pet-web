(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,108240,e=>{"use strict";var r=e.i(271645);let t=null,o={jsSdkUrl:"https://cdn.portone.io/v2/browser-sdk.js"};var n=e.i(326975);e.s(["usePayment",0,()=>{let[e,s]=(0,r.useState)(!1),[c,a]=(0,r.useState)(null),{data:l,isLoading:u}=(0,n.usePublicEnv)(),d=(0,r.useCallback)(()=>{a(null)},[]);return{requestPayment:(0,r.useCallback)(async e=>{if(u||!l)return{success:!1,error:"환경 설정을 불러오는 중입니다. 잠시 후 다시 시도해주세요."};s(!0),a(null);try{var r;console.log("[usePayment] Processing web payment");let n=window.location.origin;if(!l.NEXT_PUBLIC_PORTONE_STORE_ID)throw Error("storeId 파라미터는 필수 입력입니다. 환경 변수 NEXT_PUBLIC_PORTONE_STORE_ID를 확인해주세요.");if(!l.NEXT_PUBLIC_PORTONE_CHANNEL_KEY)throw Error("channelKey 파라미터는 필수 입력입니다. 환경 변수 NEXT_PUBLIC_PORTONE_CHANNEL_KEY를 확인해주세요.");let s={storeId:l.NEXT_PUBLIC_PORTONE_STORE_ID,channelKey:l.NEXT_PUBLIC_PORTONE_CHANNEL_KEY,paymentId:e.orderId,orderName:e.orderName,totalAmount:e.amount,currency:"KRW",payMethod:"CARD",customer:e.customer||{fullName:e.customerName||"",phoneNumber:e.customerPhone||"",email:e.customerEmail||""},customData:e.customData||{},redirectUrl:`${n}/payment/success`};console.log("[usePayment] Requesting web payment:",s);let c=await (r=s,(null!=t?t:t=new Promise((e,r)=>{if(window.PortOne)return e(window.PortOne);try{let t=document.querySelector(`script[src="${o.jsSdkUrl}"]`)||function(){let e=document.createElement("script");e.src=o.jsSdkUrl;let r=document.head||document.body;if(!r)throw Error("[PortOne] Expected document.body not to be null");return r.appendChild(e)}();t.addEventListener("load",()=>{if(window.PortOne)return e(window.PortOne);r(Error("[PortOne] Failed to load window.PortOne"))}),t.addEventListener("error",()=>{r(Error("[PortOne] Failed to load window.PortOne"))})}catch(e){return r(e)}})).then(e=>e.requestPayment(r)));if(c?.code!==void 0){let e=c?.message||"알 수 없는 오류";if("FAILURE_TYPE_USER_CANCEL"===c.code||"PG_CANCEL"===c.code||e.includes("사용자")||e.includes("취소"))return console.log("[usePayment] Payment cancelled by user"),{success:!1,code:c.code,message:"결제가 취소되었습니다",cancelled:!0};return console.error("[usePayment] Web payment failed:",e),a(`결제에 실패했습니다: ${e}`),{success:!1,code:c.code,message:e,error:e}}return console.log("[usePayment] Web payment successful:",c),{success:!0,paymentId:c?.paymentId,transactionId:c?.transactionId}}catch(r){console.error("[usePayment] Unexpected error:",r);let e=r instanceof Error?r.message:"결제 처리 중 예기치 않은 오류가 발생했습니다.";return a(e),{success:!1,error:e}}finally{s(!1)}},[l,u]),isLoading:e,error:c,clearError:d}}],108240)}]);