(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,869230,e=>{"use strict";var t=e.i(175555),r=e.i(540143),s=e.i(286491),i=e.i(915823),a=e.i(793803),n=e.i(619273),l=e.i(180166),u=class extends i.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#r=(0,a.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#s=void 0;#i=void 0;#a=void 0;#n;#l;#r;#t;#u;#o;#c;#h;#d;#p;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#s.addObserver(this),o(this.#s,this.options)?this.#m():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return c(this.#s,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return c(this.#s,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#v(),this.#s.removeObserver(this)}setOptions(e){let t=this.options,r=this.#s;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,n.resolveEnabled)(this.options.enabled,this.#s))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#s.setOptions(this.options),t._defaulted&&!(0,n.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#s,observer:this});let s=this.hasListeners();s&&h(this.#s,r,this.options,t)&&this.#m(),this.updateResult(),s&&(this.#s!==r||(0,n.resolveEnabled)(this.options.enabled,this.#s)!==(0,n.resolveEnabled)(t.enabled,this.#s)||(0,n.resolveStaleTime)(this.options.staleTime,this.#s)!==(0,n.resolveStaleTime)(t.staleTime,this.#s))&&this.#E();let i=this.#R();s&&(this.#s!==r||(0,n.resolveEnabled)(this.options.enabled,this.#s)!==(0,n.resolveEnabled)(t.enabled,this.#s)||i!==this.#p)&&this.#y(i)}getOptimisticResult(e){var t,r;let s=this.#e.getQueryCache().build(this.#e,e),i=this.createResult(s,e);return t=this,r=i,(0,n.shallowEqualObjects)(t.getCurrentResult(),r)||(this.#a=i,this.#l=this.options,this.#n=this.#s.state),i}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"===r&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#r.status||this.#r.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#s}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#m({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#m(e){this.#x();let t=this.#s.fetch(this.options,e);return e?.throwOnError||(t=t.catch(n.noop)),t}#E(){this.#b();let e=(0,n.resolveStaleTime)(this.options.staleTime,this.#s);if(n.isServer||this.#a.isStale||!(0,n.isValidTimeout)(e))return;let t=(0,n.timeUntilStale)(this.#a.dataUpdatedAt,e);this.#h=l.timeoutManager.setTimeout(()=>{this.#a.isStale||this.updateResult()},t+1)}#R(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#s):this.options.refetchInterval)??!1}#y(e){this.#v(),this.#p=e,!n.isServer&&!1!==(0,n.resolveEnabled)(this.options.enabled,this.#s)&&(0,n.isValidTimeout)(this.#p)&&0!==this.#p&&(this.#d=l.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||t.focusManager.isFocused())&&this.#m()},this.#p))}#g(){this.#E(),this.#y(this.#R())}#b(){this.#h&&(l.timeoutManager.clearTimeout(this.#h),this.#h=void 0)}#v(){this.#d&&(l.timeoutManager.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){let r,i=this.#s,l=this.options,u=this.#a,c=this.#n,p=this.#l,f=e!==i?e.state:this.#i,{state:m}=e,g={...m},b=!1;if(t._optimisticResults){let r=this.hasListeners(),a=!r&&o(e,t),n=r&&h(e,i,t,l);(a||n)&&(g={...g,...(0,s.fetchState)(m.data,e.options)}),"isRestoring"===t._optimisticResults&&(g.fetchStatus="idle")}let{error:v,errorUpdatedAt:x,status:E}=g;r=g.data;let R=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===E){let e;u?.isPlaceholderData&&t.placeholderData===p?.placeholderData?(e=u.data,R=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#c?.state.data,this.#c):t.placeholderData,void 0!==e&&(E="success",r=(0,n.replaceData)(u?.data,e,t),b=!0)}if(t.select&&void 0!==r&&!R)if(u&&r===c?.data&&t.select===this.#u)r=this.#o;else try{this.#u=t.select,r=t.select(r),r=(0,n.replaceData)(u?.data,r,t),this.#o=r,this.#t=null}catch(e){this.#t=e}this.#t&&(v=this.#t,r=this.#o,x=Date.now(),E="error");let y="fetching"===g.fetchStatus,C="pending"===E,I="error"===E,O=C&&y,N=void 0!==r,S={status:E,fetchStatus:g.fetchStatus,isPending:C,isSuccess:"success"===E,isError:I,isInitialLoading:O,isLoading:O,data:r,dataUpdatedAt:g.dataUpdatedAt,error:v,errorUpdatedAt:x,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:y,isRefetching:y&&!C,isLoadingError:I&&!N,isPaused:"paused"===g.fetchStatus,isPlaceholderData:b,isRefetchError:I&&N,isStale:d(e,t),refetch:this.refetch,promise:this.#r,isEnabled:!1!==(0,n.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===S.status?e.reject(S.error):void 0!==S.data&&e.resolve(S.data)},r=()=>{t(this.#r=S.promise=(0,a.pendingThenable)())},s=this.#r;switch(s.status){case"pending":e.queryHash===i.queryHash&&t(s);break;case"fulfilled":("error"===S.status||S.data!==s.value)&&r();break;case"rejected":("error"!==S.status||S.error!==s.reason)&&r()}}return S}updateResult(){let e=this.#a,t=this.createResult(this.#s,this.options);if(this.#n=this.#s.state,this.#l=this.options,void 0!==this.#n.data&&(this.#c=this.#s),(0,n.shallowEqualObjects)(t,e))return;this.#a=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#f.size)return!0;let s=new Set(r??this.#f);return this.options.throwOnError&&s.add("error"),Object.keys(this.#a).some(t=>this.#a[t]!==e[t]&&s.has(t))};this.#C({listeners:r()})}#x(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#s)return;let t=this.#s;this.#s=e,this.#i=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#C(e){r.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#a)}),this.#e.getQueryCache().notify({query:this.#s,type:"observerResultsUpdated"})})}};function o(e,t){return!1!==(0,n.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&c(e,t,t.refetchOnMount)}function c(e,t,r){if(!1!==(0,n.resolveEnabled)(t.enabled,e)&&"static"!==(0,n.resolveStaleTime)(t.staleTime,e)){let s="function"==typeof r?r(e):r;return"always"===s||!1!==s&&d(e,t)}return!1}function h(e,t,r,s){return(e!==t||!1===(0,n.resolveEnabled)(s.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&d(e,r)}function d(e,t){return!1!==(0,n.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,n.resolveStaleTime)(t.staleTime,e))}e.s(["QueryObserver",()=>u])},673664,427001,e=>{"use strict";let t;var r=e.i(271645);e.i(843476);var s=r.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),i=()=>r.useContext(s);e.s(["useQueryErrorResetBoundary",()=>i],673664);var a=e.i(619273),n=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&!t.isReset()&&(e.retryOnMount=!1)},l=e=>{r.useEffect(()=>{e.clearReset()},[e])},u=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(i&&void 0===e.data||(0,a.shouldThrowError)(r,[e.error,s]));e.s(["ensurePreventErrorBoundaryRetry",()=>n,"getHasError",()=>u,"useClearResetErrorBoundary",()=>l],427001)},381384,e=>{"use strict";var t=e.i(271645),r=t.createContext(!1),s=()=>t.useContext(r);r.Provider,e.s(["useIsRestoring",()=>s])},254440,e=>{"use strict";var t=e=>{if(e.suspense){let t=e=>"static"===e?e:Math.max(e??1e3,1e3),r=e.staleTime;e.staleTime="function"==typeof r?(...e)=>t(r(...e)):t(r),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}},r=(e,t)=>e.isLoading&&e.isFetching&&!t,s=(e,t)=>e?.suspense&&t.isPending,i=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});e.s(["ensureSuspenseTimers",()=>t,"fetchOptimistic",()=>i,"shouldSuspend",()=>s,"willFetch",()=>r])},266027,e=>{"use strict";var t=e.i(869230);e.i(247167);var r=e.i(271645),s=e.i(619273),i=e.i(540143),a=e.i(912598),n=e.i(673664),l=e.i(427001),u=e.i(381384),o=e.i(254440);function c(e,c){return function(e,t,c){let h=(0,u.useIsRestoring)(),d=(0,n.useQueryErrorResetBoundary)(),p=(0,a.useQueryClient)(c),f=p.defaultQueryOptions(e);p.getDefaultOptions().queries?._experimental_beforeQuery?.(f),f._optimisticResults=h?"isRestoring":"optimistic",(0,o.ensureSuspenseTimers)(f),(0,l.ensurePreventErrorBoundaryRetry)(f,d),(0,l.useClearResetErrorBoundary)(d);let m=!p.getQueryCache().get(f.queryHash),[g]=r.useState(()=>new t(p,f)),b=g.getOptimisticResult(f),v=!h&&!1!==e.subscribed;if(r.useSyncExternalStore(r.useCallback(e=>{let t=v?g.subscribe(i.notifyManager.batchCalls(e)):s.noop;return g.updateResult(),t},[g,v]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),r.useEffect(()=>{g.setOptions(f)},[f,g]),(0,o.shouldSuspend)(f,b))throw(0,o.fetchOptimistic)(f,g,d);if((0,l.getHasError)({result:b,errorResetBoundary:d,throwOnError:f.throwOnError,query:p.getQueryCache().get(f.queryHash),suspense:f.suspense}))throw b.error;if(p.getDefaultOptions().queries?._experimental_afterQuery?.(f,b),f.experimental_prefetchInRender&&!s.isServer&&(0,o.willFetch)(b,h)){let e=m?(0,o.fetchOptimistic)(f,g,d):p.getQueryCache().get(f.queryHash)?.promise;e?.catch(s.noop).finally(()=>{g.updateResult()})}return f.notifyOnChangeProps?b:g.trackResult(b)}(e,t.QueryObserver,c)}e.s(["useQuery",()=>c],266027)},470152,e=>{"use strict";function t(e,[t,r]){return Math.min(r,Math.max(t,e))}e.s(["clamp",()=>t])},999682,e=>{"use strict";var t=e.i(271645);function r(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}e.s(["usePrevious",()=>r])},453705,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["default",()=>t])},409797,e=>{"use strict";var t=e.i(453705);e.s(["ChevronDownIcon",()=>t.default])},522706,e=>{"use strict";var t=e.i(843476),r=e.i(975157);function s({title:e,description:s,children:i,className:a}){return(0,t.jsxs)("div",{className:(0,r.cn)("container mx-auto flex flex-col gap-4 px-4 py-4 sm:flex-row sm:items-center sm:justify-between",a),children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h1",{className:"text-foreground text-2xl font-bold",children:e}),s&&(0,t.jsx)("p",{className:"text-muted-foreground mt-1 text-sm",children:s})]}),i&&(0,t.jsx)("div",{className:"flex shrink-0 flex-col items-stretch gap-2 sm:flex-row sm:items-center sm:gap-0 sm:space-x-4",children:i})]})}e.s(["PageHeader",()=>s])},412012,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>t])},629978,e=>{"use strict";var t=e.i(412012);e.s(["ChevronLeftIcon",()=>t.default])},326975,e=>{"use strict";var t=e.i(266027);async function r(){let e=await fetch("/api/env");if(!e.ok)throw Error("Failed to fetch environment configuration");return e.json()}function s(){return(0,t.useQuery)({queryKey:["public-env"],queryFn:r,staleTime:1/0,gcTime:1/0,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)})}e.s(["usePublicEnv",()=>s])},276590,e=>{"use strict";var t=e.i(843476),r=e.i(629978),s=e.i(233565),i=e.i(975157),a=e.i(519455),n=e.i(967489);function l({currentPage:e,totalPages:l,pageSize:u,onPageChange:o,onPageSizeChange:c,className:h,pageSizeOptions:d=[10,20,50],showPageSizeSelector:p=!0,maxVisiblePages:f=5}){let m=e>1,g=e<l,b=(()=>{if(l<=f+2)return Array.from({length:l},(e,t)=>t+1);let t=[],r=Math.floor(f/2);t.push(1);let s=Math.max(2,e-r),i=Math.min(l-1,e+r);e<=r+1?i=Math.min(l-1,f):e>=l-r&&(s=Math.max(2,l-f)),s>2&&t.push("ellipsis");for(let e=s;e<=i;e++)t.push(e);return i<l-1&&t.push("ellipsis"),l>1&&t.push(l),t})();return(0,t.jsxs)("div",{className:(0,i.cn)("flex flex-col items-center justify-between gap-4","sm:flex-row",h),children:[p&&c&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground text-sm whitespace-nowrap",children:"페이지당"}),(0,t.jsxs)(n.Select,{value:u.toString(),onValueChange:e=>c(Number(e)),children:[(0,t.jsx)(n.SelectTrigger,{className:"h-9 w-[70px] sm:w-[80px]",children:(0,t.jsx)(n.SelectValue,{})}),(0,t.jsx)(n.SelectContent,{children:d.map(e=>(0,t.jsx)(n.SelectItem,{value:e.toString(),children:e},e))})]}),(0,t.jsx)("span",{className:"text-muted-foreground text-sm whitespace-nowrap",children:"개씩 보기"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(a.Button,{variant:"outline",size:"icon",onClick:()=>o(e-1),disabled:!m,className:"h-9 w-9","aria-label":"이전 페이지",children:(0,t.jsx)(r.ChevronLeftIcon,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:b.map((r,s)=>{if("ellipsis"===r)return(0,t.jsx)("div",{className:"flex h-9 w-9 items-center justify-center",children:(0,t.jsx)("span",{className:"text-muted-foreground",children:"..."})},`ellipsis-${s}`);let n=r===e;return(0,t.jsx)(a.Button,{variant:n?"default":"outline",size:"icon",onClick:()=>o(r),className:(0,i.cn)("h-9 w-9",n&&"pointer-events-none"),"aria-label":`페이지 ${r}`,"aria-current":n?"page":void 0,children:r},r)})}),(0,t.jsx)(a.Button,{variant:"outline",size:"icon",onClick:()=>o(e+1),disabled:!g,className:"h-9 w-9","aria-label":"다음 페이지",children:(0,t.jsx)(s.ChevronRightIcon,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"text-muted-foreground text-sm sm:hidden",children:[e," / ",l," 페이지"]})]})}e.s(["EnhancedPagination",()=>l])},938364,e=>{"use strict";var t=e.i(843476),r=e.i(578938),s=e.i(613846),i=e.i(271645),a=e.i(266027),n=e.i(519455),l=e.i(93814),u=e.i(522706),o=e.i(276590),c=e.i(522016),h=e.i(401851),d=e.i(116550),p=e.i(225913),f=e.i(975157);let m=e=>{switch(e){case"ALL":return"전체";case"PAYMENT_COMPLETE":return"결제완료";case"GROOMER_CONFIRM":return"확정";case"SERVICE_COMPLETED":return"완료";case"SERVICE_CANCELLED":return"취소";default:return e}};function g({status:e,className:r=""}){return(0,t.jsx)("span",{className:`rounded-full px-2 py-1 text-xs font-medium ${(e=>{switch(e){case"FIRST_PAYMENT_PENDING":default:return"text-gray-600 bg-gray-50";case"FIRST_PAYMENT_COMPLETE":return"text-yellow-600 bg-yellow-50";case"FIRST_PAYMENT_VERIFY":return"text-orange-600 bg-orange-50";case"GROOMER_CONFIRM_PENDING":return"text-purple-600 bg-purple-50";case"GROOMER_CONFIRM":return"text-blue-600 bg-blue-50";case"ADDITIONAL_PAYMENT_PENDING":return"text-amber-600 bg-amber-50";case"ADDITIONAL_PAYMENT_COMPLETE":return"text-amber-700 bg-amber-100";case"WORK_IN_PROGRESS":return"text-indigo-600 bg-indigo-50";case"SERVICE_COMPLETED":return"text-green-600 bg-green-50";case"SERVICE_CANCELLED":return"text-red-600 bg-red-50";case"BOOKING_FAILED":return"text-red-700 bg-red-100"}})(e)} ${r}`,children:(e=>{switch(e){case"FIRST_PAYMENT_PENDING":return"결제대기";case"FIRST_PAYMENT_COMPLETE":return"결제완료";case"FIRST_PAYMENT_VERIFY":return"결제검증중";case"GROOMER_CONFIRM_PENDING":return"미용사 확인중";case"GROOMER_CONFIRM":return"확정";case"ADDITIONAL_PAYMENT_PENDING":return"추가결제 대기";case"ADDITIONAL_PAYMENT_COMPLETE":return"추가결제 완료";case"WORK_IN_PROGRESS":return"작업중";case"SERVICE_COMPLETED":return"완료";case"SERVICE_CANCELLED":return"취소";case"BOOKING_FAILED":return"예약실패";default:return e}})(e)})}let b=(0,p.cva)("rounded-lg border transition-all duration-300 overflow-hidden",{variants:{variant:{default:"border-border bg-card shadow-sm before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-primary/5 before:to-transparent before:translate-x-[-200%] before:duration-700",compact:"border-border bg-card shadow-sm",detailed:"border-border bg-card shadow-md",highlight:"border-primary/50 bg-gradient-to-br from-primary/5 to-transparent shadow-md",minimal:"border-border/50 bg-transparent"},size:{sm:"p-4",default:"p-5",lg:"p-6"}},defaultVariants:{variant:"default",size:"default"}}),v=(0,p.cva)("flex items-start justify-between",{variants:{size:{sm:"mb-3 gap-3",default:"mb-4 gap-4",lg:"mb-6 gap-6"}},defaultVariants:{size:"default"}}),x=(0,p.cva)("font-semibold",{variants:{size:{sm:"text-sm",default:"text-base",lg:"text-lg"}},defaultVariants:{size:"default"}}),E=i.forwardRef(({className:e,variant:r,size:s,booking:i,onContactCustomerService:a,...l},u)=>{let o=i.pet||i.pets[0],p=i.services[0],m=i.services.length>1?`${p?.name} 외 ${i.services.length-1}개`:p?.name||i.serviceType;return(0,t.jsxs)("div",{ref:u,className:(0,f.cn)(b({variant:r,size:s,className:e})),...l,children:[(0,t.jsxs)("div",{className:(0,f.cn)(v({size:s})),children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"mb-1 flex flex-wrap items-center gap-2",children:[(0,t.jsx)("h3",{className:(0,f.cn)(x({size:s}),"truncate"),children:m}),(0,t.jsx)(g,{status:i.status})]}),(0,t.jsxs)("p",{className:"text-muted-foreground truncate text-sm",children:[o?.name," (",o?.breed?.name,") • ",i.groomer.name," 미용사"]}),(0,t.jsxs)("p",{className:"text-muted-foreground mt-1 text-xs",children:["예약번호: ",i.bookingNumber]})]}),(0,t.jsxs)("div",{className:"flex-shrink-0 text-right",children:[(0,t.jsxs)("p",{className:(0,f.cn)(x({size:s})),children:[i.totalPrice.toLocaleString("ko-KR"),"원"]}),(0,t.jsxs)("p",{className:"text-muted-foreground text-sm whitespace-nowrap",children:[(0,h.format)(new Date(i.serviceDate),"yyyy년 MM월 dd일",{locale:d.ko})," ",i.serviceTime]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsx)(n.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,t.jsx)(c.default,{href:`/customer/booking/${i.id}`,children:"상세보기"})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[("FIRST_PAYMENT_COMPLETE"===i.status||"SERVICE_CONFIRMED"===i.status)&&(0,t.jsx)(n.Button,{variant:"outline",size:"sm",onClick:a,children:"취소 문의"}),"SERVICE_COMPLETED"===i.status&&(0,t.jsx)(n.Button,{size:"sm",asChild:!0,children:(0,t.jsx)(c.default,{href:`/review/create?bookingId=${i.id}`,children:"리뷰 작성"})})]})]})]})});E.displayName="BookingCard";let R={ALL:null,PAYMENT_COMPLETE:["FIRST_PAYMENT_COMPLETE","GROOMER_CONFIRM_PENDING"],GROOMER_CONFIRM:["GROOMER_CONFIRM"],SERVICE_COMPLETED:["SERVICE_COMPLETED"],SERVICE_CANCELLED:["SERVICE_CANCELLED"]},y=["ALL","PAYMENT_COMPLETE","GROOMER_CONFIRM","SERVICE_COMPLETED","SERVICE_CANCELLED"];function C({activeFilter:e,onFilterChange:r}){return(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:y.map(s=>(0,t.jsx)(n.Button,{variant:e===s?"default":"outline",size:"sm",onClick:()=>r(s),children:m(s)},s))})})}function I({filter:e}){return(0,t.jsxs)("div",{className:"py-12 text-center",children:[(0,t.jsx)("div",{className:"bg-muted mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full",children:(0,t.jsx)("svg",{className:"text-muted-foreground h-8 w-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,t.jsx)("h3",{className:"text-foreground mb-2 text-lg font-medium",children:"ALL"===e?"예약 내역이 없습니다":`${m(e)} 예약이 없습니다`}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"첫 번째 미용 예약을 만들어보세요."}),(0,t.jsx)(n.Button,{asChild:!0,children:(0,t.jsx)(c.default,{href:"/booking/new",children:"예약하기"})})]})}var O=e.i(326975);function N(){let{data:e,isPending:h}=(0,r.useSession)(),d=(0,s.useRouter)(),p=(0,s.useSearchParams)(),[f,m]=(0,i.useState)(p.get("filter")||"ALL"),[g,b]=(0,i.useState)(Number(p.get("page"))||1),[v,x]=(0,i.useState)(Number(p.get("limit"))||10),y=(e,t,r)=>{let s=new URLSearchParams;s.set("page",e.toString()),s.set("limit",t.toString()),"ALL"!==r&&s.set("filter",r),d.push(`?${s.toString()}`,{scroll:!1})},{data:N,isLoading:S}=(0,a.useQuery)({queryKey:["customer","bookings",g,f,v],queryFn:async()=>{let e=new URLSearchParams({page:g.toString(),limit:v.toString()});if("ALL"!==f){let t=R[f];t&&e.append("status",t.join(","))}let t=await fetch(`/api/customer/bookings?${e.toString()}`);if(!t.ok)throw Error("Failed to fetch bookings");return t.json()},enabled:!!e?.user&&"CUSTOMER"===e.user.role}),T=N?.bookings||[],j=N?.totalPages||1;(0,i.useEffect)(()=>{e||d.push("/auth/signin"),e?.user?.role&&"CUSTOMER"!==e.user.role&&d.push("/dashboard")},[e,d]);let{data:w}=(0,O.usePublicEnv)(),M=()=>{let e=w?.NEXT_PUBLIC_CUSTOMER_SERVICE_PHONE||"1588-1234";confirm(`고객센터로 연결하시겠습니까?
전화번호: ${e}`)&&(window.location.href=`tel:${e}`)};return h||S?(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,t.jsx)(l.LoadingSpinner,{size:"lg"})}):e&&e.user?.role==="CUSTOMER"?(0,t.jsxs)("div",{className:"bg-background min-h-screen",children:[(0,t.jsx)("header",{className:"border-border border-b",children:(0,t.jsxs)(u.PageHeader,{title:"예약 관리",description:"미용 예약을 확인하고 관리하세요",children:[(0,t.jsx)(n.Button,{asChild:!0,children:(0,t.jsx)(c.default,{href:"/booking/new",children:"새 예약"})}),(0,t.jsx)(n.Button,{variant:"outline",asChild:!0,children:(0,t.jsx)(c.default,{href:"/customer/dashboard/overview",children:"대시보드"})})]})}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)(C,{activeFilter:f,onFilterChange:e=>{m(e),b(1),y(1,v,e)}}),0===T.length?(0,t.jsx)(I,{filter:f}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{className:"grid gap-6",children:T.map(e=>(0,t.jsx)(E,{booking:e,onContactCustomerService:M},e.id))}),j>0&&(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(o.EnhancedPagination,{currentPage:g,totalPages:j,pageSize:v,onPageChange:e=>{b(e),y(e,v,f),window.scrollTo({top:0,behavior:"smooth"})},onPageSizeChange:e=>{x(e),b(1),y(1,e,f),window.scrollTo({top:0,behavior:"smooth"})},pageSizeOptions:[10,20,50],showPageSizeSelector:!0})})]})]})]}):null}e.s(["default",()=>N],938364)}]);