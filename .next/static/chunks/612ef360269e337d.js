(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,470152,e=>{"use strict";function t(e,[t,a]){return Math.min(a,Math.max(t,e))}e.s(["clamp",()=>t])},999682,e=>{"use strict";var t=e.i(271645);function a(e){let a=t.useRef({value:e,previous:e});return t.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}e.s(["usePrevious",()=>a])},453705,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["default",()=>t])},409797,e=>{"use strict";var t=e.i(453705);e.s(["ChevronDownIcon",()=>t.default])},54943,e=>{"use strict";let t=(0,e.i(475254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["default",()=>t])},988846,e=>{"use strict";var t=e.i(54943);e.s(["SearchIcon",()=>t.default])},879664,e=>{"use strict";let t=(0,e.i(475254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["default",()=>t])},607237,e=>{"use strict";let t=(0,e.i(475254).default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["TrashIcon",()=>t],607237)},786108,e=>{"use strict";let t=(0,e.i(475254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["default",()=>t])},361653,e=>{"use strict";let t=(0,e.i(475254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["default",()=>t])},328196,e=>{"use strict";var t=e.i(361653);e.s(["AlertCircleIcon",()=>t.default])},754473,e=>{"use strict";var t=e.i(247978);e.s(["CreditCardIcon",()=>t.default])},515288,e=>{"use strict";var t=e.i(843476),a=e.i(975157);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground rounded-lg border shadow-sm","transition-all hover:shadow-md","p-2 sm:p-3","sm:rounded-xl sm:shadow",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("flex flex-col space-y-2 p-2 sm:p-2",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("text-lg leading-none font-semibold tracking-tight",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("p-2 sm:p-2",e),...r})}function c({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center p-4 pt-0 sm:p-6 sm:pt-0","flex-col gap-2 sm:flex-row sm:gap-0",e),...r})}e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>n,"CardFooter",()=>c,"CardHeader",()=>s,"CardTitle",()=>i])},487486,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(225913),s=e.i(975157);let i=(0,r.cva)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 whitespace-nowrap shrink-0",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white shadow hover:bg-green-500/80",warning:"border-transparent bg-yellow-500 text-white shadow hover:bg-yellow-500/80",info:"border-transparent bg-blue-500 text-white shadow hover:bg-blue-500/80"}},defaultVariants:{variant:"default"}}),n=a.forwardRef(({className:e,variant:a,...r},n)=>(0,t.jsx)("div",{ref:n,className:(0,s.cn)(i({variant:a}),e),...r}));n.displayName="Badge",e.s(["Badge",()=>n])},747697,e=>{"use strict";var t=e.i(361277);e.s(["CalendarIcon",()=>t.default])},571509,e=>{"use strict";var t=e.i(92547);e.s(["ScissorsIcon",()=>t.default])},563906,e=>{"use strict";let t=(0,e.i(475254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["default",()=>t])},903446,e=>{"use strict";let t=(0,e.i(475254).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["default",()=>t])},677572,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(981140),s=e.i(30030),i=e.i(842727),n=e.i(296626),l=e.i(248425),c=e.i(586318),o=e.i(369340),d=e.i(610772),u="Tabs",[h,x]=(0,s.createContextScope)(u,[i.createRovingFocusGroupScope]),m=(0,i.createRovingFocusGroupScope)(),[p,f]=h(u),g=a.forwardRef((e,a)=>{let{__scopeTabs:r,value:s,onValueChange:i,defaultValue:n,orientation:h="horizontal",dir:x,activationMode:m="automatic",...f}=e,g=(0,c.useDirection)(x),[v,b]=(0,o.useControllableState)({prop:s,onChange:i,defaultProp:n??"",caller:u});return(0,t.jsx)(p,{scope:r,baseId:(0,d.useId)(),value:v,onValueChange:b,orientation:h,dir:g,activationMode:m,children:(0,t.jsx)(l.Primitive.div,{dir:g,"data-orientation":h,...f,ref:a})})});g.displayName=u;var v="TabsList",b=a.forwardRef((e,a)=>{let{__scopeTabs:r,loop:s=!0,...n}=e,c=f(v,r),o=m(r);return(0,t.jsx)(i.Root,{asChild:!0,...o,orientation:c.orientation,dir:c.dir,loop:s,children:(0,t.jsx)(l.Primitive.div,{role:"tablist","aria-orientation":c.orientation,...n,ref:a})})});b.displayName=v;var N="TabsTrigger",y=a.forwardRef((e,a)=>{let{__scopeTabs:s,value:n,disabled:c=!1,...o}=e,d=f(N,s),u=m(s),h=I(d.baseId,n),x=C(d.baseId,n),p=n===d.value;return(0,t.jsx)(i.Item,{asChild:!0,...u,focusable:!c,active:p,children:(0,t.jsx)(l.Primitive.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":x,"data-state":p?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:h,...o,ref:a,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{c||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(n)}),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(n)}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;p||c||!e||d.onValueChange(n)})})})});y.displayName=N;var E="TabsContent",j=a.forwardRef((e,r)=>{let{__scopeTabs:s,value:i,forceMount:c,children:o,...d}=e,u=f(E,s),h=I(u.baseId,i),x=C(u.baseId,i),m=i===u.value,p=a.useRef(m);return a.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(n.Presence,{present:c||m,children:({present:a})=>(0,t.jsx)(l.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!a,id:x,tabIndex:0,...d,ref:r,style:{...e.style,animationDuration:p.current?"0s":void 0},children:a&&o})})});function I(e,t){return`${e}-trigger-${t}`}function C(e,t){return`${e}-content-${t}`}j.displayName=E;var w=e.i(975157);function O({className:e,...a}){return(0,t.jsx)(g,{"data-slot":"tabs",className:(0,w.cn)("flex flex-col gap-2",e),...a})}function R({className:e,...a}){return(0,t.jsx)(b,{"data-slot":"tabs-list",className:(0,w.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...a})}function M({className:e,...a}){return(0,t.jsx)(y,{"data-slot":"tabs-trigger",className:(0,w.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function k({className:e,...a}){return(0,t.jsx)(j,{"data-slot":"tabs-content",className:(0,w.cn)("flex-1 outline-none",e),...a})}e.s(["Tabs",()=>O,"TabsContent",()=>k,"TabsList",()=>R,"TabsTrigger",()=>M],677572)},698062,e=>{"use strict";var t=e.i(786108);e.s(["MoreVerticalIcon",()=>t.default])},9657,e=>{"use strict";let t=(0,e.i(475254).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);e.s(["default",()=>t])},188162,e=>{"use strict";var t=e.i(9657);e.s(["BellIcon",()=>t.default])},546467,e=>{"use strict";let t=(0,e.i(475254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["default",()=>t])},935832,e=>{"use strict";let t=(0,e.i(475254).default)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);e.s(["default",()=>t])},487301,e=>{"use strict";var t=e.i(843476),a=e.i(613846),r=e.i(271645),s=e.i(519455),i=e.i(793479),n=e.i(967489),l=e.i(677572),c=e.i(487486),o=e.i(93814),d=e.i(401851),u=e.i(116550),h=e.i(515288),x=e.i(755146),m=e.i(747697),p=e.i(754473),f=e.i(571509),g=e.i(935832),g=g,v=e.i(328196),b=e.i(879664),b=b,N=e.i(698062),y=e.i(678784);let E=(0,e.i(475254).default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var j=e.i(607237),I=e.i(546467),I=I,C=e.i(975157);let w={BOOKING_CONFIRMED:m.CalendarIcon,BOOKING_CANCELLED:m.CalendarIcon,BOOKING_REMINDER:m.CalendarIcon,GROOMING_STARTED:f.ScissorsIcon,GROOMING_COMPLETED:f.ScissorsIcon,PAYMENT_RECEIVED:p.CreditCardIcon,PAYMENT_FAILED:p.CreditCardIcon,REFUND_PROCESSED:p.CreditCardIcon,REVIEW_REQUEST:f.ScissorsIcon,PROMOTION:g.default,SYSTEM_NOTICE:b.default},O={BOOKING_CONFIRMED:"text-green-600 bg-green-100",BOOKING_CANCELLED:"text-red-600 bg-red-100",BOOKING_REMINDER:"text-blue-600 bg-blue-100",GROOMING_STARTED:"text-purple-600 bg-purple-100",GROOMING_COMPLETED:"text-green-600 bg-green-100",PAYMENT_RECEIVED:"text-emerald-600 bg-emerald-100",PAYMENT_FAILED:"text-red-600 bg-red-100",REFUND_PROCESSED:"text-orange-600 bg-orange-100",REVIEW_REQUEST:"text-yellow-600 bg-yellow-100",PROMOTION:"text-pink-600 bg-pink-100",SYSTEM_NOTICE:"text-gray-600 bg-gray-100"},R={LOW:"border-l-gray-300",NORMAL:"border-l-blue-400",HIGH:"border-l-orange-400",URGENT:"border-l-red-500"};function M({notification:e,onMarkAsRead:a,onMarkAsUnread:i,onArchive:n,onDelete:l,onNavigate:o,className:m}){var p;let[f,g]=(0,r.useState)(!1),b=w[e.type]||v.AlertCircleIcon,M=O[e.type]||"text-gray-600 bg-gray-100",k=R[e.priority],T="UNREAD"===e.status,D="ARCHIVED"===e.status;return(0,t.jsx)(h.Card,{className:(0,C.cn)("cursor-pointer border-l-4 transition-all duration-200 hover:shadow-md",k,{"border-blue-200 bg-blue-50/50":T,"opacity-60":D},m),onClick:()=>{T&&a(e.id),o&&o(e)},children:(0,t.jsx)(h.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:(0,C.cn)("flex-shrink-0 rounded-lg p-2",M),children:(0,t.jsx)(b,{className:"h-5 w-5"})}),(0,t.jsx)("div",{className:"min-w-0 flex-1",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center space-x-2",children:[(0,t.jsx)("h4",{className:(0,C.cn)("truncate text-sm font-medium",T?"text-gray-900":"text-gray-700"),children:e.title}),T&&(0,t.jsx)("div",{className:"h-2 w-2 flex-shrink-0 rounded-full bg-blue-500"})]}),(0,t.jsx)("p",{className:"mb-2 line-clamp-2 text-sm text-gray-600",children:e.content}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[(0,t.jsx)("span",{children:{BOOKING_CONFIRMED:"예약 확정",BOOKING_CANCELLED:"예약 취소",BOOKING_REMINDER:"예약 알림",GROOMING_STARTED:"미용 시작",GROOMING_COMPLETED:"미용 완료",PAYMENT_RECEIVED:"결제 완료",PAYMENT_FAILED:"결제 실패",REFUND_PROCESSED:"환불 완료",REVIEW_REQUEST:"리뷰 요청",PROMOTION:"프로모션",SYSTEM_NOTICE:"시스템 공지"}[p=e.type]||p}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:(e=>{let t=new Date(e),a=Math.floor((new Date().getTime()-t.getTime())/6e4);if(a<1)return"방금 전";if(a<60)return`${a}분 전`;let r=Math.floor(a/60);if(r<24)return`${r}시간 전`;let s=Math.floor(r/24);return s<7?`${s}일 전`:(0,d.format)(t,"yyyy-MM-dd",{locale:u.ko})})(e.createdAt)}),e.readAt&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:"읽음"})]})]})]}),(0,t.jsxs)("div",{className:"ml-2 flex items-center space-x-2",children:[(e=>{if("LOW"===e)return null;let a={NORMAL:{variant:"secondary",label:"일반"},HIGH:{variant:"outline",label:"중요"},URGENT:{variant:"destructive",label:"긴급"}}[e];return a?(0,t.jsx)(c.Badge,{variant:a.variant,className:"text-xs",children:a.label}):null})(e.priority),(0,t.jsxs)(x.DropdownMenu,{open:f,onOpenChange:g,children:[(0,t.jsx)(x.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-100",onClick:e=>{e.stopPropagation(),g(!f)},children:(0,t.jsx)(N.MoreVerticalIcon,{className:"h-4 w-4"})})}),(0,t.jsxs)(x.DropdownMenuContent,{align:"end",className:"w-48",children:[T?(0,t.jsxs)(x.DropdownMenuItem,{onClick:t=>{t.stopPropagation(),a(e.id),g(!1)},children:[(0,t.jsx)(y.CheckIcon,{className:"mr-2 h-4 w-4"}),"읽음 표시"]}):(0,t.jsxs)(x.DropdownMenuItem,{onClick:t=>{t.stopPropagation(),i(e.id),g(!1)},children:[(0,t.jsx)(v.AlertCircleIcon,{className:"mr-2 h-4 w-4"}),"읽지 않음 표시"]}),!D&&(0,t.jsxs)(x.DropdownMenuItem,{onClick:t=>{t.stopPropagation(),n(e.id),g(!1)},children:[(0,t.jsx)(E,{className:"mr-2 h-4 w-4"}),"보관"]}),e.relatedId&&o&&(0,t.jsxs)(x.DropdownMenuItem,{onClick:t=>{t.stopPropagation(),o(e),g(!1)},children:[(0,t.jsx)(I.default,{className:"mr-2 h-4 w-4"}),"관련 페이지로 이동"]}),(0,t.jsxs)(x.DropdownMenuItem,{onClick:t=>{t.stopPropagation(),l(e.id),g(!1)},className:"text-red-600 focus:text-red-600",children:[(0,t.jsx)(j.TrashIcon,{className:"mr-2 h-4 w-4"}),"삭제"]})]})]})]})]})})]})})})}var k=e.i(188162),T=e.i(903446),T=T,D=e.i(988846),S=e.i(563906),S=S;function A({onNavigate:e,className:a}){let[d,u]=(0,r.useState)([]),[h,x]=(0,r.useState)(!0),[m,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)({page:1,limit:20}),[v,b]=(0,r.useState)(""),[N,I]=(0,r.useState)("all"),[w,O]=(0,r.useState)([]),R=(0,r.useCallback)(async(e=!1)=>{e?p(!0):x(!0);try{let e=new URLSearchParams;f.status&&e.append("status",f.status),f.type&&e.append("type",f.type),f.priority&&e.append("priority",f.priority),v&&e.append("search",v),e.append("page",f.page.toString()),e.append("limit",f.limit.toString());let t=await fetch(`/api/notifications?${e}`);if(!t.ok)throw Error("알림을 불러올 수 없습니다");let a=await t.json();u(a.notifications)}catch(e){console.error("Error fetching notifications:",e)}finally{x(!1),p(!1)}},[f,v]);(0,r.useEffect)(()=>{R()},[f,v,R]);let A=async e=>{try{(await fetch(`/api/notifications/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"READ",readAt:new Date})})).ok&&u(t=>t.map(t=>t.id===e?{...t,status:"READ",readAt:new Date().toISOString()}:t))}catch(e){console.error("Error marking notification as read:",e)}},_=async e=>{try{(await fetch(`/api/notifications/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"UNREAD",readAt:null})})).ok&&u(t=>t.map(t=>t.id===e?{...t,status:"UNREAD",readAt:void 0}:t))}catch(e){console.error("Error marking notification as unread:",e)}},P=async e=>{try{(await fetch(`/api/notifications/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"ARCHIVED",archivedAt:new Date})})).ok&&u(t=>t.map(t=>t.id===e?{...t,status:"ARCHIVED"}:t))}catch(e){console.error("Error archiving notification:",e)}},G=async e=>{try{(await fetch(`/api/notifications/${e}`,{method:"DELETE"})).ok&&u(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting notification:",e)}},L=async e=>{if(0!==w.length)try{if((await fetch("/api/notifications/batch",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationIds:w,action:e})})).ok){switch(e){case"read":u(e=>e.map(e=>w.includes(e.id)?{...e,status:"READ",readAt:new Date().toISOString()}:e));break;case"archive":u(e=>e.map(e=>w.includes(e.id)?{...e,status:"ARCHIVED"}:e));break;case"delete":u(e=>e.filter(e=>!w.includes(e.id)))}O([])}}catch(e){console.error("Error performing batch action:",e)}},V=d.filter(e=>("unread"!==N||"UNREAD"===e.status)&&("read"!==N||"READ"===e.status)&&("archived"!==N||"ARCHIVED"===e.status)),B=d.filter(e=>"UNREAD"===e.status).length;return(0,t.jsxs)("div",{className:(0,C.cn)("space-y-6",a),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center space-x-3",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(k.BellIcon,{className:"h-6 w-6"}),(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"알림"}),B>0&&(0,t.jsx)(c.Badge,{variant:"destructive",className:"rounded-full px-2 py-1 text-xs",children:B})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>R(!0),disabled:m,children:[(0,t.jsx)(S.default,{className:(0,C.cn)("mr-2 h-4 w-4",{"animate-spin":m})}),"새로고침"]}),(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",children:[(0,t.jsx)(T.default,{className:"mr-2 h-4 w-4"}),"설정"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(D.SearchIcon,{className:"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform"}),(0,t.jsx)(i.Input,{placeholder:"알림 검색...",value:v,onChange:e=>b(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(n.Select,{value:f.type||"",onValueChange:e=>g(t=>({...t,type:e||void 0})),children:[(0,t.jsx)(n.SelectTrigger,{className:"w-48",children:(0,t.jsx)(n.SelectValue,{placeholder:"유형 선택"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"",children:"모든 유형"}),(0,t.jsx)(n.SelectItem,{value:"BOOKING_CONFIRMED",children:"예약 확정"}),(0,t.jsx)(n.SelectItem,{value:"BOOKING_CANCELLED",children:"예약 취소"}),(0,t.jsx)(n.SelectItem,{value:"GROOMING_STARTED",children:"미용 시작"}),(0,t.jsx)(n.SelectItem,{value:"GROOMING_COMPLETED",children:"미용 완료"}),(0,t.jsx)(n.SelectItem,{value:"PAYMENT_RECEIVED",children:"결제 완료"}),(0,t.jsx)(n.SelectItem,{value:"PROMOTION",children:"프로모션"})]})]}),(0,t.jsxs)(n.Select,{value:f.priority||"",onValueChange:e=>g(t=>({...t,priority:e||void 0})),children:[(0,t.jsx)(n.SelectTrigger,{className:"w-32",children:(0,t.jsx)(n.SelectValue,{placeholder:"우선순위"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"",children:"모든 우선순위"}),(0,t.jsx)(n.SelectItem,{value:"LOW",children:"낮음"}),(0,t.jsx)(n.SelectItem,{value:"NORMAL",children:"보통"}),(0,t.jsx)(n.SelectItem,{value:"HIGH",children:"높음"}),(0,t.jsx)(n.SelectItem,{value:"URGENT",children:"긴급"})]})]})]}),w.length>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 rounded-lg border border-blue-200 bg-blue-50 p-3",children:[(0,t.jsxs)("span",{className:"text-sm text-blue-700",children:[w.length,"개 선택됨"]}),(0,t.jsxs)("div",{className:"ml-auto flex space-x-2",children:[(0,t.jsxs)(s.Button,{size:"sm",variant:"outline",onClick:()=>L("read"),children:[(0,t.jsx)(y.CheckIcon,{className:"mr-1 h-4 w-4"}),"읽음 처리"]}),(0,t.jsxs)(s.Button,{size:"sm",variant:"outline",onClick:()=>L("archive"),children:[(0,t.jsx)(E,{className:"mr-1 h-4 w-4"}),"보관"]}),(0,t.jsxs)(s.Button,{size:"sm",variant:"outline",onClick:()=>L("delete"),children:[(0,t.jsx)(j.TrashIcon,{className:"mr-1 h-4 w-4"}),"삭제"]})]})]}),(0,t.jsxs)(l.Tabs,{value:N,onValueChange:I,children:[(0,t.jsxs)(l.TabsList,{className:"grid w-full grid-cols-4",children:[(0,t.jsxs)(l.TabsTrigger,{value:"all",children:["전체 (",d.length,")"]}),(0,t.jsxs)(l.TabsTrigger,{value:"unread",children:["읽지 않음 (",d.filter(e=>"UNREAD"===e.status).length,")"]}),(0,t.jsxs)(l.TabsTrigger,{value:"read",children:["읽음 (",d.filter(e=>"READ"===e.status).length,")"]}),(0,t.jsxs)(l.TabsTrigger,{value:"archived",children:["보관함 (",d.filter(e=>"ARCHIVED"===e.status).length,")"]})]}),(0,t.jsx)(l.TabsContent,{value:N,className:"mt-6 space-y-4",children:h?(0,t.jsxs)("div",{className:"py-12 text-center",children:[(0,t.jsx)(o.LoadingSpinner,{size:"lg"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-4",children:"알림을 불러오는 중..."})]}):0===V.length?(0,t.jsxs)("div",{className:"py-12 text-center",children:[(0,t.jsx)(k.BellIcon,{className:"text-muted-foreground mx-auto mb-4 h-12 w-12"}),(0,t.jsx)("h3",{className:"mb-2 text-lg font-semibold text-gray-900",children:"알림이 없습니다"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["all"===N&&"새로운 알림이 없습니다.","unread"===N&&"읽지 않은 알림이 없습니다.","read"===N&&"읽은 알림이 없습니다.","archived"===N&&"보관된 알림이 없습니다."]})]}):(0,t.jsx)("div",{className:"space-y-3",children:V.map(a=>(0,t.jsx)(M,{notification:a,onMarkAsRead:A,onMarkAsUnread:_,onArchive:P,onDelete:G,onNavigate:e},a.id))})})]})]})}function _(){let e=(0,a.useRouter)();return(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)("div",{className:"mx-auto max-w-4xl",children:(0,t.jsx)(A,{onNavigate:t=>{if(t.relatedId)switch(t.type){case"BOOKING_CONFIRMED":case"BOOKING_CANCELLED":case"BOOKING_REMINDER":case"GROOMING_STARTED":case"GROOMING_COMPLETED":e.push(`/customer/booking/${t.relatedId}`);break;case"PAYMENT_RECEIVED":case"PAYMENT_FAILED":case"REFUND_PROCESSED":t.metadata?.bookingId&&e.push(`/customer/booking/${t.metadata.bookingId}`);break;case"REVIEW_REQUEST":e.push(`/customer/booking/${t.relatedId}/review`);break;case"PROMOTION":t.metadata?.promotionUrl?e.push(String(t.metadata.promotionUrl)):e.push("/customer/services");break;case"SYSTEM_NOTICE":e.push(`/notices/${t.relatedId}`);break;default:e.push("/customer")}}})})})}e.s(["default",()=>_],487301)}]);